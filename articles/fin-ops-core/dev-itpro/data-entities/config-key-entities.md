---
title: 組態金鑰和資料實體
description: 本主題描述組態金鑰和資料實體之間的關係。
author: peakerbl
ms.date: 05/10/2019
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application user
ms.reviewer: sericks
ms.custom: 25341
ms.assetid: 8e214c95-616b-4ee1-b5a4-fa5ce5147f2c
ms.search.region: Global
ms.author: peakerbl
ms.search.validFrom: 2018-01-01
ms.dyn365.ops.version: Platform update 13
ms.openlocfilehash: e9cc92563c426136b2543511ad943fd64b335b70
ms.sourcegitcommit: 3a7f1fe72ac08e62dda1045e0fb97f7174b69a25
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/31/2022
ms.locfileid: "8460371"
---
# <a name="configuration-keys-and-data-entities"></a>組態金鑰和資料實體

[!include [banner](../includes/banner.md)]


[!INCLUDE [PEAP](../../../includes/peap-1.md)]

在您使用資料實體匯入或匯出資料之前，我們建議您先確定組態金鑰對您計畫使用的資料實體的影響。

若要進一步了解組態金鑰，請參閱[授權代碼和組態金鑰報表](../sysadmin/license-codes-configuration-keys-report.md)。

### <a name="configuration-key-assignments"></a>組態金鑰指派
可以將組態金鑰指派給以下一個或所有成品。

- 資料實體
- 用作資料來源的資料表
- 資料表欄位
- 資料實體欄位

下表總結了對象基礎的不同成品上的組態金鑰值如何更改對象的預期行為。

| 資料實體上的組態金鑰設定 | 資料表上的組態金鑰設定 | 資料表欄位上的組態金鑰設定 | 資料實體欄位上的組態金鑰 | 預期行為 |
|-----------------------------------------|------------------------------------|------------------------------------------|----------------------------------------|------------------|
| 已停用                                | 未評估                      | 未評估                            | 未評估                          | 如果資料實體的組態金鑰已停用，則資料實體將不起作用。 基礎表和欄位中的組態金鑰是啟用還是停用都沒有關係。 |
| 已啟用                                 | 已停用                           | 未評估                            | 未評估                          | 如果啟用了資料實體的組態金鑰，則資料管理架構會檢查每個基礎表上的組態金鑰。 如果停用資料表的組態金鑰，則該資料表將無法在資料實體中作為函數使用。 如果停用資料表的組態金鑰，則不會評估資料表和資料實體組態金鑰設定。 如果實體中的主要資料表的組態金鑰被停用，那麼該系統將就好像實體的組態金鑰被停用一樣。 |
| 已啟用                                 | 已啟用                            | 已停用                                 | 未評估                          | 如果啟用了資料實體的組態金鑰，並且啟用了基礎表組態金鑰，則資料管理架構將檢查表中欄位的組態金鑰。 如果某個欄位的組態金鑰被停用，即使相應的資料實體欄位啟用了組態金鑰，該欄位在資料實體中也將無法作為函數使用。 |
| 已啟用                                 | 已啟用                            | 已啟用                                  | 已停用                               | 如果在所有其他級別啟用了組態金鑰，但未啟用實體欄位組態金鑰，則該欄位將無法在資料實體中使用。 |

> [!NOTE]
> 如果一個實體有另一個實體作為資料來源，則以遞迴方式應用上述語義。

### <a name="entity-list-refresh"></a>重新整理實體清單
重新整理實體清單時，資料管理架構會構建組態金鑰中繼資料以供執行階段使用。 此中繼資料是使用上述邏輯構建的。 我們強烈建議您等待實體清單重新整理完成，然後再在資料管理架構中使用作業和實體。 如果您不等待，組態金鑰中繼資料可能不是最新的，並可能導致意外結果。 重新整理實體清單時，實體清單頁面中會顯示以下訊息。

![重新整理實體清單。](./media/Entity_refresh_list.png)

### <a name="data-entity-list-page"></a>資料實體清單頁面
資料管理工作區中的資料實體清單頁面顯示實體的組態金鑰設定。 從此頁面開始，了解組態金鑰對資料實體的影響。

此資訊使用在實體重新整理期間構建的中繼資料顯示。 組態金鑰列顯示與資料實體相關的組態金鑰的名稱。 如果此資料欄為空白，則表示沒有與資料實體相關的組態金鑰。 組態金鑰狀態列顯示組態金鑰的狀態。 如果它有勾選標記，則表示該金鑰已啟用。 如果為空白，則表示該金鑰被停用或沒有相關的金鑰。

![實體清單頁面。](./media/Data_entity_list_page.png)

### <a name="target-fields"></a>目標欄位
下一步是深入資料實體以查看組態金鑰對資料表和欄位的影響。 資料實體的目標欄位表單顯示資料實體中相關資料表和欄位的組態金鑰和金鑰狀態資訊。 如果資料實體本身停用了其組態金鑰，則會顯示一條警告訊息，通知該實體的目標欄位表單中的資料表和欄位將根本不可用，無論其組態金鑰狀態如何。

![目標欄位。](./media/Target_fields_1.png)

### <a name="child-entities"></a>子實體 
某些實體有其他實體作為資料來源，或者是複合資料實體：這些實體的設定關鍵資訊顯示在子實體表單中。 以與上述實體清單頁面類似的方式使用此表單。 子實體的目標欄位表單的行為也類似於上述內容。

![目標欄位。](./media/Target_fields_2.png)

### <a name="using-data-entities"></a>使用資料實體
在了解了組態金鑰對您想要使用的資料實體的全部影響 (如果有的話) 之後，您現在可以透過將資料實體新增到資料項目來繼續使用它們。 

### <a name="run-time-validations-for-configuration-keys"></a>組態金鑰的執行階段驗證
使用在實體重新整理清單期間構建的組態金鑰中繼資料，在以下使用範例中執行執行階段驗證。

- 將資料實體新增到作業時
- 當使用者點選實體清單上的「驗證」時
- 當使用者將資料套件載入到資料專案中時
- 當使用者將範本載入到資料項目中時
- 載入現有資料專案時
- 將範本載入到資料專案中時
- 在執行匯出/匯入作業之前 (批次處理、非批次處理、定期、OData)
- 當使用者產生對應時
- 當使用者在對應 UI 中對應欄位時
- 當使用者僅新增「可匯入欄位」時

### <a name="managing-configuration-key-changes"></a>管理組態金鑰更改
每當您在實體、資料表或欄位級別更新組態金鑰時，都必須重新整理資料管理架構中的實體清單。 此過程可確保架構獲取最新的設定密鑰設定。 在實體清單重新整理之前，實體清單頁面會顯示如下警告。 更新後的組態金鑰更改將在實體清單重新整理後立即生效。 我們建議您驗證現有的資料專案和作業，以確保它們在組態金鑰更改生效後按預期執行。

![目標欄位。](./media/Target_fields_3.png)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
