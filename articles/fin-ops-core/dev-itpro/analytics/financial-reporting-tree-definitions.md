---
title: 財務報告中的報告樹狀結構定義
description: 本文介紹了報告樹狀結構定義。 報告樹狀結構定義是定義組織結構的報告組件。
author: jinniew
ms.date: 04/01/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: FinancialReports
audience: Application User
ms.reviewer: roschlom
ms.custom: 57592
ms.assetid: 747faa47-9a23-4277-bc11-8d0a1267c3a4
ms.search.region: Global
ms.author: aolson
ms.search.validFrom: 2016-05-31
ms.dyn365.ops.version: AX 7.0.1
ms.openlocfilehash: 92da476f64b937d339b5f0c6088b8ce722a0584938ccf2a6c6cbd39fdc15544d
ms.sourcegitcommit: 42fe9790ddf0bdad911544deaa82123a396712fb
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/05/2021
ms.locfileid: "8460214"
---
# <a name="reporting-tree-definitions-in-financial-reports"></a>財務報告中的報告樹狀結構定義

[!include [banner](../includes/banner.md)]

本文提供有關報表樹狀結構定義的資訊。 報告樹狀結構定義是一個報告組件或建構元素，可幫助定義組織的結構和階層。

財務報告支援彈性的報告，以便您可以隨著業務結構的變化輕鬆進行更改。 報告由各種組件或建構元素構建而成。 這些建構元素之一是報告樹狀結構定義。 報告樹狀結構定義有助於定義組織的結構和階層。 它是一種基於財務資料中維度關係的跨維度階層。 它在報告單位級別和樹狀結構中所有單位的摘要級別提供資訊。 報告樹狀結構定義可以與列定義和報告定義相結合，以建立可供多家公司使用的建構元素組。 報告單位用於組織結構圖中的每個方塊。 報告單位可以是財務資料中的單個部門，也可以是結合其他報告單位資訊的更高級別的匯總單位。 對於包含報告樹狀結構的報告定義，將為每個報告單位和匯總級別產生一份報告。 所有這些報表都使用報表定義中指定的行和列定義，除非報表定義指定應使用行定義中的報表樹狀結構。 列和欄定義是財務報告設計和函數的重要組成部分。 隨著業務結構的變化，報告樹狀結構增加了組件的功能並支援彈性的報告。 不基於報告樹狀結構的財務報告僅使用財務報告的部分功能。 您可以將多個報告樹狀結構定義與相同的列和欄定義一起使用，以各種方式查看您組織的資料。

## <a name="reporting-tree-best-practices"></a>報告樹狀結構最佳做法
在建立報告樹狀結構之前，請考慮以下最佳做法：

- 請先確定您的法律實體或公司需要哪些報告維度。
- 考慮一下您是如何設定結構的，然後繪製公司的組織結構圖。 組織結構圖將幫助您直觀地了解如何將報告單位分組到一個或多個報告樹狀結構中。
- 從可用的最低詳細級別開始，例如財務資料中定義的部門和專案。 根據需要將盡可能多的方塊新增到詳細級別，以顯示更高級別的部門或區域。 每個方塊代表您建立的任何報告樹狀結構中的一個潛在報告單位。
- 您還必須考慮建造樹狀結構木的最佳方式。 您可以使用自動構建過程來產生報告樹狀結構，也可以手動建立報告樹狀結構。 在設計樹狀結構之前了解這兩種方法很重要。
- 您可以使用在財務資料系統中定義的報告單位將報告單位新增到報告樹狀結構定義中。

## <a name="create-multiple-reporting-trees"></a>建立多個報告樹狀結構
您可以建立無限數量的報告樹狀結構，以各種方式查看您組織的資料。 每個報告樹狀結構可以包含部門和匯總單位的任意組合。 報告定義一次只能包含指向一個報告樹狀結構的連結。 透過重新排列報告單位的結構，您可以建立不同的報告樹狀結構。 然後，您可以對每個報告樹狀結構使用相同的列和欄定義。 透過這種方式，您可以快速建立不同的財務報表配置。 如果您建立多個報告樹狀結構，您可以每月列印一系列財務報表，以各種方式分析和展示您公司的營運。 如需相關資訊，請參閱本文末尾的報告單位結構範例。

## <a name="create-a-reporting-tree-definition"></a>建立報告樹狀結構定義
報告樹狀結構定義包含下表中描述的資料欄。

| 報告樹狀結構欄 | 描述 |
|-----------------------|-------------|
| 公司               | 報告單位的公司名稱。 **\@ANY** 值通常僅指派給摘要級別，它使報告樹狀結構可用於所有公司。 所有子分支機構都有一個公司指派給他們。 |
| 單元名稱             | 在圖形報告樹狀結構中標識此報告單位的代碼。 一定要建立一個獨特的、一致的、易於使用者理解的編碼系統。 |
| 單元描述      | 如果您在報告定義的 **頁頭和頁尾** 索引標籤上輸入 **UnitDesc** 作為代碼，則報告單位標題會出現在報告頁頭或頁尾中。 如果您在列定義的 **描述** 儲存格中輸入 **UnitDesc**，則標題將出現在報告列描述中。 |
| 維度            | 直接從財務資料中提取資訊的報告單位。 它定義了帳戶和相關區段的邏輯定位和長度。 每個報告單位列都必須在此欄中有一個維度。 您還可以將維度放在摘要單位列中 (例如，與該單位直接相關的費用)。 如果您在摘要單位列中輸入維度，則在父單位中使用的科目不應在子單位中使用。 否則，金額可能會重複。 |
| 列定義       | 報告單位的列定義的名稱。 報告樹狀結構的每個單元使用相同的列定義。 產生報告時，此列定義用於每個報告單位。 列定義可以包括多個財務維度連結。 如果在報告樹狀結構中指定了列定義，請選中報告定義的 **報告** 索引標籤上的 **使用報告樹狀結構中的列定義** 核取方塊。 |
| 財務維度連結| 用於報告單位的財務維度連結。 為列定義定義財務維度連結以識別要連結到的財務維度。 |
| 頁面選項          | 此欄控制項在查看或列印報告時是否隱藏報告單位的詳情。 |
| 彙總 %              | 應指派給父單位的報告單位的百分比。 在將資料列中的值新增到父報表之前，您在此資料欄中輸入的百分比適用於列定義的每一列。 例如，如果子單位必須在兩個部門之間平均指派，則每列中的金額將乘以 50%，然後再將值新增到部門報表中。 一個報告單位不能有兩個父單位。 若要將金額從一個報告單位指派到兩個父單位，請建立另一個具有相同維度的報告單位以彙總額外的 50%。 輸入不帶小數點的整數百分比。 例如，**25** 表示指派給父母的 25%。 如果包含小數點 (**.25**)，0.25% 則指派給父級。 若要使用小於 1% 的百分比，請使用報告定義中的 **允許彙總 &lt;1%** 選項。 此選項位於 **報告設定** 對話方塊的 **附加選項** 索引標籤上。 您可以從報告定義的 **設定** 索引標籤上的 **其他** 按鈕存取此對話方塊。 |
| 單元安全性         | 對可以存取報告單位資訊的使用者和群組的限制。 |
| 其他文字       | 報告中包含的文字。 |

若要建立報告樹狀結構定義，請執行以下步驟。

1. 開啟 Report Designer。
2. 點選 **檔案**&gt;**新建**&gt;**報告樹狀結構定義**。
3. 點選 **編輯**&gt;**從維度插入報表單位**。
4. 在 **從維度插入報告單位** 對話方塊中，選中要包含在報告樹狀結構中的每個維度的核取方塊。 **從維度插入報告單位** 對話方塊包含以下區塊。

    | 區段                          | 描述 |
    |----------------------------------|-------------|
    | 報表維度分割 | 使用 **分割區段** 和 **合併區段** 按鈕更改段的數量和長度。<blockquote>[!NOTE] 您只能合併已分割的區段。 若要組合多個維度，請在維度值中使用萬用字元。</blockquote> |
    | 包括/字元位置       | 本區塊列出了財務資料中定義的維度，並顯示了為每個維度定義的最長值中的字元數。 選中某個維度的核取方塊以將該維度包含在報告樹狀結構階層中。 |
    | 區段階層與範圍     | 此區塊顯示維度階層。 您可以移動清單中的維度以更改其報告順序。 在 **來源維度** 和 **目標維度** 欄位，您可以在每個維度中指定一系列值。 如果您未指定範圍，則所有維度值都將插入到報告樹狀結構中。<blockquote>[!NOTE] 如果您使用多個維度，則結果中僅回傳已發佈到的維度組合。</blockquote> |

    有關顯示 **從維度插入報告單位** 對話方塊範例的插圖，請參閱本文後面的「從維度插入報告單位對話方塊的範例」章節。

5. 若要建立其他區段 (例如，將一個區段拆分為兩個較短的區段)，請點選 **字元位置** 欄位，然後點選 **分割區段**。
6. 若要將兩個區段合併為一個區段，請點選任一區段方塊以合併，然後點選 **合併區段**。
7. 階層定義了維度如何相互報告以及每個維度的範圍。 若要更改維度的階層，在 **細分階層和範圍** 區域，選取要移動的維度，然後點選 **上移** 或 **下移**。
8. 若要指定要新增到新報告樹狀結構的維度值範圍，請在 **細分階層和範圍** 區域，請按照下列步驟動作：

    1. 在 **來源維度** 在該維度的欄位中，輸入範圍中的第一個值。
    2. 在 **目標維度** 欄位，輸入範圍內的最後一個值。

9. 對 **細分階層和範圍** 區域中的每個維度重複步驟 7 到 8。
10. 完成定義報告單位應如何進入新報告樹狀結構後，點選 **確定**。
11. 點選 **檔案**&gt;**儲存** 儲存報告樹狀結構。 輸入報告樹狀結構的唯一名稱和描述，然後點選 **確定**。

### <a name="open-an-existing-reporting-tree-definition"></a>打開現有的報告樹狀結構定義

1. 在 Report Designer 中，點選瀏覽窗格中的 **報表樹狀結構定義**。
2. 按兩下點選報告樹狀結構清單中的名稱將其打開。
3. 若要查看與報告樹狀結構關聯的任何建構元素，請按右鍵點選報告樹狀結構定義，然後選取 **關聯**。

### <a name="roll-up-data-in-a-reporting-tree"></a>在報告樹狀結構中彙總資料

使用報告樹狀結構時，您可以在父報告單位級別彙總子報告單位的金額。 這種彙總稱為彙總資料。 以下規則用於將金額彙總到報告樹狀結構中的父單位：

- 在報告樹狀結構中，子單元必須包含維度，除非報告樹狀結構是單級樹狀結構。 父單位通常不包含報告樹狀結構中的維度。

    > [!NOTE]
    > 如果您同時為子單位和父單位指定維度，則可能會導致報表中的資料重複。

- 在報告樹狀結構中包含維度的報告單位對應於列和欄定義中使用的維度。 維度的組合決定了為該單位回傳的金額。 例如，在本文後面的範例 2 中，第 6 行和第 7 行分別僅回傳部門 00 和 01 的值。
- 報告樹狀結構中不包含維度的父報告單位的金額由子單位報告確定，並將金額匯總到指定的父單位。 例如，如果父單元 (請參閱資料彙總範例的範例 2 中的 Contoso USA) 有兩個子單元 (022 和 023) 並且不包含維度，則會為每個子單元和父單元產生一個報告。 父總金額是兩個子金額的總和。

### <a name="manage-reporting-units"></a>管理報告單位

每個報告樹狀結構定義都顯示在唯一的檢視表中。 有一個顯示父/子階層的圖形檢視表和一個顯示每個報告單位的特定資訊的工作表檢視表。 圖形檢視表和工作表檢視表是相連的。 當您在一個檢視表中選取一個報告單位時，它也會在另一個檢視表中被選中。 您可以根據財務資料中的維度關係構建跨維度階層。 建立報告樹狀結構定義時，您可以多次使用相同的列定義，無論您是產生部門損益表還是合併彙總損益表。 列定義中定義的維度可以與報告樹狀結構定義中的維度組合，以提供組織績效的各種檢視表。

### <a name="reporting-unit-structure"></a>報告單位結構

財務報告中使用以下類型的報告單位：

- 詳情單元直接從財務資料中提取資訊。
- 摘要單位匯總來自較低級別單元的資料。

父報告單元是匯總來自詳細單元匯總資訊的摘要單位。 摘要單位既可以是詳情單元，也可以是摘要單位。 因此，摘要單位可以從較低級別的單元或財務資料中提取資訊。 父單元可以是更高級別父單元的子單元。 子報告單位可以是直接從財務資料中提取資訊的詳情單位。 子報告單元也可以是中間摘要單位。 也就是說，它既可以是下級單元的父單元，也可以是上級摘要單位的子單元。 在報告單位的最常見案例中，父單位在 **維度** 欄中有一個空白儲存格，而子單位具有指向特定或萬用字元維度組合的連結。

### <a name="organize-reporting-units"></a>組織報表單位

您可以透過在圖形檢視表中移動報告單位來重新排列報告樹狀結構定義的組織結構。 您還可以在報告樹狀結構中將報告單位提升到較高級別或將其降級到較低級別。

1. 在 Report Designer 中，打開報表樹狀結構定義做修改。
2. 在報告樹狀結構定義的圖形檢視表中，選取一個報告單位。
3. 將單位拖動到新位置。 或者，按右鍵點選該單元，然後選取 **升階報表單位** 或 **降級報表單位**。
4. 點選 **檔案**&gt;**儲存** 儲存您的更改內容。

### <a name="add-text-about-a-reporting-unit"></a>新增有關報告單位的文字

附加文字分錄是最多 255 個字元的靜態文字字串，可將資訊新增到報告樹狀結構定義中。 例如，附加文字可以是簡短的公司描述。 您最多可以為報告樹狀結構定義中的每個報告單位建立十個附加文字分錄。 附加文字出現在文字指派到的報告單位的報告中。 您可以從行定義的 **描述** 欄以及報表定義的 **頁頭和頁尾** 索引標籤中新增文字分錄。

1. 在 Report Designer 中，打開報表樹狀結構定義做修改。
2. 按兩下點選報表單位列的 **額外文字** 儲存格。
3. 在 **附加文字** 對話方塊中，在第一個空白列中輸入文字。 包含文字的第一列被參考為 UnitText1，無論其在 **附加文字** 對話方塊中的位置如何。
4. 若要為此報告單位新增更多文字分錄，請在空白列中輸入文字。
5. 點選 **確定**。

### <a name="remove-additional-text-from-a-reporting-unit"></a>從報告單位中刪除附加文字

1. 在 Report Designer 中，打開報表樹狀結構定義做修改。
2. 按兩下點選報表單位列的 **額外文字** 儲存格。
3. 在 **附加文字** 對話方塊，選取要刪除的分錄，然後點選 **清除**。 或者，按右鍵點選該分錄，然後選取 **剪下**。
4. 點選 **確定**。

### <a name="restrict-access-to-a-reporting-unit"></a>限制對報告單位的存取

您可以阻止某些使用者和組存取報告單位。 您還可以定義限制，以便它們適用於報告單位的子報告單位。

1. 在 Report Designer 中，打開報表樹狀結構定義做修改。
2. 按兩下點選報告單位列的 **單位安全性** 儲存格以限制存取。
3. 在 **單位安全性** 對話方塊，點選 **使用者和群組**。
4. 選取應有權存取報告單位的使用者或群組，然後點選 **確定**。
5. 若要限制對子報告單位的存取，請選取 **為子報告單位增加安全性** 核取方塊。
6. 點選 **確定**。

### <a name="remove-access-to-a-reporting-unit"></a>移除對報告單位的存取

1. 在 Report Designer 中，打開報表樹狀結構定義做修改。
2. 按兩下點選報告單位列的 **單位安全性** 儲存格以移除存取。
3. 在 **單位安全性** 對話方塊，選取一個名稱，然後點選 **移除**。
4. 點選 **確定**。

## <a name="examples"></a>範例
### <a name="reporting-unit-structure--example-1"></a>報告單位結構 - 範例 1

以下是以下報告樹狀結構中報告單位的結構：

- Contoso Japan 報告單位是 Contoso Japan Sales 和 Contoso Japan Consulting 子單位的父單位。
- Contoso 日本銷售部門單位既是 Contoso 日本單位的子單位，又是 Home Sales 和 Auto Sales 單位的父單位。
- 最低級別的詳細報告單位 (房屋銷售、汽車銷售、客戶服務和營運) 代表財務資料中的部門。 這些報告單位位於圖表的陰影區域。
- 更高級別的摘要單位匯總來自詳細單元的資訊。

[![Contoso 摘要報告結構 - 範例 1。](./media/contosoentertainmentsummaryreportstructure.png)](./media/contosoentertainmentsummaryreportstructure.png)

### <a name="reporting-unit-structure--example-2"></a>報告單位結構 - 範例 2

在下圖中，報告樹狀結構具有按商業職能劃分的組織結構。

[![Contoso 摘要報告結構 - 範例 2。](./media/summaryofallunitscontoso.png)](./media/summaryofallunitscontoso.png)

### <a name="example-of-the-insert-reporting-units-from-dimensions-dialog-box"></a>從維度插入報告單位對話方塊的範例

下圖顯示了 **從維度插入報告單位** 對話方塊的範例。 對於此範例，結果將回傳事業單位、成本中心和部門的組合。

[![插入報表單位。](./media/insertreportingunits.png)](./media/insertreportingunits.png)

產生的報告樹狀結構定義按事業單位、成本中心和部門排序。 第五個報告單位的維度是 **事業單位 =\[ 001\]、成本中心 =\[\]、部門 =\[ 022\]**，並識別特定於事業單位 001 和部門 022 的帳戶的報告單位。

[![報告樹狀結構的插圖。](./media/reportingtree-1024x646.png)](./media/reportingtree.png)

### <a name="examples-of-data-roll-up"></a>資料彙總範例

以下範例顯示了在報告樹狀結構定義中用於彙總資料的可能資訊。

#### <a name="example-1"></a>範例 1

[![多公司彙總。](./media/mutlicompanyrollup.png)](./media/mutlicompanyrollup.png)

#### <a name="example-2"></a>範例 2

[![跨公司部門彙總。](./media/crosscompanydepartmentrollup.png)](./media/crosscompanydepartmentrollup.png)

## <a name="additional-resources"></a>其他資源

[財務報表](financial-reporting-intro.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
