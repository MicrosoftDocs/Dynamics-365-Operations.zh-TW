---
title: 為外部客戶建立公司間銷售訂單的發票
description: 本主題說明如何為外部客戶建立公司間銷售訂單的發票
author: GalynaFedorova
ms.date: 09/01/2021
ms.topic: article
ms.search.form: SalesTableListPage, SalesCreateOrder, SalesTable
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: v-gfedorova
ms.search.validFrom: 2021-09-01
ms.dyn365.ops.version: 10.0.22
ms.openlocfilehash: b5f7342a997407c8701b836c2a6a6222d8512121
ms.sourcegitcommit: 89655f832e722cefbf796a95db10c25784cc2e8e
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/31/2022
ms.locfileid: "8449886"
---
# <a name="create-and-invoice-an-intercompany-sales-order-for-an-external-customer"></a>為外部客戶建立公司間銷售訂單的發票

[!include [banner](../../includes/banner.md)]

您可以使用公司間交易，記錄產品的銷售，從相同組織中的一個法律實體至另一個法律實體。

當您建立原始銷售訂單時，可以自動為公司間廠商，建立公司間訂購單。 此功能會自動在公司間廠商的法律實體中，建立公司間銷售訂單。

下列圖示說明，當您為外部客戶建立銷售訂單時的交易流程，在您將產品交付至客戶之前，必須從組織內不同的法律實體訂購產品。 在這種情況下，將為代表其他法律實體的廠商帳戶，建立公司間訂購單。 也就是說，為客戶帳戶建立的公司間銷售訂單，將建立在其他法律實體中，已代表您的法律實體。 當公司間訂購單開立發票時，如果是直接交貨，則會自動發佈原始銷售訂單的發票。

![公司間對外銷售流程](media/intercompanyexternalsalesprocess.png)

如果您是使用直接交貨，並且在 **過帳發票** 頁面上的 **數量** 欄位中，選擇 **裝箱單**，則公司間的廠商發票，會根據公司間產品收據發佈。

## <a name="prerequisites"></a>先決條件

開始之前，請先確定滿足下列先決條件，才可以自動發佈並列印公司間發票。

1. 前往 **銷售與營銷 \> 客戶 \> 所有客戶**。
1. 在動作窗格上，於 **一般** 索引標籤，選擇 **公司間**。
1. 前往 **採購和委外 \> 廠商 \> 所有廠商**。
1. 在動作窗格上，於 **一般** 索引標籤，選擇 **公司間**。
1. 無論是在廠商或客戶的 **公司間** 頁面上，在 **訂購單原則** 的區域中，**公司間訂購單 (直接交貨)** 欄位群組中，選擇 **自動發佈發票** 核取方塊。
1. 在 **訂購單原則** 區域，在 **原始銷售訂單 (直接交貨)** 欄位群組中，選擇 **自動發佈發票** 核取方塊。 如果希望發佈公司間廠商發票時，自動列印原始銷售訂單的發票，請選擇此核取方塊。

> [!NOTE]
> 發票的列印設定，是由 **列印管理設定** 頁面中的模組、文件或交易而決定。

## <a name="create-an-original-sales-order-for-an-external-customer"></a>為外部客戶建立原始銷售訂單

在法律實體 A 中執行下列步驟。此程序對應 1 圖示。

1. 前往 **應收帳款 \> 銷售訂單 \> 所有銷售訂單**。
1. 從 **所有銷售訂單** 清單頁面，建立原始銷售訂單。 該欄位的值，會從客戶帳戶複製到銷售訂單。
1. 在 **銷售訂單** 頁面上，選擇動作窗格上的 **標題檢視**。
1. 在 **公司間設定** FastTab 上，選擇 **自動建立公司間訂單** 核取方塊。
1. 如果您希望公司間廠商，直接將項目交貨給外部客戶，請選擇 **直接交貨** 核取方塊。
1. 完成銷售訂單輸入後，關閉 **銷售訂單** 頁面。

所有項目都有指派的公司間廠商，則會自動建立公司間訂購單，然後建立公司間銷售訂單。 會出現訊息資訊，告知您已建立公司間訂購單和公司間銷售訂單。 訊息也包含這些訂單的連結。 如果找不到項目，則會顯示紅色警告，表示訂單的建立過程尚未完成。

> [!NOTE]
> 如果您在不同法律實體中建立多個訂單，其中有一個法律實體找不到項目，則將停止訂單建立的過程，即使其他的法律實體可以完成訂單建立過程。

## <a name="invoice-an-intercompany-sales-order"></a>公司間銷售訂單的發票

當公司間銷售訂單已經開立發票時，會自動開立對應的公司間訂購單發票。 然後，如果原始銷售訂單是直接交貨訂單，則會開立原始銷售訂單的發票。

在法律實體 B 中執行下列步驟。此步驟對應 2 圖示。

1. 前往 **應收帳款 \> 銷售訂單 \> 所有銷售訂單**。
1. 在 **所有銷售訂單** 清單頁面，選擇公司間銷售訂單。
1. 在動作窗格上，選擇 **發票** 索引標籤，接著選擇 **發票**。
1. 選擇 **過帳** 核取方塊。
1. 選擇銷售訂單，然後選擇 **確定**。

公司間銷售訂單的客戶發票，會自動發佈至法律實體 B。然後，公司間廠商發票，會自動發佈至法律實體 A。如果，原始銷售訂單設定為直接交貨，則會在法律實體 A 中，建立原始銷售訂單的客戶發票。

> [!NOTE]
> 以前，對於公司內銷售的案例，如果廠商發票的工作流程，是由公司間採購公司設定，則無法成功為公司間銷售訂單開立發票。 因此，公司間購買公司，必須關閉廠商發票的工作流程。 
> 
> 此限制已於發行版本 10.0.25 中的最新功能修復。 當公司間購買公司設定廠商發票工作流程之後，現在可以為公司間銷售訂單開立發票。
> 
> 若要啟用此功能，請按照以下步驟操作。
>
> 1. 選擇公司間銷售法律實體。  
> 2. 前往 **應收帳款 \> 客戶 \> 所有客戶**。
> 3. 為公司間訂購公司選擇客戶。
> 4. 前往 **一般 \> 設定 \> 公司間**。
> 5. 在 **訂購單原則** 索引標籤上，選擇 **略過公司間廠商發票的廠商發票工作流程** 參數。

[!INCLUDE[footer-include](../../includes/footer-banner.md)]
