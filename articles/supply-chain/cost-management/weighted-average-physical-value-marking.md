---
title: 具有實際成本和標記加權平均
description: 加權平均是一種基於加權平均原則的庫存模型，其中庫存的發貨估價為在庫存關帳期間收到的庫存品項的平均值加上上一期間的任何現有庫存。
author: AndersGirke
ms.date: 02/21/2022
ms.topic: article
ms.search.form: InventJournalLossProfit, InventMarking, InventModelGroup, SalesTable
audience: Application User
ms.reviewer: kamaybac
ms.custom: 65501
ms.search.region: Global
ms.author: aevengir
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 6c124716b70be837573506a738ef2034397f2bda
ms.sourcegitcommit: addae271ddfc5a8b0721c23337f69916153db4cd
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 02/21/2022
ms.locfileid: "8450060"
---
# <a name="weighted-average-with-physical-value-and-marking"></a>具有實際成本和標記加權平均

[!include [banner](../includes/banner.md)]

加權平均是一種基於平均值的庫存模型，該平均值是將每個組件 (物料交易) 乘以反映其重要性 (數量) 的係數 (成本價) 得出的結果。 換句話說，加權平均是一種庫存模型，其根據期間內收到的所有庫存的平均值加上上一期間的任何現有庫存來分配發貨交易的成本。

當您使用加權平均庫存模型執行庫存結算時，可以使用兩種方法來建立結算。 通常，將根據虛擬發貨結算所有收貨，這將保留收貨總數量和值。 此虛擬發貨具有將從其結算發貨的相應虛擬收貨。 這樣，所有發貨都會具有相同的平均成本。 虛擬發貨和收貨可視為虛擬轉移，稱為 *加權平均庫存結轉轉移*。 這種結算方式稱為 *加權平均匯總結算*。 如果只有一個收貨，則可以根據該收貨結算所有發貨，並且將不建立虛擬轉移。 這種結算方式稱為 *直接結算*。 執行庫存結轉後的任何現有庫存均按上一期間的加權平均估值，包括在下一期間的加權平均計算中。

您可以透過標記庫存交易來替代加權平均原則，以針對特定發貨結算特定品項收貨。 當您使用加權平均庫存模型依加權平均原則建立結算即調整發貨值時，需要定期結轉庫存。 在執行庫存結轉程序之前，當發生實際和財務更新時，發貨交易將按移動平均值進行評估。 除非您使用標記，否則執行實體或財務更新時，會計算執行平均值。

使用以下公式計算加權平均庫存結轉法：

- 加權平均 = (\[Q1 × P1\] + \[Q2 × P2\] + \[Q *n* × P *n*\]) ÷ (Q1 + Q2 + Q *n*)

Q = 交易的數量  
P = 交易的價格

結算是庫存結算過帳，將發貨調整為正確的加權平均值。 以下範例透過五個不同的設定顯示使用加權平均的影響：

- 沒有 **包括實際成本** 選項時的加權平均直接結算
- 沒有 **包括實際成本** 選項時的加權平均匯總結算
- 具有 **包括實際成本** 選項時的加權平均直接結算
- 具有 **包括實際成本** 選項時的加權平均匯總結算
- 具有標記的加權平均

## <a name="weighted-average-direct-settlement-without-include-physical-value"></a>不包括實際成本時的加權平均直接結算

直接結算原則直接在收貨和發貨之間建立結算，而不建立額外的庫存交易。 系統在以下情況會使用這種直接結算原則：

- 已在該期間過帳一個收貨和一個或多個發貨。
- 在該期間中僅過帳發貨，且庫存包含先前結轉的現有品項。

在這個範例中，清除了已發布產品的 **品項模型群組** 上的 **包括實際成本** 核取方塊。 下列圖表說明這些交易：

- 1a. 數量 10 (單件成本為 10.00 美元) 的庫存實際收貨。
- 1b. 數量 10 (單件成本為 10.00 美元) 的庫存財務收貨。
- 2a. 數量 10 (單件成本為 20.00 美元) 的庫存實際收貨。
- 3a. 數量 1 (單件成本價為 10.00 美元) 的庫存實際發貨 (財務過帳的交易的移動平均)。
- 3b. 數量 1 (單件成本為 10.00 美元) 庫存財務發貨 (財務過帳的交易移動平均)。
- 4a. 數量 1 (單件成本價為 10.00 美元) 的庫存實際發貨 (財務過帳的交易的移動平均)。
- 4b. 數量 1 (單件成本為 USD 10.00) 庫存財務發貨 (財務過帳的交易移動平均)。
- 5a. 數量 1 (單件成本價為 10.00 美元) 的庫存實際發貨 (財務過帳的交易的移動平均)。
- 6\. 已執行庫存結轉。 基於加權平均法，系統使用直接結算方法，因為在期間內只對一個收貨進行財務更新。 在此範例中，在 1b 和 3b 之間建立一個結算，在 1b 和 4b 之間建立了另一個結算。 沒有進行調整，因為移動平均值與加權平均值相同。

下圖說明此系列的交易，以及使用加權平均庫存模型和直接結算原則 (沒有 **包括實際成本** 選項) 的影響。

![不包括實際成本的加權平均 DS。](media/weighted-average-direct-settlement-without-include-physical-value.png)

**圖表要點**

- 庫存交易由垂直的箭頭表示。
- 實際交易由淺灰色的短箭頭表示。
- 財務交易由黑色的長箭頭表示。
- 庫存收貨依座標軸上方的垂直箭頭顯示。
- 庫存出貨依座標軸下方的垂直箭頭顯示。
- 每個新的接收貨發貨交易，都由新的標籤指定。
- 每個垂直箭頭都標有順序識別碼，例如 *1a*。 識別碼表示庫存交易在時間表上過帳的順序。
- 圖表中的每個日期都由一條黑色垂直的細線分隔。 日期在圖表底部註明。
- 庫存結算由紅色垂直虛線表示。
- 由庫存結算執行的結算作業，由紅色的虛線箭頭表示，方向從接受到發貨。

## <a name="weighted-average-summarized-settlement-without-the-include-physical-value-option"></a>沒有「包括實際成本選項」的加權平均匯總結算

當一個期間有多個收貨時，加權平均日採用匯總結算原則，將結轉期間內的所有收貨匯總到名為 *加權平均庫存結轉* 的交易記錄中。 該期間的所有收貨都將根據新建立的庫存交易的發貨進行結算。 該期間的所有發貨都將根據新的庫存交易的收貨進行結算。 如果庫存結轉後還有剩餘的現有庫存量值，則現有庫存量值將包含在加權平均庫存結轉交易記錄的收貨交易記錄中。

下圖說明了以下交易：

- 1a. 數量 1 (單件成本為 10.00 美元) 的庫存實際收貨。
- 1b. 數量 1 (單件成本為 10.00 美元) 的庫存財務收貨。
- 2a. 數量 1 (單件成本為 20.00 美元) 的庫存實際收貨。
- 2b. 數量 1 (單件成本為 22.00 美元) 的庫存財務收貨。
- 3a. 數量 1 (單件成本價為 16.00 美元) 的庫存實際發貨 (財務過帳的交易的移動平均)。
- 3b. 數量 1 (單件成本價為 16.00 美元) 庫存財務發貨 (財務過帳的交易移動平均)。
- 4a. 數量 1 (單件成本為 25.00 美元) 的庫存實際收貨。
- 5a. 數量 1 (單件成本為 30.00 美元) 的庫存實際收貨。
- 5b. 數量 1 (單件成本為 30.00 美元) 的庫存財務收貨。
- 6a. 數量 1 (單件成本價為 23.00 美元) 的庫存實際發貨 (財務過帳的交易的移動平均)。
- 7\. 已執行庫存結轉。
- 7a. 建立加權平均庫存結算交易財務發貨，以計算所有庫存財務收貨結算總和。
  - 交易 1b 的結算數量為 1，結算金額為 10.00 美元。
  - 交易 2b 的結算數量為 1，結算金額為 22.00 美元。
  - 交易 5b 的結算數量為 1，結算金額為 30.00 美元。
  - 交易 7a. 的數量為 3，結算金額為 62.00 美元。 此交易抵消了期間內財務更新的三個收貨交易的總和。
- 7b. 建立加權平均庫存結轉交易財務收貨，作為財務過帳發貨的抵消。
  - 交易 3b 的結算數量為 1，結算金額為 20.67 美元。 此交易調整 4.67 美元，使 16.00 美元的原始值達到 20.67，這是該期間財務過帳交易的加權平均值。
  - 交易 7b. 的數量為 1，結算金額為 20.67 美元，抵消 3b。 此交易抵消了期間內財務更新的一個發貨交易的總和。

下圖說明此系列的交易，以及使用加權平均庫存模型和匯總結算原則 (沒有 **包括實際成本** 選項) 的影響。

![不包括實際成本的加權平均 SS。](media/weighted-average-summarized-settlement-without-include-physical-value.png)

**圖表要點**

- 庫存交易由垂直的箭頭表示。
- 實際交易由淺灰色的短箭頭表示。
- 財務交易由黑色的長箭頭表示。
- 庫存收貨依座標軸上方的垂直箭頭顯示。
- 庫存出貨依座標軸下方的垂直箭頭顯示。
- 每個新的接收貨發貨交易，都由新的標籤指定。
- 每個垂直箭頭都標有順序識別碼，例如 *1a*。 識別碼表示庫存交易在時間表上過帳的順序。
- 圖表中的每個日期都由一條黑色垂直的細線分隔。 日期在圖表底部註明。
- 庫存結算由紅色垂直虛線表示。
- 由庫存結算執行的結算作業，由紅色的虛線箭頭表示，方向從接受到發貨。

## <a name="weighted-average-direct-settlement-with-the-include-physical-value-option"></a>具有包括實際成本選項時的加權平均直接結算

參數 **包括實際成本** 在加權平均庫存模型的使用方式與該產品先前版本中的使用方式不同。 如果選取 **品項模型群組** 表單中的 **包括實際成本** 選項，此系統將在計算估計的發貨成本價或移動平均值時使用實際更新的收貨。 在此期間，將根據此估計成本價格過帳發貨。 在庫存結轉期間，在加權平均計算時僅考慮財務更新的收貨。

下圖說明了以下交易：

- 1a. 數量 10 (單件成本為 10.00 美元) 的庫存實際收貨。
- 1b. 數量 10 (單件成本為 10.00 美元) 的庫存財務收貨。
- 2a. 數量 10 (單件成本為 20.00 美元) 的庫存實際收貨。
- 3a. 數量 1 (單件成本價為 15.00 美元) 的庫存財務發貨 (實際和財務過帳的交易移動平均)
- 3b. 數量 1 (單件成本價為 15.00 美元) 的庫存實際發貨 (實際和財務過帳的交易移動平均)
- 4a. 數量 1 (單件成本價為 USD 15.00) 的庫存財務發貨 (實際和財務過帳的交易移動平均)
- 4b. 數量 1 (單件成本為 15.00 美元) 的庫存實際發貨 (實際和財務過帳的交易移動平均)
- 5a. 數量 1 (單件成本價為 USD 15.00) 的庫存財務發貨 (實際和財務過帳的交易移動平均)
- 6\. 已執行庫存結轉。 基於加權平均法，系統使用直接結算方法，因為在期間內只對一個收貨進行財務更新。 在此範例中，在 1b 和 3b 之間建立一個結算，在 1b 和 4b 之間建立了另一個結算。 交易 3b 和 4b 分別調整了 -5.00 美元，以使值達到 USD 10.00。

下圖說明此系列的交易，以及使用加權平均庫存模型和直接結算原則 (具有 **包括實際成本** 選項) 的影響。

![包括實際成本的加權平均 DS。](media/weighted-average-direct-settlement-with-include-physical-value.png)

**圖表要點**

- 庫存交易由垂直的箭頭表示。
- 實際交易由淺灰色的短箭頭表示。
- 財務交易由黑色的長箭頭表示。
- 庫存收貨依座標軸上方的垂直箭頭顯示。
- 庫存出貨依座標軸下方的垂直箭頭顯示。
- 每個新的接收貨發貨交易，都由新的標籤指定。
- 每個垂直箭頭都標有順序識別碼，例如 *1a*。 識別碼表示庫存交易在時間表上過帳的順序。
- 圖表中的每個日期都由一條黑色垂直的細線分隔。 日期在圖表底部註明。
- 庫存結算由紅色垂直虛線表示。
- 由庫存結算執行的結算作業，由紅色的虛線箭頭表示，方向從接受到發貨。

## <a name="weighted-average-summarized-settlement-with-the-include-physical-value-option"></a>具有「包括實際成本選項」的加權平均匯總結算

**包括實際成本** 參數在加權平均的使用方式與先前版本中的使用方式不同。 為 **品項模型群組** 頁面上的某品項選擇 **包括實際價值** 核取方塊。 然後，系統將使用實際更新的收貨來計算估計成本價或移動平均值。 在此期間，將根據此估計成本價格過帳發貨。 在庫存結轉期間，在加權平均計算時僅考慮財務更新的收貨。 建議您在使用加權平均庫存模型時使用每月庫存結轉。 在此加權平均匯總結算範例中，將標記庫存模型以包括實際成本。

下圖說明了以下交易：

- 1a. 數量 1 (單件成本為 10.00 美元) 的庫存實際收貨。
- 1b. 數量 1 (單件成本為 10.00 美元) 的庫存財務收貨。
- 2a. 數量 1 (單件成本為 20.00 美元) 的庫存實際收貨。
- 2b. 數量 1 (單件成本為 22.00 美元) 的庫存財務收貨。
- 3a. 數量 1 (單件成本價為 16.00 美元) 的庫存財務發貨 (實際和財務過帳的交易移動平均)。
- 3b. 數量 1 (單件成本價為 16.00 美元) 的庫存實際發貨 (實際和財務過帳的交易移動平均)。
- 4a. 數量 1 (單件成本為 25.00 美元) 的庫存實際收貨。
- 5a. 數量 1 (單件成本為 30.00 美元) 的庫存實際收貨。
- 5b. 數量 1 (單件成本為 30.00 美元) 的庫存財務收貨。
- 6a. 數量 1 (單件成本價為 23.67 美元) 的庫存財務發貨 (實際和財務過帳的交易移動平均)。
- 7\. 已執行庫存結轉。
- 7a. 建立加權平均庫存結算交易財務發貨，以計算所有庫存財務收貨結算總和。
  - 交易 1b 的結算數量為 1，結算金額為 10.00 美元。
  - 交易 2b 的結算數量為 1，結算金額為 22.00 美元。
  - 交易 5b 的結算數量為 1，結算金額為 30.00 美元。
  - 交易 7a. 的數量為 3，結算金額為 62.00 美元。  
- 7b. 建立加權平均庫存結轉交易財務收貨，作為財務結轉發貨交易的抵消。
  - 交易 3b 的結算數量為 1，結算金額為 20.67 美元。 此交易調整 4.67 美元，使 16.00 美元的原始值達到 20.67，這是該期間財務過帳交易的加權平均值。
  - 交易 7b. 的數量為 1，結算金額為 20.67 美元，抵消 3b。

下圖說明此系列的交易，以及使用加權平均庫存模型和匯總結算原則 (沒有 **包括實際成本** 選項) 的影響。

![包括實際成本的加權平均 SS。](media/weighted-average-summarized-settlement-with-include-physical-value.png)

**圖表要點**

- 庫存交易由垂直的箭頭表示。
- 實際交易由淺灰色的短箭頭表示。
- 財務交易由黑色的長箭頭表示。
- 庫存收貨依座標軸上方的垂直箭頭顯示。
- 庫存出貨依座標軸下方的垂直箭頭顯示。
- 每個新的接收貨發貨交易，都由新的標籤指定。
- 每個垂直箭頭都標有順序識別碼，例如 *1a*。 識別碼表示庫存交易在時間表上過帳的順序。
- 圖表中的每個日期都由一條黑色垂直的細線分隔。 日期在圖表底部註明。
- 庫存結算由紅色垂直虛線表示。
- 由庫存結算執行的結算作業，由紅色的虛線箭頭表示，方向從接受到發貨。

## <a name="weighted-average-with-marking"></a>具有標記的加權平均

標記是讓您將發貨交易與接收交易建立連結、標記的程序。 交易過帳之前或之後都可以進行標記。 當您希望在過帳交易或執行庫存結轉時確定庫存的確切成本時，可以使用標記。

例如，您的客戶服務部門接受了一位重要客戶的緊急訂單。 由於這是緊急訂單，所以您必須為此品項支付更多費用才能滿足客戶要求。 您必須確保此庫存品項的成本反映在此銷售訂單發票的利潤或銷售成本 (COGS) 中。

訂購單過帳時，庫存會收到 120.00 美金的成本。 例如，在過帳裝箱單或發票之前，將此銷售訂單單據標記到訂購單。 然後 COGS 將是 120.00 美元，而不是該品項的目前移動平均成本。 如果標記之前，銷售訂單裝箱單或發票已經過帳，則 COGS 將按移動平均成本價過帳。

執行庫存結轉之前，兩個交易仍可以互相標記。

將收貨交易標記為發貨交易。 然後系統會忽略品項模型群組中選擇的估價方法，且將這些交易相互結算。

您可以在交易過帳之前，將發貨交易標記到收貨。 您可以從 **銷售訂單詳細資料** 頁面上的銷售訂單行執行此作業。 未結收貨交易顯示在 **行銷** 頁面。

您可以在交易過帳後將發貨交易標記到收貨。 您可以針對已過帳庫存調整日記帳中的庫存品項，將出貨交易配對或標記到未結算的收貨交易。

下圖說明了以下交易：

- 1a. 數量 1 (單件成本為 10.00 美元) 的庫存實際收貨。
- 1b. 數量 1 (單件成本為 10.00 美元) 的庫存財務收貨。
- 2a. 數量 1 (單件成本為 20.00 美元) 的庫存實際收貨。
- 2b. 數量 1 (單件成本為 22.00 美元) 的庫存財務收貨。
- 3a. 數量 1 (單件成本價為 16.00 美元) 的庫存實際發貨 (財務過帳的交易的移動平均)。
- 3b. 數量 1 (單件成本價為 16.00 美元) 庫存財務發貨 (財務過帳的交易移動平均)。
- 3c. 3b 的庫存財務發貨將被標記為 2b 的庫存財務發貨。
- 4a. 數量 1 (單件成本為 25.00 美元) 的庫存實際收貨。
- 5a. 數量 1 (單件成本為 30.00 美元) 的庫存實際收貨。
- 5b. 數量 1 (單件成本為 30.00 美元) 的庫存財務收貨。
- 6a. 數量 1 (單件成本價為 23.00 美元) 的庫存實際發貨 (財務過帳的交易的移動平均)。
- 7\. 已執行庫存結轉。 根據使用加權平均方法的標記原則，將標記的交易相互結算。 在此範例中，3b 針對 2b 進行結算，並將 6.00 美元的調整過帳到 3b 以將值達到 22.00 美元。 在此範例中，沒有進行額外的結算，因為結轉僅為財務更新的交易建立結算。

下圖說明了此系列交易，以及所選具有標記的加權平均庫存模型的影像。

![具有標記的加權平均。](media/weighted-average-with-marking.png)

**圖表要點**

- 庫存交易由垂直的箭頭表示。
- 實際交易由淺灰色的短箭頭表示。
- 財務交易由黑色的長箭頭表示。
- 庫存收貨依座標軸上方的垂直箭頭顯示。
- 庫存出貨依座標軸下方的垂直箭頭顯示。
- 每個新的接收貨發貨交易，都由新的標籤指定。
- 每個垂直箭頭都標有順序識別碼，例如 *1a*。 識別碼表示庫存交易在時間表上過帳的順序。
- 圖表中的每個日期都由一條黑色垂直的細線分隔。 日期在圖表底部註明。
- 庫存結算由紅色垂直虛線表示。
- 由庫存結算執行的結算作業，由紅色的虛線箭頭表示，方向從接受到發貨。

[!INCLUDE[footer-include](../../includes/footer-banner.md)]
