---
title: 公式和公式版本
description: 本主題提供有關公式和公式版本的資訊。 公式定義了製程中特定程序的材料、成分和結果。 公式用於在製程中計劃和生產的產品。
author: johanhoffmann
ms.date: 09/12/2017
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: PlanActivity, ReqSupplyDemandSchedule, EcoResProductProdTypeFormulaNoActiveFormulaFormPart
audience: Application User
ms.reviewer: kamaybac
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Manufacturing
ms.author: johanho
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: ca7111811d14aaf0f6c8b814877897884e4cd76f
ms.sourcegitcommit: 3b87f042a7e97f72b5aa73bef186c5426b937fec
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/29/2021
ms.locfileid: "8448290"
---
# <a name="formulas-and-formula-versions"></a>公式和公式版本

[!include [banner](../includes/banner.md)]

公式定義了製程中特定程序的材料、成分和結果。 該公式會與對應的途程一起定義製程中的整個過程。 公式用於在製程中計劃和生產的產品。

公式由生產特定數量的公式項目所需的成分和數量組成。 根據您執行的工作，您可以從庫存和倉庫管理或產品資訊管理存取公式機能。

## <a name="formulas-and-formula-lines"></a>公式和公式明細
一個公式由一或多個公式明細組成，這些公式明細可識別構成公式的成分或項目。 公式明細可以包含物料清單 (BOM) 項目、公式項目、實秤重量項目、採購項目、聯產品，和副產品。 因為有許多項目會用於多個產品，所以一個項目可以用於多個公式中。

公式的一個範例是巧克力豆餅乾的公式。 此配方的成分使用了多個明細，例如麵粉、糖、雞蛋、奶油，和巧克力碎片。 巧克力豆餅乾的配方，包含可能用於其他配方的成分。 當您製作巧克力豆餅乾時，可能會留下殘餘物，例如碎屑，或者有些餅乾可能烤過頭或未烤熟。 根據生產作業，這些項目可以設定為聯產品或副產品。

建立公式明細時，您會使用明細類型來指示系統在您執行主計劃和生產批次訂單時應如何處理該明細。 每種明細類型都會產生不同的結果。 下表描述您可以選擇的明細類型。 

| 明細類型     | 描述  |
|---------------|--------------|
| 項目          | 在項目是從庫存中挑選的原物料或半成品，或者當項目是服務時，請選擇 **項目**。 |
| 虛擬件       | 當您想要展開公式明細中包含的任何較低等級的公式項目時，請選擇 **虛擬件**。 在您估算批次訂單並展開公式項目時，元件項目便會在批次訂單上作為公式明細列出。 此外，對應途程會被新增到生產途程中。 使用目前設定展開公式項目。 在您使用 **虛擬件** 明細類型時，您可以處理發生在不同公式等級的生產和測量設定。 如果您在 **已發布產品詳細資訊** 頁面的 **工程師** FastTab 中為產品選擇 **虛擬件**，然後在公式中使用該產品，則公式明細的明細類型將變更為 **虛擬件**。 您不能為實秤重量項目或生產類型為 **聯產品**、**副產品** 或 **計劃項目** 的項目選擇 **虛擬件**。 |
| 掛鉤供應 | 選擇 **掛鉤供應** 以為公式明細中包含的成分建立批次訂單、生產訂單、看板、轉移訂單，或訂購單。 相關訂單是根據預設訂單設定和成分的生產類型決定的，並在您估算批次訂單時建立。 為批次訂單保留所需的成分數量。 |
| 廠商        | 如果生產流程使用分包商，並且您希望為分包商建立從屬生產或訂購單，則選擇 **廠商**。 分包商執行的服務或工作必須使用公式項目或服務項目建立。 您可以將該項目作為公式明細連結到父系項目。 途程必須包含指派至分包商營運資源的作業。 此作業是透過使用 **作業編號** 連結至公式明細 欄位。 |

## <a name="formula-versions"></a>公式版本
建立新公式時，必須先建立公式版本，然後再新增公式明細項目及其特定特徵。 每個公式都必須至少有一個版本。 只有在成功儲存版本記錄後，公式版本上的 **已核准** 按鈕才會變成可用。 每個公式版本記錄都與您生產成品時可以生產的一或多種聯產品和副產品相關。 許多產品可以由相同成分，但以不同的批次大小、倍數或使用不同的產量製成。 您可以視需要任意建立多個公式版本。

如要管理多個使用中的公式版本，請使用有效日期範圍或「從」數量字段。 只有在日期範圍和「從」的數量不重疊時，才能存在多個有效公式版本。

與 BOM (一個 BOM 通常與多個 BOM 版本關聯) 不同的是，每個公式通常只存在一個公式版本。 請記住，為給定產品覆蓋範圍維度和數量啟動的公式版本只能有一個。 但由於其他因素，許多公式版本可能同時存在，您可以在建立批次訂單時手動進行選擇。

## <a name="approve-and-activate-formulas-and-formula-versions"></a>核准和啟用公式和公式版本
公式和公式版本必須經過核准才能用於計劃和生產。 公式通常會在使用前被啟用。 但是，在生產過程中，您可以選擇已核准但未啟用的公式版本。

為了幫助保護公式或公式版本，您可以設定 **生產控制參數** 頁面上的 **鎖定編輯** 和 **封鎖移除核准** 參數。

如果您選擇 **封鎖編輯** 且該公式被核准，則公式明細上的任何欄位都不能進行刪除或編輯。 但是，如果您移除對公式的核准，則您可以刪除和修改公式明細。 您還可以建立新公式和新公式版本。

如果您選擇 **封鎖移除核准**，您便不能移除對已核准公式或公式版本的核准。 但是，您可以建立新公式和新公式版本，並且可以移除公式版本的啟用。

您可以使用電子簽章功能新增更多等級的控制。 如果使用者已設定為在公式核准時需要電子簽章，則在啟用公式時會出現 **簽章** 頁面。 使用者必須透過授權方能進行電子簽章，並且必須成功驗證憑證後才能提交變更。 如果簽章無法驗證，則核准或移除核准會被拒絕，且啟動核准或移除核准的變更，將返回到原始狀態。

## <a name="use-the-scalable-feature"></a>使用可調整功能
只有在公式中的所有項目元件都設為 **變數耗用** 時，才能使用可調整功能。 如果項目元件設為 **固定耗用** 或 **逐步耗用**，則該功能不可使用。 使用可調整功能時，如果您更改公式中的一種成分，則您選擇的其他成分數量也會隨之調整。 公式的大小也會進行調整。 同樣，如果您更改公式大小，所有可調整成分的數量都會變更。 此功能適用於公式的建立和維護。 它並不表示在批次訂單中某種成分的數量是按比例增加或減少。

## <a name="use-step-consumption"></a>使用逐步耗用
逐步耗用消除了您必須在成分的 **公式明細** 索引標籤上必須輸入數量的需求。 相反的，逐步耗用會經過設定，以具備 **From series** 值和 **Quantity** 值。 已選擇滿足批次訂單上數量的每個系列逐步耗用記錄中的資訊。 當耗用率與批次訂單大小呈非線性關係時，逐步耗用便非常實用，並且僅在滿足特定數量閾值時才會增加需求。 若要為新公式啟用此功能，請在 **耗用計算** 群組，將適用成分的公式設定從 **標準** 變更為 **步驟**。 您會在 **公式明細** 頁面的 **設定** 索引標籤上指定此耗用方法。


[!INCLUDE[footer-include](../../includes/footer-banner.md)]