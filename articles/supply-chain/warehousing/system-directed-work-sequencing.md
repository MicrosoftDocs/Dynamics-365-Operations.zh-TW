---
title: 系統導向工作排序
description: 本主題提供有關系統導向工作排序的資訊。 此功能用於對系統提供給使用者執行的工單排序和篩選。 在需要其他準則來推動倉庫揀料流程的情況下，它很有幫助。
author: Mirzaab
ms.date: 07/03/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: WHSRFSystemDirectedWorkSequenceQuery, WHSLocDirTable
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2020-07-03
ms.dyn365.ops.version: 10.0.7
ms.openlocfilehash: b433787f330de3634c59f7b1b2babfe07e3bdf09
ms.sourcegitcommit: 3b87f042a7e97f72b5aa73bef186c5426b937fec
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/29/2021
ms.locfileid: "8449046"
---
# <a name="system-directed-work-sequencing"></a>系統導向工作排序

[!include [banner](../includes/banner.md)]

系統導向工作排序功能用於對系統提供給使用者執行的工作訂單排序和篩選。 在需要其他準則 (例如運輸時間、揀料區、位置設定檔或各種標準的組合) 來推動倉庫揀料流程的情況下，這會很有幫助。

此功能透過新增系統導向查詢訂單擴展了目前的系統導向揀料功能，使用者可以在其中設定序列和一個或多個查詢，以評估所有建立的工單。 將僅擷取和呈現滿足在行動裝置功能表項目設定中指定準則的工單。

因此，可透過此功能基於特定技能集、揀料裝置或其他要求進一步最佳化倉庫揀料流程，因為其可識別滿足指定條件的工單，將其指派給正確的行動裝置功能表項目，然後將其提供給工作人員。

> [!NOTE]
> 如果需要不同的標準，則必須使用多個行動裝置功能表項目。

## <a name="turn-on-the-organization-wide-system-directed-work-sequencing-feature"></a>開啟組織範圍的系統導向工作排序功能

必須先在系統中打開系統導向工作排序功能，才能使用該功能。 管理員可以使用[功能管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)工作區來檢查該功能的狀態，並視需要開啟該功能。 在那裡，該功能按以下方式列出：

- **模組：***倉庫管理*
- **功能名稱：***組織範圍內的系統導向工作排序*

## <a name="setup"></a>設定

### <a name="make-demo-data-available"></a>設定示範資料為可用

若要使用本主題中提供的值完成此案例，您必須使用一個已安裝標準示範資料的系統。 此外您必須選擇 **USMF** 法律實體。 此案例使用示範資料中的倉庫 *51*。

> [!IMPORTANT]
> 在將訂單發貨到倉庫之前，請確保揀貨位置有足夠的庫存可供應訂單上的所有品項。
>
> 預設 USMF 資料應該會支援此案例。 如果不使用示範資料，請檢閱 **位置指令** 設定來確定哪些揀貨位置用於銷售訂單揀貨。 如果您必須調整庫存、建立手動移動、使用補貨，或使用任何其他流程。

### <a name="set-up-a-mobile-device-menu-item"></a>設定行動裝置功能表項目

1. 移至 **Warehouse Management\>設定\>行動裝置\>行動裝置功能表項目**。
1. 在行動裝置功能表項目清單中，選擇 **銷售揀料 - 系統**。 所需的功能表項應該已經存在。 
1. 確認以下設定：

    - 在 **一般** FastTab 上，將 **導向方式** 欄位應設定為 *系統導向*。
    - **工作案例** FastTab 應顯示以下設定。

        | 工作類別識別碼 | 工單類型 |
        |---|---|
        | 銷售 | 銷售訂單 |
        | SO 揀料 | 銷售訂單 |

1. 在動作窗格上，選擇 **系統導向工作序列查詢**。
1. 選擇 **編輯**。
1. 刪除現有行，然後選擇 **是** 以確認動作。
1. 在動作窗格上，選擇 **新增** 建立行。
1. 在新的明細上，設定以下值：

    - **序號：***1*
    - **描述欄位：***工作數量小於 20 且以遞減排序*

1. 選取 **儲存**。
1. 在動作窗格上，選擇 **編輯查詢**。
1. 在 **聯結** 索引標籤，展開聯結階層以顯示 **工作行** 資料表。
1. 選擇 **工作行** 資料表聯結。
1. 選取 **新增資料表聯結**。
1. 在顯示的清單中，找到並選擇具有以下設定的行：

    - **聯結模式：***n:1*
    - **關係：***位置 (位置)*

1. 選擇 **選取**。

    將位置新增到資料表聯結中。

1. 在 **排序** 索引標籤選取 **新增** 以新增行。
1. 在新的明細上，設定以下值：

    - **資料表：***工作行*
    - **衍生資料表：***工作行*
    - **欄位：***工作數量* (在顯示的訊息方塊中，選擇 **是** 為該欄位新增排序。)
    - **搜尋方向：***遞減*

1. 選取 **範圍** 索引標籤。

    如果先後順序中應僅包含特定各種準則，可以在 **範圍** 索引標籤中指定。在此範例中，只需包含數量少於 20 個 (最低測量單位) 的工作。

    請注意，已包含一些行。 不應刪除這些行。

1. 選取 **新增** 以新增行。
1. 在新的明細上，設定以下值：

    - **資料表：***工作行*
    - **衍生資料表：***工作行*
    - **欄位：***庫存工作數量*
    - **標準：***\< 20* (低於 20)

1. 選取 **新增** 以新增其他行。
1. 在新的明細上，設定以下值：

    - **資料表：***工作行*
    - **衍生資料表：***工作行*
    - **欄位：***工作類型*
    - **標準：***揀料*

1. 選取 **新增** 以新增其他行。
1. 在新的明細上，設定以下值：

    - **資料表：***位置*
    - **衍生資料表：***位置*
    - **欄位：***位置設定檔識別碼*
    - **準則：***!STAGE*

        > [!IMPORTANT]
        > 務必在 *STAGE* 前包含驚嘆號 (*!*)。

1. 選擇 **確定** 以儲存並關閉查詢。
1. 選取 **儲存**。
1. 關閉頁面返回 **行動裝置功能表項目** 頁面。

> [!NOTE]
> 此步驟定義將用於向行動裝置功能表項目提供符合資格的工作的準則 如果您在查詢中新增更多準則行，系統將優先使用序號最小的查詢行。 換句話說，序號 1 的所有符合條件的工作將優先提供給使用者，然後是序號 2 的所有工作。 因此，如果必須同時使用特定範圍和排序，則應在同一系統導向工作序列查詢中指定它們。
>
> 此設定將擷取至少有一行，且該行中數量小於 20 個的所有工作。 因此，如果工作有一行數量恰好是 20 個或超過 20 個，則該工作有效，前提是它還至少有一個數量小於 20 個的行。

### <a name="location-directives"></a>位置指令

如果您使用預設 Contoso 資料，則不需要更改位置指令動作的查詢。 但是，為了確保在非 Contoso 環境中套用該功能時，位置指令將擷取銷售訂單上的品項，請建立一個新的位置指令。 若要驗證示範環境中的設定，請執行以下步驟。

1. 移至 **Warehouse Management** \> **設定** \> **位置指令**。
1. 在 **工單類型** 欄位中，選取 *銷售訂單*。
1. 選擇名為 *51 Pick* 的位置指令。
1. 在 **位置指令動作** FastTab 中，選取 **揀料** 動作的行。
1. 選擇格線上方的 **編輯查詢**。
1. 檢閱 **範圍** 查詢。

    1. 找到 **欄位** 欄位設定為 *位置* 的行。
    2. 確保 **準則** 欄位為空白 (即不限制)。

## <a name="scenario"></a>案例

### <a name="create-sales-order-picking-work"></a>建立銷售訂單揀料工作

在執行系統導向揀料之前，應建立一些出庫工作。 對於此案例，將建立四個根據指定系統導向工作序列查詢的銷售訂單。

您將為每個銷售訂單預留庫存數量。 因此，除非取消庫存保留或部分庫存保留，否則無法從倉庫中為其他訂單提取預留庫存。

然後，將每個銷售訂單下達到倉庫以建立出庫工作。

#### <a name="sales-order-1"></a>銷售訂單 1

1. 前往 **銷售和行銷\>銷售訂單\>所有銷售訂單**。
1. 在動作窗格上，選擇 **新增** 以建立銷售訂單 1。
1. 在 **建立銷售訂單** 對話方塊中，設定以下值：

    - 在 **客戶** 區段中，將 **客戶帳戶** 欄位設定為 *US-004*。
    - 在 **一般** 區段中，將 **倉庫** 欄位設為 *51*。

1. 選擇 **確定** 關閉對話方塊。 記下銷售訂單編號。
1. 在新銷售訂單中新增一行，並設定以下值：

    - **品項編號：***M9200*
    - **數量：***20*

1. 在網格上方的 **庫存** 功能表上，選擇 **保留**。
1. 在 **預留** 頁面上，選擇 **預留批次** 預留庫存。
1. 關閉該 **保留** 頁面。
1. 在動作窗格的 **倉庫** 索引標籤上，並選擇 **發佈到倉庫** 為倉庫建立工作。

    您會收到顯示已為銷售訂單建立波次識別碼和裝運識別碼的通知訊息。

#### <a name="sales-order-2"></a>銷售訂單 2

1. 在動作窗格上，選擇 **新增** 以建立銷售訂單 2。
1. 在 **建立銷售訂單** 對話方塊中，設定以下值：

    - **客戶帳戶：***US-007*
    - **倉庫：***51*

1. 選擇 **確定** 關閉對話方塊。 記下銷售訂單編號。
1. 在新銷售訂單中新增一行，並設定以下值：

    - **品項編號：***M9200*
    - **數量：***5*

1. 選取 **新增明細** 以新增第二個明細，並設定以下值：

    - **品項編號：***M9201*
    - **數量：***1*

1. 為兩個行預留庫存。
1. 將訂單下達到倉庫。

#### <a name="sales-order-3"></a>銷售訂單 3

1. 在動作窗格上，選擇 **新增** 以建立銷售訂單 3。
1. 在 **建立銷售訂單** 對話方塊中，設定以下值：

    - **客戶帳戶：***US-009*
    - **倉庫：***51*

1. 選擇 **確定** 關閉對話方塊。 記下銷售訂單編號。
1. 在新銷售訂單中新增一行，並設定以下值：

    - **品項編號：***M9200*
    - **數量：***7*

1. 選取 **新增明細** 以新增第二個明細，並設定以下值：

    - **品項編號：***M9202*
    - **數量：***8*

1. 為兩個行預留庫存。
1. 將訂單下達到倉庫。

#### <a name="sales-order-4"></a>銷售訂單 4

1. 在動作窗格上，選擇 **新增** 以建立銷售訂單 4。
1. 在 **建立銷售訂單** 對話方塊中，設定以下值：

    - **客戶帳戶：***US-010*
    - **倉庫：***51*

1. 選擇 **確定** 關閉對話方塊。 記下銷售訂單編號。
1. 在新銷售訂單中新增一行，並設定以下值：

    - **品項編號：***M9200*
    - **數量：***25*

1. 選取 **新增明細** 以新增第二個明細，並設定以下值：

    - **品項編號：***M9202*
    - **數量：***10*

1. 為兩個行預留庫存。
1. 將訂單下達到倉庫。

### <a name="get-work-ids-for-the-work-that-was-created"></a>取得已建立工作的工作識別碼

1. 移至 **Warehouse Management\>工作\>工作詳細資料**。
1. 篩選 **倉庫** 欄位，以便僅顯示倉庫 *51* 的工作。
1. 應該已經建立了四個工作識別碼。 記下每個銷售訂單的工作識別碼。

    | 銷售訂單識別碼 | 工作識別碼 | 工作數量 |
    |---|---|---|
    | 銷售訂單 1 | 工作識別碼 1 | 20 個 |
    | 銷售訂單 2 | 工作識別碼 2 | 6 個 (兩行的總和) |
    | 銷售訂單 3 | 工作識別碼 3 | 15 個 (兩行的總和) |
    | 銷售訂單 4 | 工作識別碼 4 | 35 個 (兩條線的總和) |

在行動裝置上執行流程之前，請確保對於倉庫 *51* 和 *銷售訂單* 工作訂單類型，只有剛才建立的工作的狀態才是 *未結*。 否則，測試的結果可能會有所不同，因為系統導向揀料中將包含所有符合條件的工作。

1. 移至 **倉庫管理 \> 工作 \> 出庫 \> 未結銷售工作**。
1. 在 **未結銷售工作** 格線中，篩選 **倉庫** 欄位，以便僅顯示倉庫 *51* 的工作。
1. 確認僅顯示您之前建立的四個工作識別碼。
1. 關閉 **工作** 頁面。

### <a name="mobile-device-flow-execution"></a>執行行動裝置流程

根據設定，系統將按照設定提供從最高工作行數量到最低排序的使用者工作。 每行的數量將少於 20 個。

請注意，此設定將擷取至少有一行，且該行中數量小於 20 個的所有工作。 因此，如果工作有另一行數量正好是 20 個 或超過 20 個，該行也將有效。

#### <a name="mobile-app"></a>行動應用程式

1. 以倉庫 *51* 使用者身分登入倉庫應用程式。
1. 移至 **出庫 \> 銷售揀貨 - 系統**。

    將提供工作識別碼 *4* 的領料步驟。 先提供此工作識別碼是因為系統導向查詢訂單的設定，在此設定中，應該根據遞減工作行數量為工作排序。

1. 完成所需的揀料和放置以關閉工作識別碼。

    接下來，將提供工作識別碼 *3*。 根據工作行數量，其中一個工作行在序列中是下一個。

1. 完成所揀料和放置以關閉工作識別碼。

    接下來，將提供工作識別碼 *2*。 此工作的揀料行是序列中的下一個。

1. 完成所揀料和放置以關閉工作識別碼。

    不應再向您提供任何工作。 工作識別碼 *1* 不符合此行動裝置功能表項目的條件，因為查詢指定僅當工作行上的數量小於 20 個時，才考慮工作標題。

## <a name="tips"></a>提示

系統導向工作序列查詢為 *包含*。 對於某些設定，記住這一點很重要。 例如，您希望特定功能表項目僅處理工作單位為 *個* 的工作，並且在查詢的 **範圍** 索引標籤中指定該限制。 在這種情況下，將向工作人員提供至少有一個工作行的工作單位設為 *個* 的所有工作。 因此，此工作還包括其工作行的工作單位不是 *個* (如 *箱* 或 *托盤*) 的工作。 該查詢將僅排除沒有工作行的工作單位設定為 *個* 的工作。

因此，在此案例的範例中，查詢也擷取了工作識別碼 *4*。 建立時，新增了兩行：一行為 25 個，另一行為 10 個。 仍會將此工作提供給使用者，因為至少有一個工作行的數量少於 20 個。

根據具體情況，您可以透過使用工作分解來防止這種行為。


[!INCLUDE[footer-include](../../includes/footer-banner.md)]