---
title: 小型包裹運輸
description: 本主題介紹有關小型包裹運輸 (SPS) 功能的資訊。 此功能可讓 Microsoft Dynamics 365 Supply Chain Management 向承運人提交有關已裝箱集裝箱的詳細資料，然後從該承運人處接收出貨標籤、運費和追蹤編號。
author: Mirzaab
ms.date: 01/08/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: TMSRateEngine, TMSCarrier, CustTable, TMSShippingCarrierCustomerAccount, TMSSmallParcelShippingFeature
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2021-01-08
ms.dyn365.ops.version: 10.0.16
ms.openlocfilehash: cb5a4195d94750fcbee00e7301bd250f653cb347
ms.sourcegitcommit: 3b87f042a7e97f72b5aa73bef186c5426b937fec
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/29/2021
ms.locfileid: "8448872"
---
# <a name="small-parcel-shipping"></a>小型包裹運輸

[!include [banner](../../includes/banner.md)]

小型包裹運輸 (SPS) 功能提供透過承運人 API 進行通訊的框架，以此讓 Microsoft Dynamics 365 Supply Chain Management 可直接與承運人互動。 當您透過商業裝運承運人而不是使用集裝箱裝運或零擔 (LTL) 裝運來運輸個別銷售訂單時，此功能非常有用。

SPS 功能透過專用的 *費率引擎* 您的裝運承運人互動。 您的組織必須與您的承運人或承運人中樞服務合作開發此費率引擎。 費率引擎可讓 Supply Chain Management 向承運人提交有關已裝箱集裝箱的詳細資料，然後從該承運人處接收出貨標籤、運費和追蹤編號。

返回的運費將作為雜項費用新增到關聯的銷售訂單中。 然後可以使用 Zebra 程式設計語言 (ZPL) 印表機自動列印退回的出貨標籤，並在裝運時使用。 承運人在您的倉庫領取包裹時會掃描此出輸標籤。

## <a name="prepare-your-system-to-support-sps"></a>準備系統以支援 SPS

您必須先在 [功能管理] 中打開 SPS 功能，新增費率引擎，並設定 **運輸管理** 和 **倉庫管理** 模組來支援它，才能開始使用 SPS 功能。

### <a name="turn-on-the-sps-feature"></a>開啟 SPS 功能

使用 SPS 功能之前，您必須先在系統中開啟。 管理員可以使用[功能管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)工作區來檢查該功能的狀態，並視需要開啟該功能。 在那裡，該功能按以下方式列出：

- **模組：***運輸管理*
- **功能名稱：***小型包裹裝運*

### <a name="deploy-and-set-up-rate-engines"></a>部署和設定新增費率引擎

Supply Chain Management 不包括任何費率引擎。 您必須取得或建立所需的費率引擎，然後將其新增到系統中。 但是，Microsoft 提供了可用於測試的示範費率引擎。

#### <a name="download-and-deploy-the-demo-rate-engine"></a>下載並部署示範費率引擎

按照以下步驟取得示範費率引擎。

1. 在 GitHub 上，下載[用於示範費率引擎的動態連接庫 (DLL)](https://github.com/microsoft/Dynamics-365-FastTrack-Implementation-Assets/tree/master/SCM/SPS)。
1. 在 Supply Chain Management 伺服器上，將 DLL 儲存在 **\\AOSService\\PackagesLocalDirectory\\ApplicationSuite\\bin** 資料夾中。

#### <a name="create-and-deploy-functional-rate-engines"></a>建立和部署功能費率引擎

有關如何建立和部署功能費率引擎以在生產或測試環境中使用的資訊，請參閱以下主題：

- [建立新的運輸管理引擎](../transportation/create-new-transportation-management-engine.md)
- [建立運輸管理引擎](/dynamicsax-2012/appuser-itpro/set-up-transportation-management-engines)

有關如何建立 SPS 費率引擎的更多資訊，請參閱以下部落格文章：[小型包裹運輸：如何利用 Microsoft Dynamics 365 中的小型包裹裝運功能](https://hub.bhsolutions.com/creating-a-mock-parcel-engine-in-d365?submissionGuid=46a1fccf-80b0-4b70-a6a0-4bf45a8756b5)。

#### <a name="set-up-a-rate-engine-in-supply-chain-management"></a>在 Supply Chain Management 中設定費率引擎

為 SPS 建立和部署費率引擎後，請按照以下步驟進行設定。

1. 移至 **運輸管理 \> 設定 \> 引擎 \> 費率引擎**。
1. 在動作窗格上選取 **新增**，將資料列新增至格線。
1. 在新資料列中，設定以下欄位：

    - **費率引擎** – 輸入費率引擎的唯一名稱。 如果您使用的是示範費率引擎，請輸入 *示範費率引擎*。
    - **名稱** – 輸入費率引擎的簡短描述。 如果您使用的是示範費率引擎，請輸入 *示範費率引擎*。
    - **評等中繼資料識別碼** – 選擇應用於計算您費率的基礎。 例如，您的費率可能是根據距離計算的。 如果您使用的是示範費率引擎，則可以將此欄位保留空白。
    - **引擎組件** – 輸入您部署的 DLL 封裝的檔案名稱。 如果您使用的是示範費率引擎，請輸入 *TMSSmallParcelShippingEngine.dll*。
    - **引擎類別** – 輸入為您的費率引擎建立的類別名稱。 如果您使用的是示範費率引擎，請輸入 *TMSSmallParcelShippingEngine.SmallParcelShippingRateEngine*。

## <a name="example-scenario"></a>範例案例

此範例案例介紹在您按照本主題前面所述準備好系統後如何設定新增和使用 SPS。 此方案使用先前提到的示範費率引擎。

### <a name="make-demo-data-available"></a>設定示範資料為可用

若要使用此處指定的示範記錄和值完成此案例，您必須使用一個已安裝標準[示範資料](../../fin-ops-core/dev-itpro/deployment/deploy-demo-environment.md)的系統。 此外在開始之前，您必須先選擇 **USMF** 法律實體。

### <a name="set-up-the-scenario"></a>設定案例

對於此範例案例，您必須具有示範承運人、承運人群組、裝箱原則和裝箱設定檔。 以下小節說明瞭如何準備範例所需的記錄。 在生產案例中，設定新增流程通常類似於此處描述的流程。 但是，您將設定不同的值。

#### <a name="set-up-carriers"></a>設定承運人

請按照以下步驟設定承運人

1. 移至 **運輸管理 \> 設定 \> 承運人 \> 裝運承運人**。
1. 在 [動作窗格] 上，選擇 **新增** 以建立承運人。
1. 在標題中，設定以下值：

    - **裝運承運人**：*示範承運人*
    - **名稱：***示範承運人*
    - **模式：***陸運*

1. 在 **概觀** FastTab上，設定以下值：

    - **啟用裝運承運人：***是*
    - **啟用承運人：***是*

1. 在 **服務** FastTab 上選擇 **新增**，以在格線中新增服務。
1. 為新服務設定以下值：

    - **承運人服務：***示範承運人服務*
    - **名稱：***示範承運人服務*
    - **運輸方式：***陸運*

    根據需要為所有其他欄位輸入任意值。 (當您儲存新的承運人記錄時，將建立新的交貨方式，**交貨方式** 欄位將自動設定。)

1. 在 **評等設定檔** FastTab，選擇 **新增** 以將評等設定檔新增到格線。
1. 為新設定檔設定以下值：

    - **評等設定檔：***示範承運人服務*
    - **名稱：***示範承運人服務*
    - **費率引擎：***示範費率引擎*

    根據需要為所有其他欄位輸入任意值。

1. 在動作窗格上，選擇 **儲存**。

更多有關設定承運人的資訊，請參閱[設定裝運承運人](../transportation/tasks/set-up-shipping-carriers.md)。

#### <a name="set-up-carrier-service-accounts"></a>設定承運人服務帳戶

請按照以下步驟設定承運人服務帳戶。

1. 請移至 **運輸管理 \> 設定 \> 評等 \> 承運人服務帳戶**。
1. 在動作窗格上選取 **新增**，以新增承運人服務帳戶。
1. 為新帳戶設定以下值：

    - **裝運承運人**：*示範承運人*
    - **承運人服務：***示範承運人服務*
    - **承運人客戶帳號：** 用於驗證和與運輸承運人連接的承運人客戶帳號。 您的承運人會提供此值。 如果您使用的是示範服務，可以輸入任意值。
    - **站點：***6*
    - **倉庫：***62*

    > [!NOTE]
    > 通常，**承運人客戶帳號** 值是對連線進行身份驗證所需的唯一值。 但是，如果您的承運人需要額外的身份驗證參數，您的組織應自訂此頁面以新增適當的額外欄位。

#### <a name="set-up-a-container-packing-policy"></a>設定集裝箱裝箱原則

請按照以下步驟設定集裝箱裝箱原則。

1. 如果尚未設定 ZPL 印表機定義，請使用 Document Routing Agent 應用程式進行設定。 有關詳細資訊，請參閱[文件列印概觀](../../fin-ops-core/dev-itpro/analytics/print-documents.md)及相關主題。
1. 移至 **倉庫管理 \> 設定 \> 集裝箱 \> 集裝箱裝箱原則**。
1. 在動作窗格上選取 **新增**，以新增集裝箱裝箱原則。
1. 在新原則的標頭中，設定以下值：

    - **集裝箱裝箱原則：***示範裝箱原則*
    - **描述** – 原則的說明

1. 在 **概觀** FastTab上，設定以下值：

    - **倉庫：***62*
    - **最終裝運的預設位置：***艙門*
    - **重量單位：***公斤*
    - **容器關閉原則：** *自動發佈*
    - **集裝箱發放原則：***發往最終裝運地點*

1. 在 **集裝箱資訊清單** FastTab 上，設定以下值：

    - **集裝箱關閉時自動顯示資訊清單：***是*
    - **集裝箱的清單要求：***運輸管理*
    - **列印集裝箱內容：***否*

1. 在 **集裝箱標籤列印** FastTab 上，設定以下值：

    - **列印集裝箱出貨標籤：***永遠*
    - **印表機名稱：** 應列印出貨標籤的 ZPL 印表機名稱

#### <a name="set-up-a-packing-profile"></a>設定裝箱設定檔

請按照以下步驟設定裝箱設定檔。

1. 移至 **倉庫管理 \> 設定 \> 裝箱 \> 裝箱設定檔**。
1. 在動作窗格上選取 **新增**，將裝箱設定檔新增至格線。
1. 為新設定檔設定以下值：

    - **裝箱設定檔識別碼：***示範裝箱設定檔*
    - **描述** – 設定檔的說明
    - **集裝箱裝箱原則：***示範裝箱原則*
    - **容器識別碼模式：** *自動*
    - **集裝箱類型：***小箱*

#### <a name="set-up-a-customer-to-use-the-sps-carrier"></a>設定客戶以使用 SPS 承運人

按照以下步驟設定客戶，使其可以使用您建立的承運人。

1. 移至 **應收帳款\>客戶\>所有客戶**。
1. 在格線中，找到並選取客戶 *US-027*。
1. 在動作窗格的 **一般** 索引標籤，在 **設定** 群組中選取 **承運人客戶帳戶**。
1. 在 **承運人客戶帳戶** 頁面的動作窗格上，選擇 **新增** 將帳戶新增到格線。
1. 為新帳戶設定以下值：

    - **裝運承運人**：*示範承運人*
    - **承運人客戶帳號：***12345* (在此案例中該值不重要，但將在下一節中提及。)

### <a name="go-through-the-example-scenario"></a>瀏覽範例案例

按照上一節所述設定所有範例資料後，就可以開始瀏覽範例案例了。

#### <a name="create-a-sales-order-and-process-the-work"></a>建立銷售訂單並處理工作

請按照以下步驟建立銷售訂單。

1. 前往 **銷售和行銷\>銷售訂單\>所有銷售訂單**。
1. 選擇 **新增** 建立銷售訂單。
1. 在 **建立銷售訂單** 對話方塊，將 **客戶帳戶** 欄位設定為 *US-027*.
1. 選擇 **確定** 以建立銷售訂單並關閉對話方塊。
1. 此新的銷售訂單已開啟。 在 **銷售訂單標題** FastTab 中，將 **承運人客戶帳號** 欄位設定為您先前為此客戶選擇的值 (*12345*)。
1. 在 **銷售訂單行** 區段中新增銷售行，並為該行設定以下值：

    - **品項編號：***A0002*
    - **數量：***1*
    - **站點：***6*
    - **倉庫：***62*

1. 切換到 **標頭** 檢視。
1. 在 **交貨** FastTab 上，設定以下值：

    - **裝運承運人**：*示範承運人*
    - **承運人服務：***示範承運人服務*

1. 切換到 **行項** 檢視。 如果系統提示您更新銷售行的交貨方式，請選擇 **是**。
1. 在 **銷售訂單行** 區段，選擇您先前設定的訂單行，然後選擇 **存貨 \> 預留**。
1. 在 **保留** 頁面，選擇 **預約批號**，在倉庫中保留所選行的全部數量。
1. 關閉 **保留** 頁面，返回銷售訂單。
1. 在動作窗格上，於 **倉庫** 索引標籤，選擇 **發佈到倉庫**。

    將建立工作以將品項從揀料位置移動到裝箱工作站。

1. 在 **銷售訂單行** 區段上選擇 **倉庫 \> 裝運詳細資料**。
1. 在 **裝運詳細資料** 頁面，記下裝運識別碼。 在裝箱工作站為裝運裝箱貨物時，您將需要它。
1. 關閉 **裝運詳細資料** 頁面，返回銷售訂單。
1. 記下銷售訂單編號，然後移至 **倉庫管理 \> 工作 \> 所有工作**。
1. 使用銷售訂單編號查詢並選擇為訂單建立的工作。
1. 在動作窗格的 **工作** 索引標籤上，選擇 **完成工作**。
1. 在 **工作完成** 頁面的 **使用者識別碼** 欄位，選擇使用者識別碼。 然後在動作窗格選擇 **驗證工單**。
1. 如果工作通過驗證，則在動作窗格上選擇 **完成工作**。

    該工作被標記為已完成，以模擬將品項移到裝箱工作站。

#### <a name="pack-the-shipment"></a>裝運裝箱

請按照以下步驟為裝運裝箱。

1. 移至 **倉庫管理 \> 設定 \> 工作人員**，並確保您的使用者帳戶與倉庫管理的工作人員帳戶相關聯。
1. 移至 **倉庫管理 \> 揀料和集裝箱化 \> 裝箱**。
1. 在 **選取裝箱工作站** 對話方塊中，設定以下值：

    - **站點：***6*
    - **倉庫：***62*
    - **位置：***裝箱*
    - **裝箱設定檔識別碼：***示範裝箱設定檔*

1. 選取 **確定**。
1. **裝箱** 頁面隨即顯示。 在生產案例中，工作人員將掃描牌照或裝運識別碼。 但在此案例中，請打開 **所有裝運** 頁面，然後尋找您剛剛建立之裝運的裝運編號。 然後在 **裝箱** 頁面的 **牌照或裝運** 欄位輸入此值。 或者，輸入您先前記下的裝運識別碼。
1. 在動作窗格上，選擇 **新建容器**。
1. 出現的對話方塊會顯示新集裝箱的詳細資料。 保留預設值，然後選擇 **確定**。
1. 在 **裝箱** 頁面的 **品項裝箱** FastTab，在 **識別碼** 欄位選擇 *A0002* 以裝箱該品項。 該品項會新增到集裝箱中。
1. 在動作窗格上，選擇 **裝運集裝箱**。

    出現的 **裝運集裝箱** 頁面中有您剛剛建立的集裝箱資料列。 但是該資料列中的 **集裝箱資訊清單識別碼** 欄位目前為空白，因為您尚未從承運人處收到出貨標籤和追蹤編號。

1. 在動作窗格上，選擇 **關閉容器**。
1. 在 **關閉集裝箱** 對話方塊上，將 **總重量** 欄位設定為 *1 公斤*，然後選擇 **確定**。

    現在應該在您先前選擇的 ZPL 印表機上列印出貨標籤。 其應該會類似於以下範例。

    ![出貨標籤範例。](media/sps-label-example.png "出貨標籤範例")

1. 請注意，**集裝箱資訊清單識別碼** 和 **總運費** 值已新增從承運人處收到的值。


[!INCLUDE[footer-include](../../includes/footer-banner.md)]