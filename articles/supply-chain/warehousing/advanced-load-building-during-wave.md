---
title: 波次中的進階負載組建
description: 本主題提供有關進階波次負載組建的資訊，它會在波次執行期間自動將貨件分配給現有波次。 因此，您可以建立代表卡車的有意義負載，且無需使用負載規劃工作台。
author: mirzaab
ms.date: 07/01/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: WHSPostMethod,WHSWaveTemplateTable,WHSLoadMixGroup,WHSLoadBuildTemplate, WHSWaveTableListPage, TMSLoadBuildTemplateApply, TMSLoadBuildTemplates, TMSLoadBuildTemplateCreate
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2020-07-01
ms.dyn365.ops.version: 10.0.9
ms.openlocfilehash: 08e44b4e37f28ec91eeb8e53930de5133607bd66
ms.sourcegitcommit: 3b87f042a7e97f72b5aa73bef186c5426b937fec
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/29/2021
ms.locfileid: "8448746"
---
# <a name="advanced-load-building-during-wave"></a>波次中的進階負載組建

[!include [banner](../includes/banner.md)]

進階波次負載組建會在波次執行期間自動將貨件分配給現有波次。 因此，您可以建立代表卡車的有意義負載，且無需使用負載規劃工作台。 此功能對於不想每天都要手動建立負載，但希望使用負載概念來追蹤並規劃卡車/聯結車中的貨物運送的企業非常有用。

在波次處理期間，系統通常會為每個未指派負載的裝運建立一個新負載。 但是，當打開進階波次負載組建時，系統會將每個未分配的貨件分配給現有負載 (如果存在適當的負載)，且僅在需要時建立新的負載。 進階波次負載組建會根據定義的標準自動建立新負載。

若要使用此項功能，必須按以下方式設定系統：

- 建立 *波次範本*，其中包括新增 **buildLoads** 方法。 此方法令進階波次組建可用於使用這些範本的波次。
- 設定 *負載組建範本*，將每個都連結到特定的波次範本和方法。 負載組建範本控制明細在波次中的負載 (現有的或新的) 會被新增哪些負載。 您可以根據負載範本、設備和負載明細的的其他欄位值等標準合併或分離貨件。
- 定義 *負載混合群組* 控制哪些品項應該或不應該在單次負載中組合。 您還可以指定限制是否應產生警告或錯誤，以及是否應評估負載範本的體積限制。

## <a name="turn-on-advanced-wave-load-building-in-your-system"></a>在系統中打開進階波次負載組建

在使用進階負載組建前，必須先在系統中開啟兩個功能。 管理員可以使用[功能管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)設定，來檢查這些功能的狀態並在需要時將其打開。 在 **功能管理** 工作區，功能會依以下方式列出：

- 波次負載組建功能：

    - **模組：** *Warehouse Management*
    - **功能名稱：** *波次負載組建功能*

- 組織範圍的波次步驟代碼：

    - **模組：** *Warehouse Management*
    - **功能名稱：** *組織範圍的波次步驟代碼*

### <a name="make-sample-data-available"></a>設定樣本資料為可用

要使用此處指定的範例記錄和值完成此示範，您必須使用一個已安裝[示範資料](../../fin-ops-core/dev-itpro/deployment/deploy-demo-environment.md)的系統。 此外在開始之前，您必須先選擇 **USMF** 法律實體。

在生產系統上工作時，您還可以將此示範當作使用此功能的指南。 但是，在此情況下，您必須替換為自己的值，並且您可能會缺少標準示範資料提供的某些類型的必需記錄。

### <a name="make-sure-that-the-scenario-setup-includes-enough-available-inventory"></a>確保案例中設定足夠的可用庫存

如果您正在使用 **USMF** 示範資料，您必須首先確保您的系統已設定完成，以便在每個相關位置都有足夠的庫存。 在此示範，倉庫 *62* 中需有以下庫存：

- **品項 A0001：** 10 個
- **品項 A0002：** 10 個
- **品項 M9200：** 各 10 個

品項 **M9200** 必須已新增到倉庫。 完成以下小節中的過程以新增品項庫存。

#### <a name="create-a-new-license-plate-id"></a>建立新的牌照識別碼

1. 移至 **Warehouse Management**\>**設定**\>**倉庫**\>**牌照**。
1. 在動作窗格上，選擇 **新增**。
1. 在新資料列中，在 **牌照** 欄位，輸入 *LP6203*。
1. 請選取 **儲存**。

#### <a name="create-a-standard-cost-for-item-m9200-in-site-6"></a>在站點 6 中為品項 M9200 建立標準成本

1. 請前往 **產品資訊管理**\>**產品**\>**已發佈的產品**。
1. 搜尋 **M9200**。
1. 請選取品項所在的資料列，然後在動作窗格上的 **管理成本** 索引標籤，到 **設定** 群組中，請選取 **品項價格**。
1. 在 **品項價格** 頁面，選取 **待定價格** 索引標籤。
1. 在動作窗格上，選擇 **新增**。
1. 在新的明細上，設定以下值：

    - **成本類型：** *計畫成本*
    - **價格類型：** *成本*
    - **版本：** *10*
    - **站點：** *6*
    - **價格：** *1.60*

1. 在動作窗格上，選擇 **儲存**。
1. 在動作窗格上，選擇 **啟用待定價格**。
1. 選取 **有效價格** 索引標籤，以驗證站點 *6* 的新成本價已新增。

#### <a name="create-inventory-in-warehouse-62"></a>在倉庫 62 中建立庫存

1. 去 **庫存管理**\>**日記帳輸入**\>**品項**\>**庫存調整**.
1. 在動作窗格上，選擇 **新增**。
1. 在 **建立庫存日記帳** 對話方塊裡面，在 **摘要** 快速索引標籤，在 **倉庫** 欄位，輸入 *62*。 接受其他所有欄位中的預設值。
1. 選擇 **確定** 關閉對話方塊。
1. **庫存調整** 頁面打開。 在 **日記帳明細** 快速索引標籤，選擇 **新增** 來新增明細。
1. 在新的明細上，設定以下值。 接受其他所有欄位中的預設值。

    - **品項編號：** *M9200*
    - **地點：** *散裝-003*
    - **數量：** 將值更改為 *10*。

1. 在動作窗格上，選擇 **儲存**。
1. 在動作窗格上，選擇 **驗證** 來檢查錯誤。
1. 在 **檢查日記帳** 對話框裡面，選取 **確定** 開始檢查。 檢查完成後，您會收到一條訊息。
1. 在動作窗格上，選取 **過帳** 認可庫存調整。
1. 在 **過帳日記帳** 對話方塊，選取 **確定** 開始過帳。 完成過帳後，您會收到一條訊息。

## <a name="set-up-advanced-wave-load-building"></a>設定進階波次負載組建

### <a name="regenerate-wave-process-methods"></a>重新產生波次處理方法

您可能必須重新產生波次處理方法，才能使負載構建方法(**buildLoads**)可用。

1. 移至 **Warehouse Management**\>**設定**\>**波次**\>**波次處理方法**。
2. 驗證 **buildLoads** 存在於列表中。 如果不存在，請在動作窗格上選擇 **重新生成方法** 來新增它。

### <a name="set-up-wave-templates"></a>設定波次範本

要利用進階波次負載組建，您必須在每個相關 [波次範本](tasks/configure-wave-processing.md)中包括 **buildLoads** 方法

1. 前往 **倉庫管理** \> **設定** \> **波次** \> **波次範本**。
1. 選取波次範本。

    如果您正在使用 **USMF** 示範資料，選擇 **62 運送預設** 範本。

1. 在動作窗格上，選取 **編輯** 讓頁面進入編輯模式。
1. 在 **方法** 快速索引標籤，在 **其餘方法** 網格中，選取 **buildLoads** 方法。
1. 選擇右箭頭按鈕將 **buildLoads** 方法移動至 **已選定方法** 網格。
1. 為 **buildLoads** 方法指派一個 **波次步驟代碼** 值，您必須先在 **波次步驟代碼** 頁建立代碼。 你可以使用任何你想要的值，但一定要記下它，因為之後還會用到它。 按照以下步驟建立代碼 **WSC2112**：

    1. 在 **buildLoads** 方法的資料列中，點擊 **波次步驟代碼** 欄位，然後選擇 **查看詳情**。
    1. 在 **波次步驟代碼** 頁面，於動作窗格選擇 **新增**。
    1. 在 **波次步驟代碼** 欄位，輸入 *WSC2112*。
    1. 在 **波次步驟說明** 欄位，輸入 *WSC2112*。
    1. 在 **波次步驟類型** 欄位，選取 *Load Building*。

1. 選擇 **儲存**，然後關閉此頁。
1. 在 **構建負載** 方法的資料列中，到 **波次步驟代碼** 欄位，選取您剛剛建立的代碼(**WSC2112**)。
1. 在動作窗格上，選擇 **儲存**。

> [!NOTE]
> 波次步驟代碼是使用者可以設定並使用的代碼，用於將波次方法的特定實例連結到相應的範本。 這些範本包括補貨、容器化、標籤印刷、負載組建和分揀。
>
> 不使用波次步驟代碼時，使用者必須輸入任意文字以引用波次方法實例中的特定範本。 任意文字容易出錯，因為使用者必須確保對波次範本中的特定波次步驟方法新增的波次步驟文字，與目標範本中的波次步驟文字完全相符。
>
> 特定波次步驟類型的波次步驟代碼，可在分開的頁面上設定。 在需要波次步驟代碼的波次範本中，每個波次形步驟方法實例都必須在下拉式清單中選取波次步驟代碼。 下拉式清單中的選擇取代了任意文字輸入，這有助於降低人為錯誤的風險和影響。 設定代碼用於將波次範本中的波次步驟方法連結到該方法的目標範本。

### <a name="set-up-load-mix-groups"></a>設定負載組合群組

負載混合群組建立規則，限制單個負載上可以組合的品項類型。 您可以根據需要設定負載混合群組的數量。 但是，要使用進階波次負載組建，您必須至少先有一個。 按照以下步驟建立負載混和群組。

1. 移至 **Warehouse Management**\>**設定**\>**負載**\>**負載混合群組**。
1. 在動作窗格上，選擇 **新增** 建立負載群組。
1. 在 **負載混合群組識別碼** 欄位，輸入新群組的名稱。

    如果您正在使用 **USMF** 示範資料，設定以下值：

    - **負載混合群組識別碼：** *電視*
    - **說明：** *電視*

1. 在動作窗格上，選取 **儲存** 使 **負載混和群組標準** 快速索引標籤可用。
1. 在 **負載混和群組標準** 快速索引標籤，請選取 **新增** 在網格中新增一列。
1. 在新列中，在每個欄位中設定需要的值。 這些值決定考慮用於負載混和的品項群組。

    如果您正在使用 **USMF** 示範資料，請在 **品項群組** 欄位選取 *電視和影片*。

1. 在動作窗格上，請選取 **儲存** 使 **負載混和群組限制** 快速索引標籤可用。
1. 在 **負載混和群組限制** 快速索引標籤，請選取 **新增** 在網格中新增一列。
1. 在新列中，在每個欄位中設定需要的值。

    如果您正在使用 **USMF** 示範資料，設定以下值：

    - **品項群組：** *車用音響*
    - **負載組建動作：** *限制* (此值將禁止屬於 **車用音響** 品項群組與屬於 **電視和影片** 品項群組在相同的負載上。)

1. 繼續增加規則，直到您新增了負載混和群組中需要的所有標準和限制。

如果您正在使用 **USMF** 示範資料，則已完成此設定。

### <a name="set-up-load-build-templates"></a>設定負載組建範本

您可以根據需要設定負載組建範本的數量。 但是，要使用進階波次負載組建，您必須至少先有一個。 按照以下步驟建立負載組建範本。

1. 移至 **Warehouse Management**\>**設定**\>**負載**\>**負載組建範本**。
1. 在動作窗格上選取 **新增**，將資料列新增至格線。
1. 在新資料列中，設定以下值。

    | 欄位 | 描述 | USMF 示範資料的值 |
    |---|---|---|
    | 序號 | 範本的順序將會評估進去。 | *1* |
    | 負載組建範本名稱 | 請輸入負載組建範本的唯一識別碼。 請輸入之前在此設定中建立或更新的範本的名稱。 | *62 運送預設* |
    | 波次步驟代碼 | 輸入波次步驟代碼，以將範本連接到波次方法。 請輸入在此設置的前面設置波次範本時，您為 **buildLoads** 選取的方法的代碼。 | *WSC2112* |
    | 負載範本識別碼 | 請選取在建立新負載時要使用的負載範本，並在分配給現有負載時與其比對。 負載範本定義了整個負載允許的最大重量和體積。 | *標準負載範本* |
    | 設備 | 在指派給現有負載時要比對，且在新負載建立時也要包含的設備。 | 將此欄位保留空白。 |
    | 負載混合群組識別碼 | 如果品項允許在負載上使用，則選取要使用的負載混合群組。 此混合群組建立規則，限制單個負載上可以組合的品項類型。 您應該選擇您之前在此設定中建立的任一混和群組。 | *TV* |
    | 使用未結的負載 | 選取是否應新增現有未結的負載。 可以使用以下選項：<ul><li>**全無**–不要將未結的負載新增到到任何現有負載。</li><li>**任何**– 將未結的負載新增到對此明細有效的任何現有負載。</li><li>**已指派**– 將未結的負載新增到指派給此波次的負載。</li></ul> | *任何* |
    | 建立負載 | 指定在沒有現有負載符合條件時，是否應建立新負載。 | 選取 (= *Yes*) |
    | 允許貨件明細分割 | 指定如果整個明細超過負載範本的最大容量，是否可以將單個負載明細拆分為多個負載。 | 清除 (= *No*) |
    | 驗證體積 | 指定負載組建時是否應在新增每條負載明細時檢查重量和體積，以確保遵守負載限制的體積限制。 | 清除 (= *No*) |

1. 在動作窗格上，請選取 **儲存** 使 **編輯查詢** 選項可用。
1. 在動作窗格上，請選取 **編輯查詢** 打開編輯查詢的對話方塊。
1. 在對話方塊中，在 **分揀** 索引標籤，請選取 **新增** 在網格中新增一列。
1. 在新列中，定義要使用的排序規則。 例如，設定以下值以按訂單號碼升序對搜索結果進行排序：

    - **資料表：** *負載詳細資料*
    - **衍生資料表：** *負載詳細資料*
    - **欄位：** *訂單號碼*
    - **搜尋方向：** *上升*

1. 選取 **確定** 儲存更改並關閉對話方塊。
1. 在 **拆分** 快速索引標籤，設定規則來控制負載的分割方式。 通常，您可能會拆分已擴展到負載明細的自訂欄位，如 **路線**,**執勤**，或 **執行**。 例如，要為每個訂單號碼建立一個負載，請對具有以下值的列選取 **拆分** 核取方塊：

    - **參考資料表名稱：** *負載詳細資料*
    - **參考欄位名稱：** *訂單號碼*

## <a name="scenario"></a>案例

此案例顯示本主題前面描述的設置在處理銷售訂單時如何影響倉庫作業。 此案例使用 **USMF** 示範資料以及設定說明中提供的其他示範值。

### <a name="create-sales-orders"></a>建立銷售訂單

1. 前往 **銷售和行銷**\>**銷售訂單**\>**所有銷售訂單**。
1. 在動作窗格上，選擇 **新增** 打開 **建立銷售訂單** 對話方塊。
1. 在對話方塊中，設定以下值：

    - 在 **客戶** 快速索引標籤，設定 **客戶帳戶** 欄位為 *US-007*。
    - 在 **一般** FastTab 中，將 **倉庫** 欄位設為 *62*。

1. 選擇 **確定** 以建立銷售訂單並關閉對話方塊。
1. 您的新銷售訂單隨之開啟。 它應該在 **銷售訂單行** FastTab 上的格線中包含一個新的空白行。 在這個新明細上，設定 **品項編號** 欄位為 *A0001* 和 **數量** 欄位為 *1*。
1. 在網格上方的 **庫存** 功能表上，選擇 **保留**。
1. 在 **保留** 頁面，於動作窗格選擇 **保留批號**。
1. 在頁面右上角選擇 **關閉** 按鈕 (**X**)，返回銷售訂單。
1. 在動作窗格的 **倉庫** 索引標籤上，在 **動作** 群組中選擇 **發放到倉庫**。 系統建立貨件並將其新增到新負載，因為現有負載不包含具有此訂單號碼的負載明細。

    您會收到標示已為此訂單建立工作、波次和貨件的通知訊息。

1. 若要在銷售明細確認負載、貨件和工作詳細資料，請選取該明細，然後在功能表上方的 **倉庫** 網格，選取 **負載詳細信息**，**物流資料**，或者 **工作詳細資料**。
1. 在您剛剛建立的銷售訂單中，在 **銷售訂單明細** 快速索引標籤，請選取 **新增明細** 新增另一明細。
1. 在新明細上，設定 **品項編號** 欄位為 *A0002* 和 **數量** 欄位為 *1*。
1. 重複第 6行 到第 9 行以保留該明細並將其發佈到倉庫。 系統為您剛新增的明細建立一個 **新的** 的貨件。 但是，由於您使用的是進階波次負載組建，系統會將該貨件和負載明細新增到現有波次中。 如果您沒有使用進階波次負載組建，系統將為貨件建立一個新負載。
1. 在您剛剛建立的銷售訂單中，在 **銷售訂單明細** 快速索引標籤，請選取 **新增明細** 新增另一明細。
1. 在新明細上，設定 **品項編號** 欄位為 *M9200* 和 **數量** 欄位為 *1*。
1. 重複第 6行 到第 9 行以保留該明細並將其發佈到倉庫。 像之前一樣，系統為您剛新增的明細建立一個 **新的** 的貨件。 但是，由於該品項來自 **車用音響** 品項群組，它 **未能通過您為負載混合群組設定的限制**。 因此，它是 **新增到新負載**。 如果您沒有在負載組建範本上指定負載混合群組，則此貨件將被新增到第一個負載中。


[!INCLUDE[footer-include](../../includes/footer-banner.md)]