---
title: 貨件自動更新
description: 本主題概述了如何為貨件提供自動更新。
author: Mirzaab
ms.date: 11/04/2019
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: WHSWaveTemplateTable,SalesTableListPage,SalesTable,WHSWaveTableListPage
audience: Application User
ms.reviewer: kamaybac
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2019-08-31
ms.dyn365.ops.version: 10.0.5
ms.openlocfilehash: 3402a4c90299cf52e489e85ed55aff9762796545
ms.sourcegitcommit: 3b87f042a7e97f72b5aa73bef186c5426b937fec
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/29/2021
ms.locfileid: "8449265"
---
# <a name="shipment-auto-updates"></a>貨件自動更新

[!include [banner](../includes/banner.md)]

在負載被發佈到倉庫後，自動更新貨件功能會在與貨件關聯的負載明細上自動更新其數量(增加和減少)。 此功能持續保持打開狀態，直到負載或貨件上的負載明細進入波次處理。 使用時，訂單更新可以自動流入倉庫，直到建立倉庫工作，都無需手動干預。

當不使用自動更新貨件功能時，只有數量減少的會自動流動到建立倉庫工作。 如果訂單數量增加或新增訂單明細，使用者必須手動更新或刪除明細，接著重新發佈明細。 透過使用自動更新貨件功能，企業不必擔心相關的貨件和負載不會反映訂單明細更新，可以無縫地對倉庫提供更新。

自動更新貨件功能適用於銷售訂單明細和調撥訂單明細，並且對特定單一倉庫啟用。 因此，如果需要，公司可以在多個倉庫套用不同的自動更新貨件原則。 預設情況下，所有使用倉庫管理程序的倉庫都會套用數量減少的自動更新貨件原則。 使用此預設原則設定時，只有數量減少的會自動流向貨件和負載，直到建立倉庫工作為止。 此行為類似於引入自動更新貨件功能之前的行為。

## <a name="main-elements-of-the-functionality"></a>功能的主要元素

自動更新貨件功能主要依靠貨件狀態來確定在銷售訂單明細或調撥訂單明細發生更改時是否要更改負載明細上的數量。 它也依靠貨件狀態來確定何時應將新的負載明細自動新增到現有負載中。 當貨件狀態為 **波次** 或更高，不會發生自動更新。

自動更新也會考慮波次狀態。 當與負載明細相關的波次的狀態為 **暫停**、**執行**、**發佈**、**揀貨**，或 **已發貨**，如果使用者嘗試減少負載明細上的數量 (透過減少銷售訂單明細或調撥訂單明細上的數量)，則會顯示以下錯誤消息：「無法刪除保留，因為工作是依靠保留而建立。」 此外，當波次具有上述任一波次狀態時，如果使用者嘗試透過增加銷售訂單明細或調撥單明細上的數量來間接增加負載明細數量，負載明細上的數量不會自動增加。 在這種情況下，必須手動更新負載明細。

## <a name="scenarios"></a>案例

自動更新貨件功能支援四種案例：新增訂單明細、增加訂單明細數量、減少訂單明細數量和刪除訂單明細。

- **新增新訂單明細**- 當 **倉庫** 頁面(**Warehouse Management\>設定\>倉庫\>倉庫**) 的 **倉庫** 快速索引標籤 **自動更新發貨** 欄位被設定為 **總是**，如果貨件的訂單存在，並且在為銷售訂單建立負載後將新訂單明細新增到銷售訂單或調撥訂單，則不會更新現有負載。 建立一個不參考現有負載的新負載明細並將其與現有貨件相關聯。 新的明細被新增到負載中並發佈。
- **增加訂單明細上的數量**- 當 **自動更新貨件** 欄位設定為 **總是** 時，如果訂單的貨件存在，並且在為銷售訂單建立負載後增加現有銷售訂單明細或調撥訂單明細的數量，則負載明細增加的數量與訂單明細相同。 如果已發佈負載，但未建立任何工作，則負載明細增加的數量與訂單明細相同。
- **減少訂單明細上的數量**- 當 **自動更新發貨** 欄位設定為 **總是**，或者 **在數量減少時**，如果訂單的貨件存在，並且在為銷售訂單建立負載後減少了現有銷售訂單明細或調撥訂單明細上的數量，則關聯的負載明細上的數量將更新為一致，除非該負載明細上的數量已經等於或小於訂單明細上的新數量。 在這種情況下，負載明細不受影響。 如果已發佈負載，但未建立任何工作，則相關負載明細上的數量會更新為一致，除非負載明細上的數量已經等於或小於訂單明細上的新數量。 在這種情況下，負載明細會受影響。
- **刪除訂單明細**- 當 **自動更新貨件** 欄位設定為 **總是** 或者 **在數量減少時**，如果使用者嘗試刪除已存有負載明細的訂單明細，則會顯示錯誤消息。

## <a name="example-scenario"></a>範例案例

為了進行此案例，請安裝示範資料，並且必須使用 **USMF** 示範資料公司。

### <a name="turn-on-the-auto-update-shipment-functionality"></a>開啟自動更新貨件功能

若要開啟自動更新貨件功能，請遵循下列步驟。

1. 前往 **倉庫管理 \> 設定 \> 倉庫 \> 倉庫**。
2. 選擇倉庫 **24**。
3. 在 **倉庫** 快速索引標籤，到 **自動更新貨件** 欄位，請將值從 **在數量減少時** 調整為 **總是**。

將值更改為 **總是** 後，考慮到前面提到的更新限制，在銷售訂單明細和調撥訂單明細數量的任何增加或減少，以及新明細的新增，都會反應到選定倉庫的貨件和負載上。

### <a name="change-the-wave-template-so-that-load-lines-arent-automatically-processed"></a>變更波次範本，使負載明細不會自動處理

要設定波次範本使其不會自動處理負載明細，請按照以下步驟操作。

1. 前往 **倉庫管理 \> 設定 \> 波次 \> 波次範本**。
2. 請選取波次範本 **24 貨件預設**。
3. 請選取 **編輯**。
4. 在 **一般** 快速索引標籤，請將 **自動建立波次** 選項設定為 **是**，並確認其他所有的選項都設定為 **否**。

重要的是，在波次建立過程中不會自動建立和發佈任何工作。 當負載明細是為銷售訂單明細建立的，並且與其相關的工作也被建立後，如果銷售訂單明細上的數量發生更改，負載明細將不再自動更新。

### <a name="create-a-sales-order"></a>建立銷售訂單

若要建立銷售訂單，請遵循以下步驟。

1. 前往 **銷售和行銷\>銷售訂單\>所有銷售訂單**。
2. 請選取客戶 **US-003**。
3. 為品項編號建立明細 **A0001**。
4. 輸入數量 **10**。 (確認您使用的是倉庫 **24**。)
5. 請選取 **儲存**。
6. 在動作窗格的 **倉庫** 索引標籤上，在 **動作** 群組中選擇 **發放到倉庫**。 已建立貨件和波次。

因為您在前面的過程中更改了波次範本，所以不會建立任何負載或工作。 貨件狀態為 **未結**，波次狀態為 **已建立**。

### <a name="decrease-the-quantity-on-a-sales-order-line"></a>減少銷售訂單明細上的數量

若要減少銷售訂單明細的數量，請執行以下步驟。

1. 前往 **銷售和行銷\>銷售訂單\>所有銷售訂單**。
2. 選取您剛剛發佈到倉庫的銷售訂單。
3. 選取銷售訂單明細。 在 **數量** 欄位，請將值從 **10** 改為 **8**。
4. 到銷售訂單明細中，請選擇 **倉庫\>貨件詳細資料**。 在 **貨件詳細資料** 頁面，到 **負載明細** 快速索引標籤，此數量反映了銷售訂單明細的變化。

### <a name="increase-the-quantity-on-a-sales-order-line"></a>增加銷售訂單明細上的數量

若要增加銷售訂單明細的數量，請執行以下步驟。

1. 前往 **銷售和行銷\>銷售訂單\>所有銷售訂單**。
2. 選取您稍早發佈到倉庫的銷售訂單。
3. 請將明細數量從 **8** 變更到 **12**。
4. 請選取 **儲存**。
5. 回到 **所有銷售訂單** 頁面，然後請再次選取銷售訂單。
5. 在動作窗格上，到 **倉庫** 索引標籤的 **相關資訊** 群組中，請選取 **貨件詳細資料**。 在 **貨件詳細資料** 頁面，到 **負載明細** 快速索引標籤，此數量反映了銷售訂單明細的變化。

儘管負載明細上的數量從 8 個增加到 12 個，但只有 8 個項目保留，除非啟用自動保留。 因為新增到現有負載的數量尚未保留，如果此時處理波次，在沒有保留的情況，則僅為已保留的數量建立工作。

> [!NOTE]
> 當訂單明細上的數量減少時，如果負載明細上的數量已經等於或小於訂單明細上的新數量，則不受影響。 當訂單明細上的數量增加時，負載明細增加的數量與訂單明細相同。 如果訂單明細上的數量與負載明細上的數量不同，則差異仍然存在。

### <a name="add-a-sales-order-line"></a>新增銷售訂單明細

要新增銷售訂單明細，請執行以下步驟。

1. 前往 **銷售和行銷\>銷售訂單\>所有銷售訂單**。
2. 選取您稍早發佈到倉庫的銷售訂單。
3. 為品項編號建立明細 **A0002**。
4. 在 **數量** 欄位中，輸入 **10**。 (確認您使用的是倉庫 **24**。) 新明細會自動新增到現有貨件中。
5. 請選取 **儲存**。
6. 回到 **所有銷售訂單** 頁面，然後請再次選取銷售訂單。
7. 在動作窗格上，到 **倉庫** 索引標籤的 **相關資訊** 群組中，請選取 **貨件詳細資料**。 在 **貨件詳細資料** 頁面，到 **負載明細** 快速索引標籤，注意第二個負載明細。

因為您剛剛新增到現有貨件的銷售訂單明細尚未完成保留，如果此時處理波次，則僅為第一個銷售訂單明細和第一個裝載明細上的數量建立工作。

### <a name="process-a-wave"></a>處理波次

若要處理波次，請按照以下步驟操作。

1. 前往 **倉庫管理 \> 出庫波次 \> 裝運波次 \> 所有波次**。
2. 選取您之前建立的波次。
3. 在動作窗格的 **波次** 索引標籤上，在 **波次** 群組中選擇 **處理**。

波次開始處理並為負載明細上的保留數量建立工作。 貨件狀態更新自 **未結** 到 **波次**。 隨著貨件狀態更新為 **波次**，任何更改發生，例如明細數量的減少或增加，或向銷售訂單新增新明細，都不會影響與波次負載關聯的現有負載明細。

如果貨件的狀態為 **波次** 或更高，更新銷售訂單明細數量不會反映在與貨件關聯的裝負載細上，也不會針對該負載明細進行驗證。 更改負載明細上的數量必須直接在負載明細上進行。

在為負載明細建立工作並在保留後完成驗證。 然後根據工作明細保留驗證銷售訂單明細上數量的減少。


[!INCLUDE[footer-include](../../includes/footer-banner.md)]