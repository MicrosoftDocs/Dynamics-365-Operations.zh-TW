---
title: 發佈到倉庫規則
description: 本主題提供有關發佈到倉庫規則功能的資訊，該功能在發佈到倉庫期間提供靈活性。 它加入一個設定選項，用於控制系統是否允許發佈部分預留的訂單明細。
author: mirzaab
ms.date: 07/01/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: WHSParameters
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2020-07-01
ms.dyn365.ops.version: 10.0.7
ms.openlocfilehash: 2fbc292ccf8e1f459bef4d70b8c37b2da8c3dd17
ms.sourcegitcommit: 3b87f042a7e97f72b5aa73bef186c5426b937fec
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/29/2021
ms.locfileid: "8449259"
---
# <a name="release-to-warehouse-rule"></a>發佈到倉庫規則

[!include [banner](../includes/banner.md)]

*發佈到倉庫規則* 功能在發佈到倉庫期間提供靈活性。 它為每個倉庫加入一個設定選項。 可使用此選項指定是否可為該倉庫發佈部分預留訂單明細。 此功能與進階直接轉運功能在以下情況下一起工作：根據供應來源標記訂單明細數量中的一部分，但是可以在倉庫中處理其餘部分。 因此，可以發佈明細，以便倉庫繼續處理可用庫存數量。

## <a name="turn-on-and-initialize-the-release-to-warehouse-rule-feature"></a>開啟和初始化發佈到倉庫規則功能

### <a name="turn-on-the-feature"></a>開啟功能

使用 *倉庫發放規則* 功能之前，您必須先在系統中開啟。 管理員可以使用[功能管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)設定來檢查該功能的狀態，並視需要開啟該功能。 在 **功能管理** 工作區，該功能會依以下方式列出：

- **模組：** *Warehouse Management*
- **功能名稱：** *倉庫發佈規則*

### <a name="initialize-the-feature"></a>初始化功能

在系統中開啟該功能後，必須對其進行初始化，以便將規則設定為所有倉庫的正確初始狀態。

- 對於未啟用倉庫管理的倉庫，此規則最初設定為 **不適用**。
- 對於已啟用倉庫管理的倉庫，此規則最初設定為 **允許部分預留**

若要初始化功能並為所有倉庫設定發佈到倉庫規則，請執行以下步驟。

1. 前往 **倉庫管理 \> 設定 \> 倉庫管理參數**。
1. 在 **倉庫管理參數** 頁面，在 **一般** 索引標籤的 **公司資訊** 部分，選擇 **初始化發佈到倉庫** 規則的連結。 (如果未顯示此連結，則說明該功能未開啟或已初始化。)
1. 提示確認操作時，選擇 **是** 以初始化此功能。

## <a name="set-the-release-to-warehouse-rule-for-each-warehouse"></a><a name="set-option-warehouse"></a>為每個倉庫設定發佈到倉庫規則

開啟並初始化此功能之後，您的所有倉庫都將具有初始設定，如上一節所述。 可執行以下步驟，針對單個倉庫更改此設定。

1. 前往 **倉庫管理 \> 設定 \> 倉庫 \> 倉庫**。
1. 選取要設定的倉庫。
1. 選取 **編輯** 讓頁面進入編輯模式。
1. 在 **倉庫** FastTab 的 **預留** 部分中，**庫存預留要求** 欄位控制是否允許部分發佈訂單。 選擇下列其中一個值：

    - **不適用** – 首次開啟和初始化此功能時，將把該值自動指派給未啟用倉庫管理的所有倉庫。 不能更改此設定。 此值不適用於已啟用倉庫管理的倉庫。
    - **允許部分預留** – 如果已預留任何數量，則可發佈訂單。 系統將評估是否應該為進階直接轉運標記未預留數量，並將根據需要標記該數量。 如果不存在標記，系統將僅為預留數量建立工作。 首次開啟和初始化此功能時，將把該值自動指派給已啟用倉庫管理的所有倉庫。 此值不適用於未啟用倉庫管理的倉庫。
    - **需要全額預留** – 僅當預留所有數量，才能發佈訂單。 如果沒有為直接轉運實際預留或規劃所有數量，則不能發佈。 此值不適用於未啟用倉庫管理的倉庫。

1. 選擇 **儲存**。

## <a name="scenarios"></a>案例

本節提供兩個案例，用於了解此功能以及其用法。

### <a name="make-sample-data-available"></a>設定樣本資料為可用

要使用此處指定的範例記錄和值完成這些案例，您必須使用已安裝標準[示範資料](../../fin-ops-core/dev-itpro/deployment/deploy-demo-environment.md)的系統。 此外在開始之前，您必須先選擇 **USMF** 法律實體。

使用生產系統時，您還可以將這些案例當作使用該功能的指南。 但是，在此情況下，您必須替換為自己的值，並且您可能會缺少標準示範資料提供的某些類型的必需記錄。

### <a name="scenario-1-require-full-release-no-planned-cross-docking"></a><a name="scenario1"></a>案例 1：需要完全發佈 (未規劃的直接轉運)

顯示倉庫的該功能設定為 **需要完全預留** 會如何運作。

1. 前往 **倉庫管理 \> 設定 \> 倉庫 \> 倉庫**。
1. 對於倉庫 _62_，將 **庫存預留要求** 欄位設定為 **需要完全預留**，如本主題前面的[為每個倉庫設定發佈到倉庫規則](#set-option-warehouse)部分中所述。
1. 前往 **銷售和行銷\>銷售訂單\>所有銷售訂單**。
1. 選擇 **新增** 建立銷售訂單。
1. 在 **建立銷售訂單** 對話方塊中，設定以下值：

    - 在 **客戶** FastTab 中，將 **客戶帳戶** 欄位設定為 _US-004_。
    - 在 **一般** FastTab 中，將 **倉庫** 欄位設為 _62_。

1. 選擇 **確定** 以建立新銷售訂單並關閉對話方塊。
1. 您的新銷售訂單隨之開啟。 將在 **銷售訂單明細** 部分的格線中新增一個空白明細。 在此行中設定以下值：

    - **品項編號：** *A0001*
    - **數量：** *2*

1. 選取 **新增明細** 以新增新明細，並設定以下值：

    - **品項編號：** *A0002*
    - **數量：** *2*

1. 選擇第一個訂單明細，然後在格線上方的 **庫存** 功能表中選擇 **預留**。
1. 在 **保留** 頁面，選擇 **預約批號**，在倉庫中保留所選行的全部數量。
1. 關閉 **保留** 頁面，返回銷售訂單。
1. 請勿預留第二個訂單明細。
1. 在動作窗格上，於 **倉庫** 索引標籤，選擇 **發佈到倉庫**。
1. 請注意，您會收到以下錯誤消息：「必須實際預留所有數量。」 因此，系統不會為訂單建立任何工作、裝運或負載。

    > [!NOTE]
    > 如果部分預留第二個明細，將收到相同錯誤訊息。

### <a name="scenario-2-allow-partial-release"></a>案例 2：允許部分發佈

顯示倉庫的該功能設定為 **允許部分發佈** 會如何運作。

1. 前往 **倉庫管理 \> 設定 \> 倉庫 \> 倉庫**。
1. 對於倉庫 _62_，將 **庫存預留要求** 欄位設定為 **允許部分發佈**，如本主題前面的[為每個倉庫設定發佈到倉庫規則](#set-option-warehouse)部分中所述。
1. 如您在 [前一個案例](#scenario1)中執行的操作，移至 **銷售與行銷 \> 銷售訂單 \> 所有銷售訂單**，然後為倉庫 _62_ 中的客戶帳戶 _US-004_ 建立一個銷售訂單。 加入以下兩個訂單明細：

    - **明細 1**：將 **品項編號** 欄位設為 _A0001_，將 **數量** 欄位設為 _2_，並將 **單位** 欄位設為 _Pcs_。
    - **明細 2**：將 **品項編號** 欄位設為 _A0002_，將 **數量** 欄位設為 _2_，並將 **單位** 欄位設為 _Pcs_。

1. 如您在[前一個案例](#scenario1)中執行的操作，為明細 1 預留所有數量，但是不預留訂單明細 2。
1. 在動作窗格上，於 **倉庫** 索引標籤，選擇 **發佈到倉庫**。
1. 請注意，這次不會收到錯誤訊息。 相反，系統會根據需要建立工作、裝運和裝載，並顯示結果。
1. 若要查看裝運、負載和工作資訊，則使用網格上方 **倉庫** 功能表中的選項：

    - **明細 1：** 三個選項可供使用：**裝運詳細資料**、**負載詳細資料** 和 **工作詳細資料**。 選擇每個選項以查看將訂單發佈到倉庫時建立的裝運、負載和工作詳細資料。
    - **明細 2：** 只能使用 **工作詳細資料** 選項。 選擇該選項，然後注意未建立任何工作，因為未預留任何庫存。 因此，未建立任何裝運或負載。

> [!NOTE]
> 當部分預留第二個明細時，結果應該相同。 在此情況下，將為預留明細數量建立工作，但是不會為未預留數量建立。


[!INCLUDE[footer-include](../../includes/footer-banner.md)]