---
title: 使用自動下達銷售訂單整合下達到倉庫的貨件
description: 本主題介紹一個案例，其中多張訂單以同一自動化下達到倉庫週期程序下達到倉庫。
author: GarmMSFT
ms.date: 05/12/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: WHSShipConsolidationPolicy, WHSShipConsolidationWorkbench, WHSFilterGroupTable, WHSShipmentConsolidation, WHSFilterGenerallyAvail
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: mirzaab
ms.search.validFrom: 2020-05-01
ms.dyn365.ops.version: 10.0.3
ms.openlocfilehash: 10c0b8b9478c8b31957cc08a1a827461c4621b8a
ms.sourcegitcommit: 3b87f042a7e97f72b5aa73bef186c5426b937fec
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/29/2021
ms.locfileid: "8448704"
---
# <a name="consolidate-shipments-released-to-the-warehouse-using-automatic-release-of-sales-orders"></a>使用自動下達銷售訂單整合下達到倉庫的貨件

[!include [banner](../includes/banner.md)]

本主題介紹一個案例，其中多張訂單以同一自動化下達到倉庫週期程序下達到倉庫。 訂單將根據定義為貨件整合原則的規則，自動整合到貨件中。

在該案例中，您將建立多組銷售訂單，並將各組發佈到倉庫。 然後您將根據配置的原則，查看在貨件整合期間建立或更新的貨件。

## <a name="make-demo-data-available"></a>設定示範資料為可用

本主題中的案例引用了為 Microsoft Dynamics 365 Supply Chain Management提供的標準示範資料中所包含的值和記錄 。 如果您想在練習時使用此處提供的值，請務必在安裝了示範資料的環境中工作，並在您開始之前將法律實體設定為 **USMF**。

## <a name="set-up-shipment-consolidation-policies-and-product-filters"></a>設定貨件合併原則和產品篩選條件

此處描述的案例假設您已經開啟了該功能，並在[配置貨件整合原則](configure-shipment-consolidation-policies.md)中完成練習，並建立了其中描述的原則和其他記錄。 在繼續此案例之前，請務必完成這些練習。

## <a name="create-the-sales-orders-for-this-scenario"></a>為此案例建立銷售訂單

首先建立您可以使用的銷售訂單集合。 您必須使用按照高級倉庫 (WMS) 流程啟用的倉庫。 除非明確提及不同的倉庫，否則必須為以下各組訂單使用相同的倉庫。

前往 **應收帳款 \> 訂單 \> 所有銷售訂單**，並建立按照以下小節敘述之設定的銷售訂單集合。

### <a name="create-order-set-1"></a>建立訂單組 1

#### <a name="sales-order-1-1"></a>銷售訂單 1-1

1. 建立具有以下設定的銷售訂單：

    - **客戶帳戶：** *US-001*
    - **交貨模式：** *Airwa-Air*

1. 新增具有以下設定的訂單行：

    - **品項編號：** *A0001* (沒有指派 **代碼 4** 篩選條件的項目)
    - **數量：** *1.00*

#### <a name="sales-order-1-2"></a>銷售訂單 1-2

1. 建立具有以下設定的銷售訂單：

    - **客戶帳戶：** *US-001*
    - **交貨模式：** *Airwa-Air*

1. 新增具有以下設定的訂單行：

    - **品項編號：** *A0001* (沒有指派 **代碼 4** 篩選條件的項目)
    - **數量：** *1.00*

#### <a name="sales-order-1-3"></a>銷售訂單 1-3

1. 建立具有以下設定的銷售訂單：

    - **客戶帳戶：** *US-001*
    - **交貨模式：** *10*

1. 新增具有以下設定的訂單行：

    - **品項編號：** *A0001* (沒有指派 **代碼 4** 篩選條件的項目)
    - **數量：** *1.00*

1. 新增具有以下設定的第二訂單行：

    - **品項編號：** *A0002* (沒有指派 **代碼 4** 篩選條件的項目)
    - **數量：** *1.00*
    - **交貨模式：** *Airwa-Air*

### <a name="create-order-set-2"></a>建立訂單組 2

#### <a name="sales-orders-2-1-and-2-2"></a>銷售訂單 2-1 和 2-2

1. 建立具有以下設定的兩個相同的銷售訂單：

    - **客戶帳戶：** *US-002*

1. 新增具有以下設定的訂單行：

    - **品項編號：** *M9200* (一個項目，其中 **代碼 4** 篩選條件設為 *易燃*)
    - **數量：** *1.00*

1. 新增具有以下設定的第二訂單行：

    - **品項編號：** *M9201* (一個項目，其中 **代碼 4** 篩選條件設為 *爆裂物*)
    - **數量：** *1.00*
    - **交貨模式：** *Airwa-Air*

### <a name="create-order-set-3"></a>建立訂單組 3

#### <a name="sales-order-3-1"></a>銷售訂單 3-1

1. 建立具有以下設定的銷售訂單：

    - **客戶帳戶：** *US-002*

1. 新增具有以下設定的訂單行：

    - **品項編號：** *M9200* (一個項目，其中 **代碼 4** 篩選條件設為 *易燃*)
    - **數量：** *1.00*

1. 新增具有以下設定的第二訂單行：

    - **品項編號：** *M9201* (一個項目，其中 **代碼 4** 篩選條件設為 *爆裂物*)
    - **數量：** *1.00*
    - **交貨模式：** *Airwa-Air*

> [!NOTE]
> 此訂單與您為訂單集 2 建立的兩個訂單相同。 然而它列為自己的訂單集，因為稍後您將在此案例中單獨發佈它。

### <a name="create-order-set-4"></a>建立訂單組 4

#### <a name="sales-order-4-1"></a>銷售訂單 4-1

1. 建立具有以下設定的銷售訂單：

    - **客戶帳戶：** *US-001*
    - **客戶請求：** *1*

1. 新增具有以下設定的訂單行：

    - **品項編號：** *A0001* (沒有指派 **代碼 4** 篩選條件的項目)
    - **數量：** *1.00*

### <a name="create-order-set-5"></a>建立訂單組 5

#### <a name="sales-orders-5-1-and-5-2"></a>銷售訂單 5-1 和 5-2

1. 建立具有以下設定的兩個相同的銷售訂單：

    - **客戶帳戶：** *US-001*
    - **客戶請求：** *2*

1. 新增具有以下設定的訂單行：

    - **品項編號：** *A0001* (沒有指派 **代碼 4** 篩選條件的項目)
    - **數量：** *1.00*

#### <a name="sales-order-5-3"></a>銷售訂單 5-3

1. 建立具有以下設定的銷售訂單：

    - **客戶帳戶：** *US-001*
    - **客戶請求：** *1*

1. 新增具有以下設定的訂單行：

    - **品項編號：** *A0001* (沒有指派 **代碼 4** 篩選條件的項目)
    - **數量：** *1.00*

### <a name="create-order-set-6"></a>建立訂單組 6

#### <a name="sales-orders-6-1-and-6-2"></a>銷售訂單 6-1 和 6-2

1. 建立具有以下設定的兩個相同的銷售訂單：

    - **客戶帳戶：** *US-003*
    - **客戶請求：** *2*

1. 新增具有以下設定的訂單行：

    - **品項編號：** *A0001* (沒有指派 **代碼 4** 篩選條件的項目)
    - **數量：** *1.00*

#### <a name="sales-orders-6-3-and-6-4"></a>銷售訂單 6-3 和 6-4

1. 建立具有以下設定的兩個相同的銷售訂單：

    - **客戶帳戶：** *US-004*
    - **客戶請求：** *1*

1. 新增具有以下設定的訂單行：

    - **品項編號：** *A0001* (沒有指派 **代碼 4** 篩選條件的項目)
    - **數量：** *1.00*

#### <a name="sales-orders-6-5-and-6-6"></a>銷售訂單 6-5 和 6-6

1. 建立具有以下設定的兩個相同的銷售訂單：

    - **客戶帳戶：** *US-007*
    - **站點：** *6*
    - **倉庫：** *61*
    - **集區：** *ShipCons*

1. 新增具有以下設定的訂單行：

    - **品項編號：** *A0001* (沒有指派 **代碼 4** 篩選條件的項目)
    - **數量：** *1.00*

#### <a name="sales-orders-6-7-and-6-8"></a>銷售訂單 6-7 和 6-8

1. 建立具有以下設定的兩個相同的銷售訂單：

    - **客戶帳戶：** *US-007*
    - **站點：** *6*
    - **倉庫：** *61*
    - **集區：** 將此欄位保留空白。

1. 新增具有以下設定的訂單行：

    - **品項編號：** *A0001* (沒有指派 **代碼 4** 篩選條件的項目)
    - **數量：** *1.00*

## <a name="automatic-release-of-sales-orders-to-the-warehouse"></a>將銷售訂單自動發佈到倉庫

對於您之前建立的每組銷售訂單，您將完成一個自動發佈到倉庫的程序。 無論哪種情況，您都會演練這裡提供的[基本的發佈到倉庫程序](#release-procedure)。

### <a name="basic-release-to-warehouse-procedure"></a><a name="release-procedure"></a>基本的發佈到倉庫程序

對於您之前建立的每組銷售訂單，您將完成以下小節中概述的三個程序。

#### <a name="update-the-wave-template-that-will-be-used-during-release"></a>更新將在發佈時使用的波次範本

1. 前往 **倉庫管理 \> 設定 \> 波次 \> 波次範本**。
1. 設定 **波次範本類型** 欄位為 *貨件*。
1. 找出並選擇與您在為此案例建立的訂單集中使用之倉庫關聯的波次範本。 例如，如果您使用倉庫 *24*，選擇 **24 運送預設** 波次範本。 如果您使用倉庫 *61*，選擇 **61 運送** 波次範本。
1. 在動作窗格上，選擇 **編輯**。
1. 將 **發佈到倉庫時的流程波次** 選項設為 *否*。

#### <a name="release-to-the-warehouse"></a>發佈到倉庫

1. 前往 **倉庫管理 \> 發佈到倉庫 \> 自動發佈銷售訂單**。
1. 設定 **發佈數量** 欄位為 *全部*。
1. 在 **要包括的記錄** FastTab，選擇 **篩選** 打開查詢對話方塊。
1. 在 **範圍** 索引標籤，選擇 **新增** 將具有以下設定的列加入網格：

    - **表格：** *銷售訂單*
    - **衍生資料表：** *銷售訂單*
    - **欄位：** *銷售訂單*
    - **條件：** 輸入所需訂單集中之銷售訂單編號的逗號分隔清單。

1. 選擇 **確定** 儲存您的查詢。
1. 選擇 **確定** 開始 *自動發佈到倉庫* 程序。

#### <a name="review-the-shipment-that-is-created-or-updated"></a>查看已建立或更新的貨件

1. 前往 **倉庫管理 \> 運送 \> 所有運送**。
1. 尋找並選擇所需的貨件。
1. 如果貨件建立或更新時使用整合原則，您應該會在 **貨件整合原則** 欄位看到。

### <a name="release-sales-orders-from-order-set-1"></a>發佈訂單集 1 的銷售訂單

按照[基本的發佈到倉庫程序](#release-procedure)發佈訂單集 1 的銷售訂單。

完成後，您應該會看到已建立兩個貨件：

- 第一個貨件包含三個明細，是使用 *CustomerMode* 貨件整合原則。
- 第二批貨件，未使用 *Airways* 交貨的運輸模式，是使用 *CustomerOrderNo* 貨件整合原則建立。

### <a name="release-sales-orders-from-order-set-2"></a>發佈訂單集 2 的銷售訂單

按照[基本的發佈到倉庫程序](#release-procedure)發佈訂單集 2 的銷售訂單。

完成後，您應該會看到已建立三個貨件：

- 第一批貨件包含 *易燃* 項目。
- 其他兩批貨物中的每一批都包含一行，其中包含 *爆裂物* 物品。

### <a name="release-sales-orders-from-order-set-3"></a>發佈訂單集 3 的銷售訂單

按照[基本的發佈到倉庫程序](#release-procedure)發佈訂單集 3 的銷售訂單。

完成後，您應該會看到發生了以下動作：

- 更新了一個現有貨件 (訂單集 2 發佈到倉庫時建立的貨件)。 加入一條具有 *易燃* 物品。
- 建立了一個新貨件，其中包含 *爆裂物* 物品。

### <a name="release-sales-orders-from-order-set-4"></a>發佈訂單集 4 的銷售訂單

按照[基本的發佈到倉庫程序](#release-procedure)發佈訂單集 4 的銷售訂單。

完成後，您應該會看到一個現有的貨件 (其中 **客戶請求** 欄位設為 *1*) 已更新。 一個新的行加入。

### <a name="release-sales-orders-from-order-set-5"></a>發佈訂單集 5 的銷售訂單

按照[基本的發佈到倉庫程序](#release-procedure)發佈訂單集 5 的銷售訂單。

完成後，您應該會看到發生了以下動作：

- 一個現有的貨件 (其中 **客戶請求** 欄位設為 *1*) 已更新。 銷售訂單 5-3 中的一行 (其中 **客戶請求** 欄位設為 *1*) 加入。
- 建立了一個新貨件，其中銷售訂單 5-1 和 5-2 中的行被分組到一個貨件中。

### <a name="release-sales-orders-from-order-set-6"></a>發佈訂單集 6 的銷售訂單

按照[基本的發佈到倉庫程序](#release-procedure)發佈訂單集 6 的銷售訂單。

完成後，您應該會看到已建立四個貨件：

- 來自客戶 *US-003* 的兩個訂單的明細使用 *訂單集區* 貨件整合原則整合為一批貨件。
- 來自客戶 *US-004* 的兩個訂單的明細使用 *訂單集區* 貨件整合原則整合為一批貨件。
- 來自客戶 *US-007* 的銷售訂單 6-5 和 6-6 的明細使用 *訂單集區* 貨件整合原則整合為一批貨件。
- 來自客戶 *US-007* 的銷售訂單 6-7 和 6-8 的明細使用 *CrossOrder* 貨件整合原則整合為一批貨件。

## <a name="additional-resources"></a>其他資源

- [貨件整合原則](about-shipment-consolidation-policies.md)
- [配置貨件整合原則](configure-shipment-consolidation-policies.md)


[!INCLUDE[footer-include](../../includes/footer-banner.md)]