---
title: 具備需求預測的主計劃
description: 本主題說明在使用規劃最佳化進行主計劃期間如何納入需求預測。
author: ChristianRytt
ms.date: 12/02/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ReqPlanSched, ReqGroup, ReqReduceKey, ForecastModel
audience: Application User
ms.reviewer: kamaybac
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Manufacturing
ms.author: crytt
ms.search.validFrom: 2020-12-02
ms.dyn365.ops.version: AX 10.0.13
ms.openlocfilehash: cbac68b79b2a10f05e0e442d4f0aa716e5a04634
ms.sourcegitcommit: ac23a0a1f0cc16409aab629fba97dac281cdfafb
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/29/2021
ms.locfileid: "8449505"
---
# <a name="master-planning-with-demand-forecasts"></a>具備需求預測的主計劃

[!include [banner](../../includes/banner.md)]

您可以將需求預測與規劃最佳化結合使用，以求主計劃中的預期需求。 您可以使用 Microsoft Dynamics 365 Supply Chain Management 中的需求預測功能手動建立、匯入或產生需求預測。 如需有關需求預測的更多資訊，請參閱[需求預測概觀](../introduction-demand-forecasting.md)。

> [!NOTE]
> 規劃最佳化不支援單獨的預測規劃。 因此，在您使用規劃最佳化時，**主計劃參數** 頁面上的 **目前預測規劃** 設定將無效。

## <a name="set-up-a-master-plan-to-include-a-demand-forecast"></a>設定主計劃以納入需求預測

如要設定主計劃以納入需求預測，請執行以下步驟。

1. 前往 **主計劃 \> 設定 \> 計劃 \> 主計劃**。
1. 選擇現有計劃或建立新的計劃。
1. 在 **一般** FastTab 上設定下列欄位：

    - **預測模型** – 選擇要套用的預測模型。 目群主計劃產生供應建議時，將參考此模型。
    - **納入需求預測** – 將此選項設為 *是*，將需求預測納入目群的主計劃。 若此處設為 *否*，則需求預測交易不會納入主計劃。
    - **減少預測需求的方法** – 選擇減少預測需求應採用的方法。 如需詳細資訊，請參閱本主題後面的[趨勢預測縮減參數](#reduction-keys)一節。

1. 在 **以日為單位的時間範圍** FastTab 上，您可以設定以下欄位來指定要包含需求預測的時段：

    - **預測計劃** – 將此選項設為 *是*，覆寫各個涵蓋範圍群組的預測計劃時間範圍。 若此處設為 *否*，目群的主計劃會使用各個涵蓋範圍群組的值。
    - **預測時間期間** – 若 **預測計劃** 選項設為 *是*，則請指定應套用至需求預測的天數 (從今天起)。

    > [!IMPORTANT]
    > 規劃最佳化目前不支援 **預測計劃**。

## <a name="set-up-a-coverage-group-to-include-a-demand-forecast"></a>設定涵蓋範圍群組以納入需求預測

如要設定涵蓋範圍群組以納入需求預測，請執行以下步驟。

1. 前往 **主計劃\>設定\>計畫\>涵蓋範圍群組**。
1. 選擇現有的涵蓋範圍群組，或建立一個新的群組。
1. 在 **其他** FastTab 上設定下列欄位：

    - **預測計劃時間範圍** – 輸入應套用需求預測的天數 (從今天日期開始)。 此值可以透過使用主計劃上的 **預測計劃** 選項進行覆寫，如上一節所述。
    - **縮減參數** – 選擇要套用的縮減參數。 如需詳細資訊，請參閱本主題稍後的[建立和設定預測縮減參數](#create-reduction-key)和[使用縮減參數](#use-reduction-key)章節。
    - **減少預測依據** – 對於 **用於減少預測需求的方法** 欄位設為 *交易 - 縮減參數* 或 *交易 - 動態期間* 的主計劃，指定哪些交易應減少預測。 選擇下列其中一個值：

        - **所有交易** – 所有交易都應降低預測。
        - **訂單** – 只有銷售訂單應降低預測。

        > [!NOTE]
        > 如果您選擇 *所有交易*，在相同庫存維度中同時具有需求和供應的交易會被認為是中性的，並且在預測減少期間被忽略。 例如，如果計劃維度設為僅站點而非倉庫，則站點 1、倉庫 11，和站點 1、倉庫 13 之間的轉移訂單將被忽略，並且不會減少剩餘需求預測。

    - **包括公司間訂單** – 如果減少預測時應包括公司間訂單，則將此選項設為 *是*。 否則，將其設為 *否*。
    - **在需求預測中包括客戶預測** – 指定客戶預測是否應包含在總體預測中。 此選項會決定實際需求如何減少預測需求。 您可以使用它來確保主計劃涵蓋特定客戶購買的物料供應。

        - 將此選項設為 *是*，以在整體預測中包含客戶預測。 在這種情況下，實際客戶需求會降低客戶預測和整體預測。 主計劃會產生計劃訂單以僅涵蓋總體預測數量。
        - 若您不想在整體預測中包含客戶預測，請將此選項設為 *否*。 在這種情況下，實際客戶需求只會減少客戶預測。 主計劃會產生已規劃訂單，以涵蓋總體預測數量和每個客戶數量的預測。

## <a name="forecast-reduction-keys"></a><a name="reduction-keys"></a>預測縮減參數

本節提供用於降低預測要求之不同方法的相關資訊。 它包括每種方法的結果範例。 還介紹如何建立、設定和使用預測縮減參數。 一些方法使用預測縮減參數來減少預測要求。

### <a name="methods-that-are-used-to-reduce-forecast-requirements"></a>用於減少預測要求的方法

在主計劃加入預測時，可以選擇當包含實際需求時如何減少預測要求。 請注意，總體規劃不包含過去的預測要求，即當天以前的所有預測要求。

若要在主計劃中加入預測並選擇用於減少預測要求的方法，請移至 **總體規劃 \> 設定 \> 計劃 \> 主計劃**。 在 **預測模型** 欄位中，選擇一個預測模型。 在 **減少預測要求的方法** 欄位中，選擇一個方法。 可以使用以下選項：

- 無
- 百分比 – 縮減參數
- 交易 – 縮減參數
- 交易 – 動態期間

以下部分提供有關每個選項的詳細資訊。

#### <a name="none"></a>無

如果您選擇 **無**，則在總排程期間不減少預測要求。 在這種情況下，總體規劃建立計劃訂單以供應預測的需求 (預測要求)。 無論其他類型的需求如何，這些計劃訂單中維持建議的數量。 例如，如果發佈銷售訂單，總體規劃將建立更多計劃訂單以供應銷售訂單。 預測要求的數量不會減少。

#### <a name="percent--reduction-key"></a>百分比 – 縮減參數

如果選擇 **百分比- 縮減參數**，則根據百分比和縮減參數定義的百分比和期間來減少預測要求。 在這種情況下，總體規劃建立計劃訂單，其中數量的計算方法是預測數量 × 各期間的縮減參數。 如果有其他類型的需求，總體規劃還將建立計劃訂單以供應該需求。

##### <a name="example-percent--reduction-key"></a>範例：百分比 – 縮減參數

此範例顯示縮減參數如何根據由縮減參數定義的百分比和期間減少需求預測要求。

對於此範例，您在主計劃中包含以下需求預測。

| 月    | 需求預測 |
|----------|-----------------|
| 一月  | 1,000           |
| 二月 | 1,000           |
| 三月    | 1,000           |
| 四月    | 1,000           |

在 **縮減參數** 頁面，設定以下幾行。

| 變更 | 單位  | 百分比 |
|--------|-------|---------|
| 1      | 月 | 100     |
| 2      | 月 | 75      |
| 3      | 月 | 50      |
| 4      | 月 | 25      |

將縮減參數分配給品項的涵蓋範圍群組。 然後在 **主計劃** 頁面的 **用於縮減預測要求的方法** 欄位中，選擇 **百分比- 縮減參數**。

在這種情況下，如果在 1 月 1 日執行預測排程，則將根據您在 **縮減參數** 頁面中設定的百分比來消耗銷售需求預測要求。 以下需求數量將轉移到主計劃。

| 月                | 計劃訂單數量 | 計算    |
|----------------------|------------------------|----------------|
| 一月              | 0                      | = 0% × 1,000   |
| 二月             | 250                    | = 25% × 1,000  |
| 三月                | 500                    | = 50% × 1,000  |
| 四月                | 750                    | = 75% × 1,000  |
| 5 月至 12 月 | 1,000                  | = 100% × 1,000 |

#### <a name="transactions--reduction-key"></a>交易 – 縮減參數

如果將 **用於減少預測要求的方法** 欄位設定為 *交易 - 縮減參數*，將由縮減參數定義期間發生之符合資格的需求交易減少預測要求。

符合資格的需求由 **涵蓋範圍群組** 頁面中的 **預測減少依據** 欄位定義。 如果將 **預測減少依據** 欄位設定為 *訂單*，則僅將銷售訂單交易視為符合資格的需求。 如果將其設定為 *所有交易*，則將所有非內部公司發貨庫存交易都視為符合資格的需求。 如果也應將內部公司銷售訂單視為符合資格的需求，請將 **包括內部公司訂單** 選項設定為 *是*。

預測減少從縮減參數期間中的第一個 (最早) 需求預測記錄開始。 如果符合資格的庫存交易數量比同一縮減參數期間的需求預測明細數量多，則將使用庫存交易數量的餘額減少上一個期間中的需求預測數量 (如果有未使用的預測)。

如果上一縮減參數期間中未保留未使用的預測，將使用庫存交易記錄數量的餘額減少下月的預測數量 (如果有未使用的預測)。

如果 **用於減少預測要求的方法** 欄位設定為 *交易 - 縮減參數*，則不使用縮減參數明細中的 **百分比** 欄位的值。 將僅使用這些日期來定義縮減參數期間。

> [!NOTE]
> 當天或之前發佈的所有預測都將忽略，不會用於建立計劃訂單。 例如，如果當月的需求預測是在 1 月 1 日產生的，而您在 1 月 2 日執行其中包括需求預測的主計劃，則計算將忽略日期為 1 月 1 日的需求預測明細。

##### <a name="example-transactions--reduction-key"></a>範例：交易 – 縮減參數

此範例顯示在縮減參數定義期間內發生的實際訂單如何減少需求預測要求。

[![執行主計劃之前的實際訂單和預測。](media/forecast-reduction-keys-1-small.png)](media/forecast-reduction-keys-1.png)

在此範例中，您會在 **主計畫** 頁面上的 **用於減少預測需求的方法** 欄位中，選擇 *交易 - 縮減參數*。

以下需求預測明細存在於 4 月 1 日。

| 日期     | 預測的件數 |
|----------|-----------------------------|
| 4 月 5 日  | 100                         |
| 4 月 12 日 | 100                         |
| 4 月 19 日 | 100                         |
| 4 月 26 日 | 100                         |
| 五月 3 日    | 100                         |
| 五月 10 日   | 100                         |
| 五月 17 日   | 100                         |

以下銷售訂單明細存在於 4 月。

| 日期     | 要求的件數 |
|----------|----------------------------|
| 4 月 27 日 | 240                        |

[![根據 4 月訂單產生的計劃供應。](media/forecast-reduction-keys-2-small.png)](media/forecast-reduction-keys-2.png)

在 4 月 1 日執行主計劃時，以下需求數量將轉移到主計劃。 如您所見，從這些交易中的第一個交易開始，4 月份的預測交易按順序減少了 240 的需求數量。

| 日期     | 所需的件數 |
|----------|---------------------------|
| 4 月 5 日  | 0                         |
| 4 月 12 日 | 0                         |
| 4 月 19 日 | 60                        |
| 4 月 26 日 | 100                       |
| 4 月 27 日 | 240                       |
| 五月 3 日    | 100                       |
| 五月 10 日   | 100                       |
| 五月 17 日   | 100                       |

現在，假設在 5 月期間匯入了新訂單。

以下銷售訂單明細存在於 5 月。

| 日期   | 要求的件數 |
|--------|----------------------------|
| 5 月 4 日  | 80                         |
| 五月 11 日 | 130                        |

[![根據 4 月與 5 月訂單產生的計劃供應。](media/forecast-reduction-keys-3-small.png)](media/forecast-reduction-keys-3.png)

在 4 月 1 日執行主計劃時，以下需求數量將轉移到主計劃。 如您所見，從這些交易中的第一個交易開始，4 月份的預測交易按順序減少了 240 的需求數量。 但是，從 5 月份的第一筆需求預測交易開始，5 月預測交易共減少了 210 筆。 但是，每個期間的總數會保留 (4 月為 400，5 月為 300)。

| 日期     | 所需的件數 |
|----------|---------------------------|
| 4 月 5 日  | 0                         |
| 4 月 12 日 | 0                         |
| 4 月 19 日 | 60                        |
| 4 月 26 日 | 100                       |
| 4 月 27 日 | 240                       |
| 五月 3 日    | 0                         |
| 5 月 4 日    | 80                        |
| 五月 10 日   | 0                         |
| 五月 11 日   | 130                       |
| 五月 17 日   | 90                        |

#### <a name="transactions--dynamic-period"></a>交易 – 動態期間

如果選擇 **交易- 動態期間**，將按動態期間進行的實際訂單交易減少預測要求。 動態期間涵蓋目前預測日期，並在下一預測開始時結束。 在這種情況下，總體規劃建立計劃訂單以供應預測的需求 (預測要求)。 但是，發佈實際訂單交易時，將減少預測要求。 實際交易佔用部分預測需求。

在使用此選項時，會發生以下行為：

- 不需要或不使用縮減參數。 
- 如果完全減少預測，則目前預測的預測要求變為 0 (零)。
- 如果沒有未來預測，則會減少上次輸入預測的預測要求。
- 時間範圍包括在預測減少計算中。
- 正天數包括在預測減少計算中。
- 如果實際訂單交易超過預測要求，則剩餘的交易不會轉傳到下一個預測期間。

##### <a name="example-1-transactions--dynamic-period"></a>範例 1：交易 – 動態期間

下面是一個簡單範例，該範例顯示 **交易 - 動態期間** 方法的工作原理。

對於此範例，您在主計劃中包含以下需求預測。

| 日期       | 需求預測 |
|------------|-----------------|
| 1 月 1 日  | 1,000           |
| 二月 1 日 | 1,000             |

還將建立以下銷售訂單。

| 日期        | 銷售訂單數量 |
|-------------|----------------------|
| 1 月 15 日  | 200                  |
| 2 月 15 日 | 400                  |

在此案例中，將建立以下計劃訂單。

| 需求預測日期 | 數量 | 說明                           |
|--------------------- |----------|---------------------------------------|
| 1 月 1 日            | 800      | 預測需求 (= 1,000 – 200) |
| 1 月 15 日           | 200      | 銷售訂單要求             |
| 二月 1 日           | 600      | 預測需求 (= 1,000 – 400) |
| 2 月 15 日          | 400      | 銷售訂單要求             |

##### <a name="example-2-transactions--dynamic-period"></a>範例 2：交易 – 動態期間

在大多數情況下，會設定系統以使交易在特定預測期間減少需求預測：幾週、幾個月等。 這些期間是在縮減參數中定義的。 但是，兩個需求預測明細之間的時間也可 *代表* 一段期間。

對於此範例，將為以下日期和數量建立需求預測。

| 日期       | 需求預測 |
|------------|-----------------|
| 1 月 1 日  | 1,000           |
| 一月 5 日  | 500             |
| 一月 12 日 | 1,000           |

請注意，在此預測中，預測日期之間沒有明確的間隔。 第一個日期和第二個日期之間的間隔為四天，第二個和第三個日期之間的間隔為七天。 這些間隔就是動態期間。

還將建立以下銷售訂單明細。

| 日期                             | 銷售訂單數量 |
|----------------------------------|----------------------|
| 上一年度 12 月 15 日 | 500                  |
| 一月 3 日                        | 100                  |
| 一月 10 日                       | 200                  |

在這種情況下，將以下面的方式減少預測：

- 因為第一個銷售訂單不在任何期間，因此不會減少任何預測。
- 因為第二個銷售訂單是從 1 月1 日到 1 月5 日，因此它會將 1 月1 日的預測減少 100。
- 因為第三個銷售訂單是從 1 月 5 日到 1 月12 日，因此它會將 1 月 5 日的預測減少 200。

因此，將建立以下計劃訂單。

| 需求預測日期             | 數量 | 說明                                                         |
|----------------------------------|----------|---------------------------------------------------------------------|
| 上一年度 12 月 15 日 | 500      | 銷售訂單要求                                            |
| 1 月 1 日                        | 900      | 預測需求期間 1 月 1 日至 1 月 5 日 (= 1,000 – 100) |
| 一月 3 日                        | 100      | 銷售訂單要求                                            |
| 一月 5 日                        | 300      | 預測需求期間 1 月 5 日至 1 月 10 日 (= 500 – 200)  |
| 一月 12 日                       | 1,000    | 預測需求期間 1 月 12 日至月底                      |

### <a name="create-and-set-up-a-forecast-reduction-key"></a><a name="create-reduction-key"></a>建立和設定預測縮減參數

用於減少預測要求的 **交易 - 縮減參數** 和 **百分比- 縮減參數** 方法中使用預測縮減參數。 若要建立和設定縮減參數，請執行以下步驟。

1. 移至 **總體規劃 \> 設定 \> 涵蓋範圍 \> 縮減參數**。
2. 選擇 **新增** 以建立縮減參數。
3. 在 **縮減參數** 欄位中，輸入預測縮減參數的唯一識別碼。 然後在 **名稱** 欄位中，輸入名稱。 
4. 定義期間和每個期間的縮減參數百分比：

    - **生效日期** 欄位指示建立期間的開始日期。 如果 **使用生效日期** 選項設定為 **是**，期間將在生效日期開始。 如果設定為 **否**，期間將在執行總體規劃的日期開始。
    - 定義應進行預測減少的期間。
    - 為具體期間指定應減少預測要求的百分比。 您可以輸入正值來減少需求，或輸入負值來增加需求。

### <a name="use-a-reduction-key"></a><a name="use-reduction-key"></a>使用縮減參數

必須為品項的涵蓋範圍群組分配預測縮減參數。 若要為品項的涵蓋範圍群組分配縮減參數，請執行以下步驟。

1. 前往 **總體規劃 \> 設定 \> 涵蓋範圍 \> 涵蓋範圍群組**。
2. 在 **其他** FastTab 的 **縮減參數** 欄位中，選擇縮減參數以分配給涵蓋範圍群組。 然後，縮減參數會套用在屬於涵蓋範圍群組的所有品項。
3. 在總排程期間，若要使用縮減參數計算預測減少，必須在設定預測計劃或主計劃時定義此設定。 移至以下其中一個位置：

    - **主計劃\>設定\>計劃\>預測計劃**
    - **主計劃\>設定\>計劃\>總規劃**

4. 在 **預測計劃** 或 **主計劃** 頁面的 **一般** FastTab 內，在 **用於減少預測要求的方法** 欄位中，選擇 **百分比 - 縮減參數** 或 **交易記錄 - 縮減參數**。

### <a name="reduce-a-forecast-by-transactions"></a>按交易減少預測

如果用於減少預測要求的方法選擇 **交易 - 縮減參數** 或 **交易記錄 - 動態期間**，則可指定哪些交易減少預測。 如果所有交易均應減少預測，則在 **涵蓋範圍群組** 頁面 **其他** FastTab 中的 **預測減少依據** 欄位中選擇 **所有交易**，如果只有銷售訂單才應減少預測，則選擇 **訂單**。

## <a name="forecast-models-and-submodels"></a>預測模型與子模型

本節介紹如何建立預測模型，以及如何透過設定子模型來結合多個預測模型。

一個 *預測模型* 名稱與識別特定的預測。 建立預測模型後，您可以向其中新增預測明細。 若要為多個項目新增預測明細，請使用 **需求預測明細** 頁面。 若要為特定選定項目新增預測明細，請使用 **已發佈產品** 頁面。

預測模型可以包括來自其他預測模型的預測。 若要實現此結果，您會新增其他預測模型作為父預測模型的 *子模型*。 您必須先建立每個相關模型，然後才能將其新增為父預測模型的子模型。

由此產生的結構，可為您提供一種控制預測的強大方法，因為它允許您組合 (聚合) 來自多個單獨預測的輸入。 因此，從規劃的角度來看，將預測結合後進行模擬很容易。 例如，您可以設定依據一般預測與春季促銷預測相結合的模擬。

### <a name="submodel-levels"></a>子模型等級

可以新增到父預測模型的子模型數量沒有限制。 然而，該結構只能一層深。 換句話說，作為另一個預測模型子模型的預測模型，不能有自己的子模型。 當您將子模型新增到預測模型時，系統會檢查該預測模型是否已是另一個預測模型的子模型。

如果主計劃遇到具有自己子模型的子模型，您會收到錯誤消息。

#### <a name="submodel-levels-example"></a>子模型等級範例

預測模型 A 具有預測模型 B 作為子模型。 因此，預測模型 B 不能有自己的子模型。 如果您嘗試將子模型新增到預測模型 B，您會收到以下錯誤消息：「預測模型 B 是模型 A 的子模型。」

### <a name="aggregating-forecasts-across-forecast-models"></a>跨預測模型彙總預測

同一天發生的預測明細將在其預測模型及其子模型中彙總。

#### <a name="aggregation-example"></a>彙總範例

預測模型 A 具有預測模型 B 與 C 作為子模型。

- 預測模型 A 包括 6 月 15 日對 2 件 (pcs) 的需求預測。
- 預測模型 B 包括 6 月 15 日對 3 件 (pcs) 的需求預測。
- 預測模型 C 包括 6 月 15 日對 4 件 (pcs) 的需求預測。

由此產生的需求預測將是 6 月 15 日對 9 件 (2 + 3 + 4) 的單一需求。

> [!NOTE]
> 每個子模型都使用自己的參數，而非父預測模型的參數。

### <a name="create-a-forecast-model"></a>建立預測模型

若要建立預測型號，請遵循以下步驟。

1. 前往 **主計畫\>設定\>需求預測\>預測模型**。
1. 在動作窗格上，選擇 **新增**。
1. 為新的預測模型設定以下欄位：

    - **模型** – 輸入模型的唯一識別碼。
    - **名稱** – 輸入該模型的描述性名稱。
    - **停止** – 通常，您應該將此選項設為 *否*。 僅當您想要阻止編輯分配給模型的所有預測明細時，才將其設為 *是*。

    > [!NOTE]
    > **包括在現金流量預測中** 欄位和 **專案** FastTab 上的欄位與主計畫無關。 因此，您可以在這種情況下忽略它們。 只有在使用 **項目管理和會計** 模組預測時才必須考慮它們。

### <a name="assign-submodels-to-a-forecast-model"></a>將子模型指派給預測模型

如要將子模型指派給預測模型，請依以下步驟操作。

1. 前往 **庫存管理\>設定\>預測\>預測模型**。
1. 在清單窗格中，選擇要設定子模型的預測模型。
1. 在 **子模型** FastTab 上，選擇 **新增** 以在格線中新增一行。
1. 在新資料列中，設定以下欄位：

    - **子模型** – 選擇要新增為子模型的預測模型。 此預測模型必須已經存在，並且自己不能有任何子模型。
    - **名稱** – 輸入該子模型的描述性名稱。 例如，此名稱可能表示子模型與父預測模型的關係。

[!INCLUDE[footer-include](../../../includes/footer-banner.md)]

