---
title: 採購貿易合約的總規劃
description: 本主題說明「規劃最佳化」如何根據採購貿易合約中找到的最佳價格或提前期，進而尋找計劃訂單的供應商和/或提前期。
author: ChristianRytt
ms.date: 06/29/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ReqCreatePlanWorkspace
audience: Application User
ms.reviewer: kamaybac
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Manufacturing
ms.author: crytt
ms.search.validFrom: 2020-05-29
ms.dyn365.ops.version: AX 10.0.12
ms.openlocfilehash: 10b4f9f45899b808bd0baa73974a173cf120aa6c3fd33e10d0d79a59614f1f70
ms.sourcegitcommit: 42fe9790ddf0bdad911544deaa82123a396712fb
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/05/2021
ms.locfileid: "8447090"
---
# <a name="master-planning-with-purchase-trade-agreements"></a>採購貿易合約的總規劃

[!include [banner](../../includes/banner.md)]

本主題說明「規劃最佳化」如何根據為特定產品制訂的所有採購貿易合約中找到的最佳價格或提前期，進而尋找計劃訂單的供應商和/或提前期。

## <a name="turn-on-the-purchase-trade-agreements-for-planning-optimization-feature"></a>開啟採購貿易合約以進行規劃最佳化功能

使用此功能之前，您必須先在系統中開啟。 管理員可以使用[功能管理](../../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)工作區來檢查該功能的狀態，並視需要開啟該功能。 在那裡，該功能按以下方式列出：

- **模組：** *總規劃*
- **功能名稱：** *規劃最佳化的採購貿易合約*

## <a name="prepare-your-system-to-evaluate-purchase-trade-agreements-during-master-planning"></a>準備您的系統以在總規劃期間評估採購貿易合約

按照以下步驟設定您的系統，以套用評估採購貿易合約的計劃最佳化。

1. 前往 **總規劃 \> 設定 \> 總規劃參數**。 在 **已規劃訂單** 索引標籤，在 **供應商** 部分，設定下列值：

    - **查找貿易合約**– 將此選項設為 **是** 以將採購貿易合約納入總規劃。
    - **搜尋條件**– 選擇您想要為每個採購貿易合約優先考慮的因素：**最短提前期** 或 **最低單價**。

1. 前往 **採購和開源\>設定\>價格和折扣\>啟用價格/折扣**，並確保 **供應商** 選項設為 **是**。
1. 前往 **產品資訊管理\>設定\>維度與變型群組\>儲存維度群組**，並選擇適用於總規劃應為其評估採購貿易合約之產品的儲存維度群組。 確保該群組中的每個相關儲存維度在 **對於購買價格** 欄中含有勾選符號。 對所有其他相關儲存維度群組重複此步驟。

## <a name="prepare-a-released-product-to-evaluate-purchase-trade-agreements-during-master-planning"></a>準備已發佈產品以在總規劃期間評估採購貿易合約

按照上一節所述準備好系統後，您應該按照以下步驟確保您要使用此功能的每個產品都已正確設定。

1. 前往 **產品資訊管理 \> 產品 \> 已發佈產品**，然後開啟目標產品。
1. 在 **購買** FastTab，確保 **供應商** 欄位中沒有指派任何供應商。
1. 在操作窗格中的 **規劃** 索引標籤，在 **涵蓋範圍** 群組選擇 **品項涵蓋範圍** 以開啟所選產品的 **品項涵蓋範圍** 頁面。 驗證以下設定：

    - 在 **一般的** 索引標籤，您可以設定供應商覆寫。 如果您希望規劃最佳化使用採購貿易合約來選擇供應商，則您應該透過清除 **使用特定設定** 核取方塊來避免供應商覆寫。
    - 在 **提前期** 索引標籤上，您可以設定提前期覆寫。 如果您希望規劃最佳化使用採購貿易合約來選擇提前期，則您應該避免提前期覆寫。 使用採購貿易合約 (**購買**、**生產**，和/或 **轉移**) 清除您要選取的每個提前期類型的核取方塊。

1. 關閉 **品項涵蓋範圍** 頁面以返回所選產品的詳細資料頁面。
1. 在 **趨勢預測** 群組中，**規劃** 索引標籤上的操作窗格，選取 **供應預測** 以開啟 **供應預測** 頁面。 確保這裡顯示的列沒有 **供應商帳戶** 欄中的值。
1. 關閉 **供應預測** 頁面以返回所選產品的詳細資料頁面。
1. 在 **貿易合約** 群組中 **採購** 索引標籤的動作窗格上，選取 **查看貿易合約**。 確保已列出所有相關的採購貿易合約。 此外，對於您希望規劃最佳化使用為其指定之提前期的每個合約，也需確保 **忽略提前期** 選項已設為 **否**。
1. 在 **訂單設定** 群組中 **規劃** 索引標籤的操作窗格上，選取 **預設訂單設定** 以開啟所選產品的 **預設訂單設定** 頁面。 在 **採購訂單** FastTab 上，查看 **採購提前期** 欄位的值。 如果未定義品項涵蓋提前期覆寫，規劃最佳化將在選擇貿易合約時使用此值，其中 **忽略提前期** 選項設為 **是**。 因此，您應該根據需要調整此值。
1. 對每個相關產品重複進行此程序。

> [!NOTE]
> 規劃最佳化支援多幣種採購貿易合約。 搜尋使用 **最低單價** 選項的貿易合約時，系統會考慮使用不同貨幣的採購貿易合約明細，前提是已在貿易合約明細貨幣和法律實體貨幣之間定義匯率。 否則，系統會忽略貿易合約明細，且將在總規劃期間發生錯誤。 因此，總規劃將包含所有相關採購貿易合約明細的資訊，其中價格可以轉換為會計貨幣。 需要注意的是，在貿易合約明細價格轉換期間，系統不會考慮四捨五入規則。

## <a name="examples-of-how-planning-optimization-finds-vendor-and-lead-times"></a>規劃最佳化如何找到供應商和提前期的範例

下表的範例顯示已發布產品及其相關採購貿易合約的各種設定，是如何影響為產生的計劃訂購單找到的值。 最右側兩個欄中的 **粗體** 值，就是規劃最佳化選擇的值。 其他列中 **_粗體和斜體_** 的值是為每一列產生這些結果值的設定。

| 已發佈的產品：供應商 | 預設訂單設定：提前期 | 品項涵蓋範圍：覆寫供應商 | 品項涵蓋範圍：覆寫提前期 | 貿易合約：供應商 | 貿易合約：提前期 | 貿易合約：忽略提前期 | 產生的供應商 | 產生的提前期 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| ***US001** _ | _*_1_*_ | 否 | 否 | US003 | 3 | 否 | _ *US001** | **1** |
| US001 | 1 | ***是：US002** _ | _*_是：2_*_ | US003 | 3 | 否 | _ *US002** | **2** |
| *(空白)* | 1 | 否 | 否 | ***US003** _ | _*_3_*_ | 否 | _ *US003** | **3** |
| *(空白)* | ***1** _ | 否 | 否 | _*_US003_*_ | 3 | 是 | _ *US003** | **1** |
| *(空白)* | ***1** _ | _*_是：US002_*_ | 否 | US003 | 3 | 否 | _ *US002** | **1** |
| *(空白)* | ***1** _ | _*_是：US002_*_ | 否 | US003 | 3 | 否 | _ *US002** | **1** |
| *(空白)* | 1 | 否 | 是：2 | ***US003** _ | _*_3_*_ | 否 | _ *US003** | **3** |
| *(空白)* | 1 | 否 | ***是：2** _ | _*_US003_*_ | 3 | 是 | _ *US003** | **2** |

## <a name="additional-resources"></a>其他資源

[採購合約](../../procurement/purchase-agreements.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
