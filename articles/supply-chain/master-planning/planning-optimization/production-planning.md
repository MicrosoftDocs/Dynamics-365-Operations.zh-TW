---
title: 生產規劃
description: 本主題說明如何計劃生產，並解釋如何使用「規劃最佳化」修改計劃生產訂單。
author: ChristianRytt
ms.date: 06/01/2021
ms.topic: article
ms.search.form: ReqCreatePlanWorkspace
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: crytt
ms.search.validFrom: 2020-12-15
ms.dyn365.ops.version: 10.0.13
ms.openlocfilehash: 85167e3de5f586c341143a43412501377a6c689e
ms.sourcegitcommit: 3b87f042a7e97f72b5aa73bef186c5426b937fec
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/29/2021
ms.locfileid: "8448356"
---
# <a name="production-planning"></a>生產規劃

[!include [banner](../../includes/banner.md)]

計劃最佳化支援多種生產方案。 如果您要從現有的內建總規劃引擎遷移，請務必注意一些已變更的行為。

以下影片簡要介紹本主題中討論的概念：[Dynamics 365 Supply Chain Management ：規劃最佳化增強功能](https://youtu.be/u1pcmZuZBTw)。

## <a name="turn-on-this-feature-for-your-system"></a>為您的系統啟用此功能

如果您的系統尚未包含本主題中說明的功能，請至 [功能管理](../../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)，然後開啟 *規劃最佳化計劃生產訂單* 功能。

## <a name="planned-production-orders"></a>計劃生產訂單

當總規劃建立計劃訂單以履行需求時，訂單類型是由 **計劃訂單類型** 欄位的值決定。 如果 **計劃訂單類型** 欄位設為 *生產*，系統會建立計劃生產訂單。 這些計劃生產訂單包括有關有效物料清單 (BOM) 的相關資訊，以及相關生產設定的途程識別碼。

## <a name="requirements-from-boms"></a>BOM 規定

總規劃期間會遵循 BOM 訊息。 規劃輸出包括用於滿足生產相關材料需求的材料供應。

在總規劃期間，目前的有效物料清單會用於確定生產所需的材料。 此步驟是透過與所需生產訂單相關的 BOM 結構的所有層級來完成。 透過使用可用的現有庫存、現有的訂單供應和已核准的規劃訂單來滿足材料要求。 如有任何地方都需要額外材料，則會建立規劃訂單來滿足需求。

## <a name="scheduling-during-firming"></a>確定期間的排程

計劃生產訂單包括生產排程所需的途程識別碼。 但是，計劃訂單的計劃執行期間的排程支援仍待處理。 途程識別碼是用於在確定期間安排計劃的生產訂單。 因此，計劃生產訂單的提前期可能與從它們產生的相關計劃以及確定的生產訂單的提前期不同，如下所述：

- **計劃生產訂單**–提前期是以已發布產品的靜態提前期為根據。
- **確定生產訂單**– 提前期是以使用途程資訊和相關資源限制的排程為根據。

若需預期功能可用性的更多資訊，請參閱[規劃最佳化適合度分析](planning-optimization-fit-analysis.md)。

如果您依賴規劃最佳化尚不可用的生產功能，則可以繼續使用內建的總規劃引擎。 不需要例外狀況。

## <a name="delays"></a>延誤

如果所需物料的提前期比今天日期和物料需求日期之間的時間長，則所需物料的計劃訂單和相關的生產訂單將延遲。 對於計劃訂單，延遲 (以天為單位) 是根據已發佈產品的提前期計算。 接著，延遲資訊會透過 BOM 結構的所有層級向外傳播。 因此，您可以持續追蹤延遲原物料對客戶銷售訂單的影響。

## <a name="modifying-planned-orders"></a>修改計劃訂單

當您更改計劃訂單的資訊時，您會收到以下訊息：「請注意，手動變更對計劃訂單的影響在下一次總規劃執行之前不會反映計劃的其餘部分中。」

如果您想變更計劃訂單的資訊並查看對相關材料需求的影響，請按照以下步驟操作。

1. 更新計劃訂單。
2. 核准計劃訂單。
3. 執行總規劃。

執行總規劃時，如果包含計劃生產訂單，則不應使用篩選器。 若需詳細資訊，請參閱本主題後面的[篩選器](#filters)一節。

> [!NOTE]
> 如果計劃訂單的交貨日期更改為較晚的日期，則需求可能會與新的計劃訂單掛鉤。 當新的供應日期導致掛鉤需求延遲時會發生此行為，但根據提前期設定，可以避免延遲。

## <a name="explosion-page"></a>分解頁面

您可以使用 **分解** 頁面來分析特定生產訂單或計劃生產訂單所需的需求、相關範圍和掛鉤資訊。 **分解** 頁面上的資訊會在總規劃期間更新。 您無法直接從 **分解** 頁面更新資訊。

## <a name="filters"></a><a name="filters"></a>篩選器

為確保規劃最佳化具有計算正確結果所需的資訊，您必須在計劃訂單的整個 BOM 結構中包含與產品有任何關係的所有產品。 因此，對於包括生產的計劃方案，我們建議您避免篩選總規劃執行。

雖然在使用內建總規劃引擎時，會自動檢測相關子項目並將其包含在總規劃執行中，但規劃最佳化目前不會執行此動作。

例如，如果產品 A 的 BOM 結構中的單個 Bolt 也用於生產產品 B，則產品 A 和 B 的 BOM 結構中的所有產品都必須包含在篩選器中。 由於確保所有產品都包含在篩選器中可能很複雜，因此我們建議您在涉及生產訂單時避免篩選總規劃執行。 否則，總規劃將產生不理想的結果。

### <a name="reasons-to-avoid-filtered-master-planning-runs"></a>避免篩選總規劃執行的原因

當您為產品執行篩選後的總規劃時，規劃最佳化 (與內建的總規劃引擎不同) 不會檢測該產品 BOM 結構中的所有子產品和原材料，因此不會將它們包含在總規劃中執行。 即使規劃最佳化識別出產品 BOM 結構中的第一層級，也不會從資料庫載任何產品設定 (例如預設訂單類型或品項覆蓋範圍)。

在規劃最佳化中，預先載入執行資料並套用篩選器。 這意味著，如果特定產品中包含的子產品或原料不是篩選器的一部分，就不會為執行擷取與其有關的資訊。 此外，如果子產品或原料也包含在另一個產品中，則只包含原始產品及其組件的篩選執行會刪除為該其他產品建立的現有計劃需求。

此邏輯可能會導致篩選後的總規劃執行產生意外的結果。 以下部分提供的示例說明可能發生的意外結果。

### <a name="example-1"></a>示例 1

成品 *FG* 由以下組件組成：

- 原料 *R*
- 子產品 *S1*，由子產品 *S2* 組成

原料有庫存 *R*，而庫存中目前沒有子產品 *S1*。

當您為成品 *FG* 執行篩選總規劃執行時，會獲得成品的計劃生產訂單 *FG*，原料的計劃訂購單 *R*，以及子產品的計劃訂購單 *S1*。 這是不理想的結果，因為規劃最佳化忽略現有的原料供應 *R* 和需要使用 *S2* 生產 (而非直接訂購) 的子產品 *S1*。 發生這種情況是因為規劃最佳化只有成品 *FG* 的組件清單，而缺少任何相關資訊，例如其組件的現有供應情況或預設的訂單設定。

### <a name="example-2"></a>示例 2

以前面的例子為基礎，另有一個成品 *FG2*，也使用子產品 *S1*。 成品 *FG2* 已有計劃訂單，並且對其所有組件都提出計劃需求，包括 *S1*。

您為了解決上一個示例中篩選總規劃執行的不良結果，決定將成品 *FG* 的 BOM 結構中的所有子產品和原料加入篩選器，然後執行完全重新產生。

當您執行完全重新產生時，系統會刪除所有包含產品的所有現有結果，然後根據新計算重新建立結果。 這意味著產品 *S1* 現有的計劃需求會遭到刪除，接著只考慮 *FG* 的需求重新建立，作業完成時，成品 *FG2* 的要求會遭到忽略。 發生這種情況是因為當您執行規劃最佳化時，其不包括其他計劃生產訂單的計劃需求&mdash;，而只使用執行期間產生的計劃需求。

> [!NOTE]
> 如果成品的現有計劃訂單 *FG2* 處於 *已核准* 狀態，則即使父產品未新增至篩選器，也會包含已核准的計劃需求。

因此，除非您新增成品 *FG*、成品 *FG2*，以及這些組件所屬的所有其他產品 (連同它們的組件) 的所有組件，否則篩選後的總規劃執行將會產生不理想的結果。

由於確保所有產品都包含在篩選器中可能很複雜，因此我們建議您在涉及生產訂單時避免篩選總規劃執行。

[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
