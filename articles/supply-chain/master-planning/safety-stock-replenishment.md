---
title: 品項的安全庫存履行
description: 本主題討論安全庫存履行以及如何設置品項的安全庫存數量。
author: thethehelga
ms.date: 8/23/2021
ms.topic: article
ms.search.form: ReqSafetyKey, ReqItemTableSetup, ReqItemJournalName, ReqItemTable, EcoResProductDetailsExtended, ReqSafetyKeyDefaultDataWizard
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: v-oldolg
ms.dyn365.ops.version: 7.2999999999999998
ms.search.validFrom: 2017-12-31
ms.openlocfilehash: 937341e17688959e5721153c61af904a88608b17
ms.sourcegitcommit: bc9e75c38e192664cde226ed3a94df5a0b304369
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/10/2021
ms.locfileid: "8449478"
---
# <a name="safety-stock-fulfillment-for-items"></a>品項的安全庫存履行

[!include [banner](../includes/banner.md)]

安全庫存是指為幫助降低品項庫存不足的風險，在庫存中應該持有該品項的額外數量。 安全存貨用於當接到銷售訂單且廠商無法交付履行客戶要求裝運日期的額外品項時的緩衝存貨。 當使用安全庫存履行銷售訂單時，安全庫存將減少。 您可以使用主計劃自動將庫存恢復到安全等級。

## <a name="set-up-safety-stock-levels-for-items"></a>設置品項的安全庫存等級

安全庫存做為品項涵蓋範圍的一部分，在 **品項涵蓋範圍** 頁面的 **已發佈產品 \> 計劃 \> 涵蓋範圍** 下進行設定。

在 **最小值** 欄位，輸入您要為品項維護的安全庫存等級。 該值以庫存單位表示。 如果將該欄位保留空白，則預設值為零。 在 **涵蓋範圍代碼** 清單中選擇 **期間**、**要求** 或 **最小值/最大值** 後，可使用此欄位。 庫存等級限制適用於可用庫存，這代表保留和標記可能會在實際數量低於指定的最小等級之前觸發安全庫存補充。

> [!NOTE]
> 您必須先定義所有其他計劃涵蓋範圍維度，然後才能定義 **最小值** 欄位。 這可以避免在主計劃期間使用無效記錄。 例如，如果某維度群組用其他計劃的涵蓋範圍維度擴展，但沒有為此維度定義最小和最大庫存數量，則可能會發生使用無效記錄的情況。

您可以使用最小鍵來處理需求的季節性波動。 例如，您可以在淡季降低某品項的最小庫存等級，然後在其他月份逐漸提高該等級。 移至 **主計劃 \> 設置 \> 涵蓋範圍 \> 最小/最大鍵**，建立最小鍵。 在 **品項涵蓋範圍** 頁面的 **最小鍵** 欄位中可以指定最小鍵。

## <a name="example-minimum-key"></a>範例：最小鍵

以下程序是一個範例，說明如何設置最小鍵以解決春季和夏季月份增加的季節性需求。

1. 移至 **主計劃 \> 設置 \> 涵蓋範圍 \> 最小/最大鍵**。
1. 選擇 **新增** 以建立最小/最大鍵。
1. 在 **最小或最大鍵** 欄位上輸入鍵的識別碼。 在 **名稱** 欄位中，輸入鍵的名稱。
1. 將 **使用生效日期** 選項設為 *是*，並將 **生效日期** 欄位保留空白，以使鍵從目前年的第一天開始生效。

    > [!NOTE]
    > **使用生效日期** 和 **生效日期** 設定的組合定義鍵的生效日期。
    >
    > - 當 **使用生效日期** 選項設為 *否*，該鍵將從目前日期或系統日期開始生效。
    > - 當 **使用生效日期** 選項設為 *是*，該鍵將從 **生效日期** 欄位中定義的日期開始生效。

1. 在 **期間** 區段，建立 12 行，並為其設定以下值：

    - **變更** – 為每行指派一個從 1 到 12 的唯一編號。 該欄位表示以 **單位** 欄位中訂立的時間單位為單位的增量變更。
    - **單位** - 為每行選擇 *月*。
    - **開始日期**、**結束日期**，和 **月份** – 這些欄位是根據 **變更** 和 **單位** 設定自動設定的。 月期間從當年的第一天開始。
    - **係數** – 輸入下表中描述的值。 此欄位定義要將最小庫存乘以的係數。

        | 行 (變更) | 係數 | 結果 |
        |---|---|---|
        | 1–3 | 1 | 最小庫存量根據 **品項涵蓋範圍** 頁面上 1 月至 3 月的設定。 |
        | 4–5 | 2 | 為 4 月至 5 月，將最小庫存量乘以係數 2。 |
        | 6–8 | 2.5 | 為 6 月至 8 月，將最小庫存量乘以係數 2.5。 |
        | 9–12 | 1 | 為 9 月至 12 月，最小庫存量還原為 **品項涵蓋範圍** 頁面上的設定。 |

    您的設定現在應該類似於下圖中的設定。

    ![最小或最大鍵期間。](media/min-max-key-periods.png "最小或最大鍵期間")

> [!NOTE]
> 您還可以使用精靈來建立最小/最大鍵。 在 **最小或最大鍵** 頁面的動作窗格上，選擇 **精靈** 以打開 **最小/最大鍵** 精靈。 該精靈將引導您逐步完成建立和設定最小/最大鍵的程序。

如果涵蓋範圍代碼是 *最小值/最大值*，您還可以指定要為品項維護的最大庫存數量。 該值也以庫存單位表示。 如果預計可用庫存低於最小數量，則主計劃會產生計劃訂單以履行所有未履行的要求，並使可用庫存達到指定的最大數量。 就像設置最小庫存數量時一樣，您必須先定義所有其他計劃涵蓋範圍維度，然後才能設定 **最大值** 欄位。

## <a name="example-minmax-coverage-code"></a>範例：最小值/最大值涵蓋範圍代碼

最小數量為 10，最大數量為 15。 目前的現有庫存為 4。 這使得最小數量要求為 6。 但是，由於最大數量為 15，所以主計劃產生的計劃訂單中的數量將為 11。

對於遵循季節性需求的品項，您可能需要保持不同的最大值等級。 為此，您需要移至 **主計劃 \> 設置 \> 涵蓋範圍 \> 最小/最大鍵** 來定義 **最大鍵**。 填寫 **品項涵蓋範圍** 頁面上的 **最大鍵** 欄位。 您可以查看有關安全庫存等級的資訊，該等級透過 **品項涵蓋範圍** 頁面上的 **最小值/最大值** 索引標籤上的最小鍵進行定義。 您需要確保在特定期間內的最小值和最大值保持同步。

## <a name="safety-stock-fulfillment"></a>安全庫存履行

**履行最小值** 參數允許您選擇庫存等級必須履行您在 **最小限度** 欄位中指定數量的日期或期間。 在 **涵蓋範圍代碼** 清單中選擇 **期間**、**要求** 或 **最小值/最大值** 後，可使用此欄位。

如果使用 **最小鍵**，則選擇 **最短期間** 核取方塊來履行在最小鍵中設置的所有期間的最小庫存等級。 如果清除該核取方塊，則僅履行目前期間的最小庫存。

以下案例顯示此參數的運作原理以及其不同值之間的差異。

> [!NOTE]
> 對於本主題中的所有圖例，x 軸代表庫存，y 軸代表天數，條形代表庫存等級，箭頭代表交易記錄，例如銷售訂單行、訂購單行或計劃訂單。

[![安全庫存履行的常見案例。](media/Scenario1.png)](media/Scenario1.png)

這 **履行最小值** 參數可以有以下值：

### <a name="todays-date"></a>今天的日期

在執行主計劃的日期達到指定的最小數量。 系統會嘗試盡快履行安全庫存限制，即使可能由於提前期而不切實際。

[![今天日期的要求。](media/TodayReq.png)](media/TodayReq.png)

為今天的日期建立計劃訂單 P1，以使可用庫存在該日期高於安全庫存等級。 銷售訂單行 S1 到 S3 繼續降低庫存等級。 計劃訂單 P2 到 P4 由主計劃產生，以便在每個銷售訂單要求後將庫存等級恢復到安全限制。

使用 **要求** 涵蓋範圍代碼時，會建立多個計劃訂單。 針對頻繁需求的品項和材料使用 **期間** 或 **最小值/最大值** 覆蓋範圍來綁定補貨始終是一個不錯的方法。 下圖顯示涵蓋範圍代碼的 **期間** 的範例。

[![期間。今天的日期。](media/TodayPeriod.png)](media/TodayPeriod.png)

下圖顯示涵蓋範圍代碼 **最小值/最大值** 的範例。

[![最小值/最大值。今天的日期。](media/TodayMinMax.png)](media/TodayMinMax.png)

### <a name="todays-date--procurement-time"></a>今天的日期+採購時間

在執行主計劃的日期加上採購或生產提前期時履行指定的最小數量。 這個時間包括任何安全寬限期。 如果該品項具有貿易合約，且在 **主計劃參數** 頁面上選擇了 **尋找貿易合約** 核取方塊，將不考慮貿易合約中的交貨提前期。 提前期取自品項的涵蓋範圍設定或品項。

這種履行模式將建立具有更少延遲和更少計劃訂單的計劃，無論品項上設置的涵蓋範圍如何。

下圖顯示涵蓋範圍代碼為 **要求** 或 **期間** 時的計劃結果。

[![要求或期間。今天的日期和提前期。](media/TodayPLTReq.png)](media/TodayPLTReq.png)

下圖顯示涵蓋範圍代碼為 **最小值/最大值** 時的計劃結果。

[![最小值/最大值。今天的日期和提前期。](media/TodayPLTMinMax.png)](media/TodayPLTMinMax.png)

### <a name="first-issue"></a>首次發貨

在可用庫存低於最小等級的日期達到指定的最小數量，如下圖所示。 即使可用庫存低於執行主計劃之日的最小等級，**首次發貨** 在下一個要求出現之前不會嘗試覆蓋它。

下圖顯示涵蓋範圍代碼 **要求** 的範例。

[![計劃具有要求涵蓋範圍代碼和首次發貨履行的品項。](media/FirstIssueReq.png)](media/FirstIssueReq.png)

下圖顯示涵蓋範圍代碼的 **期間** 的範例。

[![計劃具有期間涵蓋範圍代碼和首次發貨履行的品項。](media/FirstIssuePeriod.png)](media/FirstIssuePeriod.png)

下圖顯示涵蓋範圍代碼 **最小值/最大值** 的範例。

[![計劃具有最小值/最大值涵蓋範圍代碼和首次發貨履行的品項。](media/FirstIssueMinMax.png)](media/FirstIssueMinMax.png)

在執行主計劃的日期，如果可用庫存已經低於安全庫存限制，則 **今天的日期** 和 **今天的日期+採購時間** 將立即觸發補貨。 **首次發貨** 將等到該品項有另一個發貨交易 (例如銷售訂單和 BOM 行要求)，然後它會在該交易日期觸發補貨。

在執行主計劃的日期，如果可用庫存不低於安全庫存限制，則 **今天的日期** 和 **首次發貨** 將提供完全相同的結果，如下圖所示。

[![不低於限制。](media/ReqFirstIssue.png)](media/ReqFirstIssue.png)

在執行主計劃的日期，如果可用庫存不低於安全庫存限制，則 **今天的日期+採購時間** 將提供以下結果，因為它將履行延遲到採購提前期結束時。

![履行延遲到採購提前期結束。](media/ReqTodayLT.png)

### <a name="coverage-time-fence"></a>涵蓋範圍時間柵欄

在 **涵蓋範圍時間柵欄** 欄位指定的期限內達到指定的最小數量。 當主計劃不允許將可用庫存用於實際訂單 (例如銷售或轉移) 以嘗試保持安全等級時，此選項很實用。 但是，在未來的版本中將不再需要這種補貨模式，且該選項將被取代。

## <a name="plan-safety-stock-replenishment-for-first-expired-first-out-fefo-items"></a>為先過期先出 (FEFO) 品項計劃安全庫存補貨

在任何時間點，具有最晚到期日期的庫存收貨將用於安全庫存，以允許在 FEFO (先到期先出) 的順序履行實際需求，例如銷售行或 BOM 行。

為了說明這是如何運作的，請思考以下案例。

[![FEFO 案例。](media/FEFOScenario.png)](media/FEFOScenario.png)

執行計劃時，它將涵蓋現有庫存中的第一個銷售訂單和用於剩餘數量的額外訂購單。

[![FEFO 1。](media/FEFO1.png)](media/FEFO1.png)

建立計劃訂單以確保可用庫存恢復到安全限制。

[![FEFO 2。](media/FEFO2.png)](media/FEFO2.png)

計劃第二個銷售訂單時，使用先前建立的涵蓋安全庫存的計劃訂單來涵蓋此數量。 因此，安全庫存會不斷滾動調整。

[![FEFO 3。](media/FEFO3.png)](media/FEFO3.png)

最後，建立另一個計劃訂單以涵蓋安全庫存。

[![FEFO 4。](media/FEFO4.png)](media/FEFO4.png)

所有批次都相應到期，並建立計劃訂單以在安全庫存到期後補充安全庫存。

## <a name="how-master-planning-handles-the-safety-stock-constraint"></a>主計劃如何處理安全庫存條線約束

安全庫存在系統中作為需求類型進行追蹤，就像銷售行或 BOM 要求一樣。 如果刪除 **要求類型** 資料行上的預設篩選，可以在 **淨要求** 頁面上的安全庫存要求行。

如果系統確定履行安全存貨要求交易會導致延遲履行實際需求 (例如銷售行、BOM 行、轉移要求或需求預測行)，將降低履行安全庫存要求交易的優先順序。 否則，確保可用庫存高於安全庫存數量與任何其他需求類型具有相同的優先順序。 這確保實際交易不會延遲，並有助於防止安全庫存的過度補貨和提前補貨。

在主計劃的涵蓋範圍階段，不再降低安全庫存補貨的優先順序。 現有庫存可以在任何其他需求類型之前使用。 在延遲計算期間，將新增邏輯來檢查延遲的銷售行、BOM 行要求和所有其他需求類型，以確定在使用安全庫存的前提下是否可以按時交付。 如果系統確定使用安全庫存可以最大程度地減少延遲，則銷售行或 BOM 行將用安全庫存替換其初始涵蓋範圍，且系統將改為針對安全庫存觸發補貨。

如果計劃或品項未設置為延遲計算，則安全庫存條件約束將具有與任何其他需求類型相同的優先順序。 這代表在其他需求類型之前存在現有和其他可用庫存的保留。

## <a name="additional-resources"></a>其他資源

- [使用安全庫存日記帳更新品項的最小涵蓋範圍](safety-stock-journal.md)

[!INCLUDE[footer-include](../../includes/footer-banner.md)]
