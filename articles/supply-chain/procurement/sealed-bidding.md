---
title: 詢價的密封投標
description: 本主題介紹如何設定密封投標以在廠商投標回覆被採購人員解封之前保密。
author: Henrikan
ms.date: 08/02/2021
ms.topic: article
ms.search.form: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.region: Global
ms.author: henrikan
ms.search.validFrom: 2021-08-02
ms.dyn365.ops.version: 10.0.21
ms.openlocfilehash: 96549b6053ba75f2d5b9a85bcd5b7feb006f0f1b
ms.sourcegitcommit: 3b87f042a7e97f72b5aa73bef186c5426b937fec
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/29/2021
ms.locfileid: "8449073"
---
# <a name="sealed-bidding-for-rfqs"></a>詢價的密封投標

[!include [banner](../includes/banner.md)]

密封投標可以在採購人員解封密封投標之前對廠商投標回覆保密。 與詢價 (RFQ) 相關的所有投標都可以在投標到期時首先解封。 在解封投標前，只有具有專用使用者角色和代表廠商的使用者才能存取它。

> [!IMPORTANT]
> 修改或擴充表單，或者建立新的表單或業務邏輯可能會破壞 Microsoft 為密封投標提供的保護。 您承擔使用任何修改、擴充、新表單或業務邏輯的風險，或因此類修改、擴充、新表單或業務邏輯而無法使用密封投標功能的風險。  對於因對表單的任何修改或擴充，或者您建立的或第三方為您建立的任何新表單或業務邏輯造成的任何損害，Microsoft 概不負責。 Microsoft 不對您或代表您的任何第三方進行的任何修改、擴充、新表單或業務邏輯提供技術或其他支援。 您全權負責遵守有關密封投標的所有適用法律或法規。

## <a name="how-bids-are-kept-secure"></a>如何保証投標安全

密封投標使用非對稱加密來加密投標加密金鑰 (KEK)，採對稱加密來加密實際投標。 此系統與 Microsoft Azure Key Vault 用於產生和管理用於加密密封投標的加密金鑰。 每個投標都有自己的加密金鑰。 此加密在執行 Dynamics 365 Supply Chain Management 的組織負責的金鑰保存庫中保持安全。 每當需要加密和解密時，系統都會按需要存取金鑰保存庫。

## <a name="setup-and-configuration"></a>設定和配置

本節介紹在發送需要密封投標的詢價之前必須具備的先決條件。

### <a name="step-1-set-up-user-access-to-sealed-bidding"></a>第 1 步：設定使用者對密封投標的存取權

當您使用密封投標時，只有設定為廠商連絡人的使用者才能查看、編輯和提交該廠商的投標，直到投標期限到期。 這些使用者必須擁有 **廠商 (外部)** 角色，並且必須設定為廠商帳戶的連絡人。 連絡人還必須有權進行廠商共同作業，如[建立和維護廠商共同作業](set-up-maintain-vendor-collaboration.md)中所述。

由於具有適當權限並設定為廠商連絡人的使用者可以存取廠商的密封投標，因此追蹤這些使用者的身份非常重要。 設定使用者和安全角色的系統管理員負責將密封投標的存取權指提供給真正允許查看密封投標的使用者。

### <a name="step-2-enable-the-sealed-bidding-feature"></a>第 2 步：啟用密封投標功能

在開始設定或使用此功能之前，您必須確保它在您的系統中可用。 管理員可以使用 **[功能管理](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md)** 工作區來檢查該功能的狀態，並開啟該功能。 在 **功能管理** 工作區，該功能會依以下方式列出：

- **模組：***採購和資源開發*
- **功能名稱：***詢價的密封投標*

### <a name="step-3-set-up-azure-key-vault"></a>步驟 3：設定 Azure Key Vault

Supply Chain Management 使用加密金鑰來保護所有密封的投標並將其保密，直到適當的時間。 它利用 Key Vault 的功能來產生和管理所需的金鑰。 因此，您必須設定從 Supply Chain Management 到 Key Vault 的連線以啟用系統。

> [!IMPORTANT]
> 您用於密封投標的金鑰保存庫必須滿足以下要求：
>
> - 如果您使用沙盒進行開發與測試，那麼您必須有一個專用於沙盒的金鑰保存庫和一個用於生產的單獨金鑰保存庫。
> - 每個金鑰保存庫都必須在組織擁有的 Azure 訂閱中建立 (而不是執行 Supply Chain Management 的訂閱)。
> - 每個金鑰保存庫都必須專門用於密封投標。 不得將您的密封投標金鑰保存庫用於任何其他目的。

每個投標都會擷取自己的祕密金鑰。 每次使用者查看、更新或解封投標時都會使用此金鑰。

當廠商在廠商共同作業介面中選擇 **投標** 時，Key Vault 將產生用於擷取祕密的金鑰。 然後，金鑰會在採購經理會在 Supply Chain Management 的 **採購和資源開發參數** 頁面上設定的固定時間之後過期 金鑰過期後，任何人都無法查看、編輯或解封投標。 因此，請務必配置金鑰到期時間，以便有足夠的時間完成投標流程。

在接下來的三個步驟中，您將設定與 Key Vault 的連線。 首先，您將設定用於密封投標的金鑰保存庫。 接下來，您將配置 Supply Chain Management 以與金鑰保存庫通信。 最後，您將設定金鑰的到期時間。

### <a name="step-4-set-up-a-key-vault-to-use-with-sealed-bidding"></a>步驟 4：將設定用於密封投標的金鑰保存庫

要設定您的金鑰保存庫，請按照以下步驟操作。 步驟的順序很重要。

1. 如果尚未執行與 Supply Chain Management 的訂閱不同的 Azure 訂閱，請進行設定。
1. 在單獨的 Azure 儲存體中設定金鑰保存庫。 有關詳細資訊，請參閱[維護 Azure Key Vault 儲存體](https://support.microsoft.com/help/4040294/maintaining-azure-key-vault-storage)。
1. 設定 Supply Chain Management 應用程式以充當金鑰保存庫的用戶端。 有關詳細資訊，請參閱[設定 Azure Key Vault 用戶端](https://support.microsoft.com/help/4040305/setting-up-azure-key-vault-client)。

### <a name="step-5-configure-key-vault-parameters-in-supply-chain-management"></a>步驟 5：在 Supply Chain Management 中配置 Key Vault 參數

若要配置 Supply Chain Management 以在密封投標期間與金鑰保存庫通信，請執行以下步驟。

1. 登入 Supply Chain Management ，然後移至 **系統管理 \> 設定 \> Key Vault 參數**。
1. 選擇 **新增** 以建立記錄，並為其設定以下欄位：

    - **名稱** - 輸入名稱。
    - **描述** - 輸入描述。
    - **Key Vault URL** – 輸入金鑰保存庫的預設 URL。
    - **Key Vault 用戶端** – 輸入與用於身份驗證的金鑰保存庫關聯的 Active Directory 應用程式的互動式用戶端識別碼。
    - **Key Vault 祕密金鑰** – 輸入證書的秘密參考。
    - **啟用密封投標** – 將此選項設定為 *是*。

![Key Vault 參數頁面](media/sealed-bidding-key-vault-param.png "Key Vault 參數頁面")

> [!NOTE]
> 您一次只能為密封投標啟用一個金鑰保存庫配置。 在停用現有的金鑰保存庫配置之前，您必須確保所有使用它的密封投標都已解封。 檢查每個 *已密封* 類型的詢價案例，並確保其所有回覆都已解封。

### <a name="step-6-set-the-key-expiration-time"></a>第 6 步：設定金鑰到期時間

若要設定套用於為每個新投標產生的金鑰的到期時間，請執行以下步驟。

1. 移至 **採購和資源開發參數 \> 設定 \> 採購和資源開發參數**。
1. 在 **詢價** 索引標籤上的 **天數位移** 欄位中，輸入詢價期間應持續的天數。 建立詢價後，您在此處輸入的天數將新增到系統日期，以定義詢價的預設到期日期。
1. 在 **加密金鑰到期日位移** 欄位中，輸入每個加密金鑰在發佈後保持有效的天數。 加密金鑰過期後，任何人都無法查看、編輯或解封使用此金鑰的投標。

> [!TIP]
> **加密金鑰到期日位移** 欄位的值不應小於 **天數位移** 欄位的值。

### <a name="step-7-set-the-default-bid-type"></a><a name="set-default-bid-type"></a>第 7 步：設定預設投標類型

每個詢價案例都有投標類型。 投標類型定義詢價案例是提供公開投標還是密封投標。

#### <a name="rfq-cases-that-dont-have-a-solicitation-type"></a>沒有招標類型的詢價案例

若要設定指派給在建立招標類型時未指派的新詢價案例的預設投標類型，請執行以下步驟。

1. 移至 **採購和資源開發參數 \> 設定 \> 採購和資源開發參數**。
1. 在 **詢價** 索引標籤，將 **投標類型** 欄位設定為 *密封*。

#### <a name="rfq-cases-that-have-a-solicitation-type"></a>具有招標類型的詢價案例

若要設定指派給在建立招標類型時指派的新詢價案例的預設投標類型，請執行以下步驟。

1. 移至 **採購和資源開發 \> 設定 \> 詢價 \> 招標類型**。
1. 建立新的招標類型或選擇要在其中使用 *密封* 投標類型的現有招標類型。
1. 將 **投標類型** 欄位設為 *密封*。
1. 針對您要實施密封投標的每個附加招標類型重複這些步驟。

> [!TIP]
> 建立新的詢價時不必指派招標類型。 如果指派了招標類型，則詢價的預設投標類型可以擷取它。 否則，可以使用在採購和資源開發參數中定義的預設招標類型。

## <a name="the-sealed-bidding-process"></a>密封投標流程

密封投標遵循的流程，與[詢價 (RFQ) 概觀](request-quotations.md)中所述的流程幾乎相同。 主要區別在於投標資料及其附件在解封投標之前將一直保持加密狀態。

> [!IMPORTANT]
> [問卷](/dynamicsax-2012/appuser-itpro/view-and-respond-to-questionnaires)未加密，不應用於收集敏感資訊

以下是流程概述：

1. 您建立詢價並將其傳送給一個或多個廠商。
1. 廠商透過提交密封投標來回應。
1. 您在投標項目到期時間後解封投標。
1. 投標變得可見，您可以評估和比較它們。
1. 接受投標後，您將產生訂購單、產生採購合約或更新採購申請。

### <a name="create-an-rfq-case-that-uses-sealed-bidding"></a>建立使用密封投標的詢價案例

建立密封投標詢價案例的流程與非密封投標的流程幾乎相同。 有關如何建立這兩種詢價案例的資訊，請參閱[建立詢價](tasks/create-request-quotation.md)。 本節重點介紹為密封投標建立詢價時的一些重要注意事項。

密封招標的詢價案例的 **投標類型** 值必須為 *密封*。 有三種方法可以將此值指派給詢價案例：

- 建立詢價案例後，直接在詢價案例上設定值。
- 將密封投標定義為採購和資源開發參數中所有詢價案例的預設投標類型。 (請參閱本主題前面的[設定預設投標類型](#set-default-bid-type)一節。)
- 當您建立新的詢價案例時，選擇為密封投標設定的招標類型。 (請參閱[設定預設投標類型](#set-default-bid-type)一節。)

對於密封招標，詢價案例的 **到期日期和時間** 值將確定可解封已提交投標的時間。 每行上的 **到期日期和時間** 值將與標題上的值相符。

發送詢價案例後，將無法變更投標類型。

### <a name="vendors-respond-to-an-rfq"></a>廠商回應詢價

回應密封投標的廠商將使用其回應公開投標所使用的相同程序，如[在廠商投標工作區中使用詢價](vendor-collaboration-work-customers-dynamics-365-operations.md#working-with-rfqs-in-the-vendor-bidding-workspace)中所述。 有關如何使用公開投標和密封投標的詳細說明，請參閱[輸入和比較詢價投標和決標合約](tasks/enter-compare-rfq-bids-award-contracts.md). 處理密封投標和處理公開投標的唯一區別在於，在投標期間到期之前，採購專業人員無法打開廠商的密封投標。 只有廠商的連絡人才能打開該廠商的密封投標。

> [!IMPORTANT]
> 對於密封投標，廠商只能上傳 PDF 格式的附件。 不接受其他格式。

註冊的廠商使用者在密封投標詢價中選擇後 **投標** 後，他們可以輸入其投標資料，且該資料將保持安全。 廠商可以在準備投標時儲存其工作，根據需要經常返回，然後在準備就緒後提交。 廠商還可以在提交後查看其投標。 如果廠商在提交後必須變更其投標，他們可以在投標期到期之前隨時撤回、更新並重新提交投標。

密封投標適用以下條件：

- 在密封投標期間，系統會建立 *詢價* 日記帳。
- 當廠商提交投標時，將建立沒有行但具有密封價格的詢價日記帳。
- 解封案例後，將建立具有價格和金額的詢價日記帳。 您可以透過在 **所有詢價** 頁面上選擇 **詢價日記帳** 來存取此日記帳。
- 系統會儲存使用者對密封投標執行的每個動作的記錄。 這些動作包括查看、編輯和儲存投標。 廠商和有權存取投標的採購專業人員都可以看到此記錄。
- 隨著投標的進行，採購專業人員可以查看其狀態。 狀態將為 *廠商正在更新* 或 *廠商已提交*。
- 在解封投標之前，密封投標中的行狀態仍為 *已發送*。
- 如果廠商選擇拒絕投標，投標將的 **回覆進度** 狀態為 *廠商拒絕*。 採購人員將可以看到此狀態。
- 問卷中的回答 **未** 儲存在資料庫的加密表單中。 因此，它們不是密封的。 但是，在解封案例之前，它們不會在詢價使用者介面中顯示。

### <a name="all-sealed-bid-activities-are-logged"></a>已記錄所有密封的投標活動

詳細記錄會記錄所有使用者活動和投標動作。 活動記錄可讓組織確定誰在其生命週期內更新了投標，以及更新的內容。 它還可讓組織確認只有授權人員才能存取密封投標。 活動記錄可用於每個投標 **活動** 頁面。

### <a name="review-rfq-activity"></a>查看詢價活動

每次與投標的互動都會被記錄下來，並且可以在 **活動** 頁面上查看。 下圖顯示範例。

![活動頁面範例](media/sealed-bidding-rfq-activity.png "活動頁面範例")

廠商可以在 **詢價密封投標** 頁面上選擇 **活動** 來存取 **活動** 頁面。 採購人員可以在 **詢價** 頁面上選擇 **活動** 來存取它。 活動記錄為廠商和存取投標的採購人員提供了完整的可見性。 因此，它可以顯示任何未經授權的存取。

### <a name="unseal-sealed-bids"></a>解封密封投標

為密封投標詢價案例配置的 **到期日期和時間** 值已過後，**解封** 按鈕變為可用。 選擇 **解封** 來解封所選詢價案例的所有投標。 然後，所有投標資料和附件都變得可見，以便管理對案例的回覆。 此外，還會建立包含已提交的投標資料的日記帳。

解封事件會被記錄下來，並且可以在 **活動** 頁面上查看。

### <a name="process-accepted-bids"></a>處理已接受的投標

比較和核准先前密封投標的流程與公開投標的流程相同。 有關如何評分、比較、拒絕和接受解封投標的資訊，請參閱[輸入並比較詢價投標和決標合約](tasks/enter-compare-rfq-bids-award-contracts.md)。

## <a name="the-rfq-activity-log-can-never-be-deleted"></a>無法刪除詢價活動記錄

任何人，甚至管理員和 Microsoft 支援人員都不能編輯或刪除詢價活動記錄。 這限制有助於確保密封投標流程的公平性。 它還有助於確保維護準確的稽核線索。
