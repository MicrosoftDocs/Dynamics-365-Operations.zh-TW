---
title: 運輸管理引擎
description: 運輸管理引擎定義運輸管理中，產生和處理運輸費率的邏輯。
author: Henrikan
ms.date: 06/20/2017
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: TMSFreightBillType, TMSGenericEngine, TMSMileageEngine, TMSRateEngine, TMSTransitTimeEngine, TMSZoneEngine, TMSFreightBillTypeAssignment, TMSZoneMaster, TMSEngineParameters
audience: Application User
ms.reviewer: kamaybac
ms.custom: 12234
ms.assetid: b878478c-0e04-4a1e-a037-6fdbb345a9a3
ms.search.region: Global
ms.author: henrikan
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: bce886b8029b3a00c6572642d339efa9dcad4267
ms.sourcegitcommit: 3b87f042a7e97f72b5aa73bef186c5426b937fec
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/29/2021
ms.locfileid: "8449268"
---
# <a name="transportation-management-engines"></a>運輸管理引擎

[!include [banner](../includes/banner.md)]

運輸管理引擎定義運輸管理中，產生和處理運輸費率的邏輯。 

運輸管理引擎計算任務，例如承運人的運輸費率。 引擎系統允許您在運行時根據 Supply Chain Management 中的資料變更計算策略。 運輸管理引擎類似於與特定承運人合同相關的外掛程式。

## <a name="what-engines-are-available"></a>有哪些引擎可用？
下方資料表顯示了可用的運輸管理引擎。

| 運輸管理引擎 | 描述                                                                                                                                                                                                                                                                                                                 |
|----------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **費率引擎**                  | 計算費率                                                                                                                                                                                                                                                                                                           |
| **通用引擎**               | 其他不需要來自 Supply Chain Management 的數據的引擎使用的簡單輔助引擎，例如分攤引擎。 分攤引擎用於根據尺寸 (例如體積和重量) 降低運輸到特定訂單和行的最終成本。 |
| **里程引擎**               | 計算運輸距離。                                                                                                                                                                                                                                                                                     |
| **運輸時間引擎**          | 計算從起點到終點所需的時間。                                                                                                                                                                                                                                       |
| **區域引擎**                  | 根據當前地址計算區域，並計算從地址 A 到地址 B 必須經過的區域數量。                                                                                                                                                                    |
| **運費單類型**            | 標準化貨運發票和貨運單行，用於貨運單自動匹配。                                                                                                                                                                                                                |


## <a name="what-engines-must-be-configured-to-rate-a-shipment"></a>必須設定哪些引擎才能對貨物進行評分？

若要使用特定承運人對貨物進行評分，您必須設定多個運輸管理引擎。 **費率引擎** 是必要的引擎，但可能需要其他運輸管理引擎來支援 **評分引擎**。 例如，**費率引擎** 可用於擷取從 **里程引擎** 根據來源和目的地之間的里程計算費率。

## <a name="whats-required-to-initialize-a-transportation-management-engine"></a>初始化運輸管理引擎需要什麼？
運輸管理引擎需要您設定初始化資料才能以特定方式執行。 設定可以包括以下類型的資料：
-   其他運輸管理引擎的參考資料。 詳見本節設定範例。
-   對運輸管理引擎使用的 .NET 類型的參考資料。
-   簡單設定資料。

在大多數情況下，您可以點擊 **參數** 運輸管理引擎設定表單中的按鈕來設定初始化資料。 **引用里程引擎的費率引擎設定範例**。下列範例顯示以 NET 引擎類型 Microsoft.Dynamics.Ax.Tms.Bll.MileageRateEngine 為基礎，並引用里程引擎的費率引擎所需的設定。

|          參數           |                                                                                  描述                                                                                  |
|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|  <em>RateBaseAssigner</em>   | 解釋特定架構的費率基礎分配資料的 NET 類型。 參數值的語法由兩個由豎線分隔的區段組成 ( |
|  <em>MileageEngineCode</em>  |                       里程引擎代碼，用於識別資料庫中的里程引擎記錄。                        |
| <em>ApportionmentEngine</em> |                        通用引擎代碼，用於識別資料庫中的分攤引擎。                        |

## <a name="how-is-metadata-used-in-transportation-management-engines"></a>中繼資料如何在交通管理引擎中使用？

依賴於 Supply Chain Management 中定義的資料運輸管理引擎可以使用不同的資料模式。 運輸管理系統使不同的運輸管理引擎能夠使用相同的通用實際資料庫資料表。 為了確保引擎數據的執行時解釋是正確的，您可以為數據庫表定義中繼資料。 這降低了建構新運輸管理引擎的成本，因為作業中不需要額外的資料表和表單結構。

## <a name="what-can-be-used-as-search-data-in-rate-calculations"></a>有什麼可以作為費率計算中的搜尋資料？
計算費率時使用的資料由中繼資料設定控制。 例如，如果要根據郵政編碼搜索費率，則必須根據郵政編碼的尋找類型設定中繼資料。

## <a name="do-all-engine-configurations-require-metadata"></a>所有引擎配置都需要中繼資料嗎？
不，用於從外部系統擷取費率計算所需資料的運輸管理引擎不需要中繼資料。 這些引擎的費率數據可以從外部運輸承運人系統中擷取，通常會透過 Web 服務。 例如，可以使用直接從 Bing 地圖擷取資料的里程引擎，這樣您就不需要該引擎的中繼資料。

| **附註**                                                                                                                                                                                                                                                                                                                                                                     |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 與 Supply Chain Management 一起提供的運輸管理引擎依賴從應用程序中擷取的資料。 連線到外部系統的引擎不包含在作業中。 但是，以引擎為基礎的擴充模型允許您使用 Visual Studio工具打造擴充。 |

## <a name="how-do-i-configure-metadata-for-a-transportation-management-engine"></a>如何為運輸管理引擎設定中繼資料？
對於不同類型的引擎，運輸管理引擎的中繼資料設定不同。

| 運輸管理引擎               | 中繼資料設定                                                                                                                                                                                                                                                                                                                                                                                                                                               |
|------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **費率引擎**                                | 需要一個 **費率基礎類型**。 費率基礎類型包含費率基礎資料和費率基礎分配資料的中繼資料。 速率基礎中繼數據的結構由費率引擎的類型決定。 費率基礎分配中繼資料的結構由與該費率引擎相關聯的費率基礎分配器的類型確定。 您在 **費率引擎** 頁面和 **費率主機** 頁面上設定費率引擎的費率基礎類型。 |
| **區域引擎**                                | 需要直接在區域主機上設定中繼資料。                                                                                                                                                                                                                                                                                                                                                                                                          |
| **運輸時間引擎** 和 **里程引擎** | 直接從里程引擎的配置設定表單中擷取中繼資料。                                                                                                                                                                                                                                                                                                                                                                                  |

  **費率引擎的中繼資料範例** 運輸管理引擎需要識別始發貨地址、目的地州和國家/地區以及貨物的起點和終點。 透過使用這些要求，中繼數據將類似於下表中的資料。 資料表中也包括所需輸入資料類型的相關資訊。
-   在 **費率基礎類型** 頁面上的 **運輸管理** &gt; **設定** 中定義此資訊。

| 順序 | 姓名                          | 欄位類型 | 資料類型 | 查找類型    | 必要 |
|----------|-------------------------------|------------|-----------|----------------|-----------|
| 1        | 發貨郵遞區號            | 指派 | 字串    | 郵遞區號    | 已選取  |
| 2        | 目的地州             | 指派 | 字串    | 狀態          |           |
| 3        | 目的地起始郵政編碼 | 指派 | 字串    | 郵遞區號    | 已選取  |
| 4        | 目的地結束郵政編碼   | 指派 | 字串    | 郵遞區號    | 已選取  |
| 5        | 目的地國家/地區           | 指派 | 字串    | 國家/地區 |           |

### <a name="whitepaper"></a>技術白皮書

如需更多資訊，請下載以下技術白皮書 (為支持 AX2012 而編寫，但仍適用於 Dynamics 365 Supply Chain Management)

- [運輸管理引擎](https://download.microsoft.com/download/e/0/9/e0957665-c12f-43c7-94c0-611cc49d7d61/TransportationManagementEnginesInAX.pdf)


[!INCLUDE[footer-include](../../includes/footer-banner.md)]