---
title: 財務日記帳的預設財務維度
description: 本主題描述用於定義如何在透過財務日記帳輸入的交易上，設定財務維度值的規則。 同時還包含了使用固定維度之案例的詳細資料。
author: kweekley
ms.date: 09/04/2021
ms.topic: index-page
ms.prod: ''
ms.technology: ''
ms.search.form: LedgerJournalTransDaily, LedgerJournalTransVendInvoice, LedgerJournalTransVendPaym, LedgerJournalTransCustPaym
audience: Application User
ms.reviewer: roschlom
ms.search.region: Global
ms.author: kweekley
ms.search.validFrom: 2020-12-14
ms.dyn365.ops.version: 10.0.17
ms.openlocfilehash: 327bc27f068e1f9eefacc6b5defa27044cb1a77e
ms.sourcegitcommit: d420b96d37093c26f0e99c548f036eb49a15ec30
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/03/2021
ms.locfileid: "8452886"
---
# <a name="default-financial-dimensions-on-financial-journals"></a>財務日記帳的預設財務維度

[!include [banner](../includes/banner.md)]

本主題描述用於定義如何在透過財務日記帳 (而不是透過庫存日誌或專案日記帳) 輸入的交易上，設定財務維度值的規則。 同時還包含了使用固定維度之案例的詳細資料。

## <a name="symptom"></a>徵兆

財務日記帳內的帳戶或沖銷帳戶上，未按預期設定財務維度值。 下列案例是其中兩個範例：

在總日記帳中輸入了一個憑單。 帳戶是廠商帳戶，而沖銷帳戶是銀行帳戶。 預設會在帳戶上輸入廠商的財務維度，但預設不會在沖銷帳戶上輸入銀行的財務維度。 相反地，預設會在沖銷帳戶上輸入來自帳戶的維度值。

客戶指派了預設財務維度值，而收入主科目為部門財務維度指派了固定維度值。 在總日記帳中輸入了一個憑單。  帳戶是客戶，而沖銷帳戶是分類帳科目，特別是具有固定維度值的收入帳戶。 收入主科目的沖銷帳戶上未設定固定維度。 相反地，它會設定為來自帳戶 (即來自客戶) 的部門維度值。  過帳憑單之後，會在過帳的會計分錄上使用固定維度值，但憑單仍會在收入帳戶上顯示客戶的部門值。 

日記帳內憑單上設定的財務維度值遵循哪些規則？

## <a name="resolution"></a>解決方法

預設會遵循下列規則，在財務日記帳 (例如總日記帳或廠商發票日記帳) 中的憑單明細上輸入財務維度值。 

1. **日記帳標題**

   - 預設會從日記帳名稱維度輸入日記帳標題維度。

2. **帳目明細帳戶**

   - 預設會從日記帳標題維度輸入帳目明細帳戶維度。
   - 如有任何財務維度為空白，預設會從客戶、廠商、銀行、固定資產、專案或分類帳維度輸入其值。

     - 如果帳戶類型為 **分類帳**，則會將分類帳科目上的固定維度視為交易分錄期間的預設維度。
     - 如果帳戶類型為 **客戶**、**廠商**、**銀行**、**固定資產** 或 **專案**，目前仍無法判斷主科目。 因此，預設一律不會為帳戶輸入固定維度。

3. **帳目明細沖銷帳戶**

 - 首先，帳目明細沖銷帳戶維度預設是來自帳目明細帳戶維度。

 - 如有任何財務維度為空白，下一個預設分錄會來自客戶、廠商、銀行、固定資產、專案或分類帳的預設維度。
   1. 如果沖銷帳戶類型為 **分類帳**，則會將分類帳科目上的固定維度視為交易分錄期間的預設維度。 如果預設已從帳戶輸入維度值，則主科目的預設或固定維度值不會覆寫現有值。
   2. 如果沖銷帳戶類型為 **客戶**、**廠商**、**銀行**、**固定資產** 或 **專案**，目前仍無法得知主科目，因此固定維度一律不會是沖銷帳戶的預設值。

4. **過帳**

    1. 在過帳期間，每條會計分錄明細的主科目 (帳戶和沖銷帳戶) 都會經過評估，以判斷是否有固定維度值。 如果定義了固定維度，則任何現有或空白值都會以該固定維度值取代。

        過帳之後，固定維度值就 **不會** 顯示在帳目明細上。 相反地，當您在過帳之後檢視憑單時，它會顯示在會計分錄上。

    2. 在過帳期間，預設不會輸入其他維度值，包括可能在過帳期間新增的其他分類帳科目，例如成本攤銷帳戶和公司間應付或應收帳戶。 其他分類帳科目的預設維度分錄是取自帳戶或沖銷帳戶。

在預設輸入維度值的過程中，日記帳預設程序無法判斷空白維度值為刻意保留空白，還是尚未設定預設分錄。 如果刻意將維度值保留空白，預設仍可使用稍早所述的預設順序來輸入值。 如果您需要維度包含空白值，您可能必須建立一個值為 **0** (零) 或 **空白** 的維度，以便可用來取代空白維度。

請檢閱下列有關財務維度預設順序的範例案例。

### <a name="scenario-1"></a>案例 1

前往 **總帳 \> 日記帳設定 \> 日記帳名稱**，然後選取 **GenJrn** 日記帳名稱。 然後，在 **財務維度** FastTab 上，定義預設財務維度的下列值：

- **BUSINESSUNIT：** 001
- **DEPARTMENT：** 024

[![日記帳名稱頁面](./media/financial-dimension-defaulting-jrnl-names-01.png)](./media/financial-dimension-defaulting-jrnl-names-01.png)

前往 **總帳 \> 帳目分錄 \> 總日記帳**，然後建立使用 **GenJrn** 日記帳名稱的新總日記帳。 預設會將日記帳名稱 (LedgerJournalName 資料表) 中的維度輸入至日記帳標題 (LedgerJournalTable 資料表)，如 **財務維度** 索引標籤上所示。

[![總日記帳頁面上的財務維度索引標籤](./media/financial-dimension-defaulting-genrl-jrnl-02.png)](./media/financial-dimension-defaulting-genrl-jrnl-02.png)

前往 **明細**。 在 **帳戶類型** 欄位中，選取 **分類帳**，然後在 **帳戶** 欄位中輸入 **170150**。 然後選取 **Tab** 鍵以移出欄位。 預設會從日記帳標題輸入維度。 因此，**帳戶** 值會顯示為 **170150-001-024**。

[![日記帳憑單頁面上總日記帳的帳目明細](./media/financial-dimension-defaulting-jrnl-vchr-03.png)](./media/financial-dimension-defaulting-jrnl-vchr-03.png)

將 **帳戶** 值變更為 **170150-001-023**。 輸入借方金額或貸方金額。 在 **沖銷帳戶類型** 欄位中，選取 **分類帳**，然後在 **沖銷帳戶** 欄位中輸入 **600150**。 預設會從帳戶輸入維度值。 因此，**沖銷帳戶** 值會顯示為 **600150-001-023**。

### <a name="scenario-2"></a>案例 2

使用您在案例 1 中為日記帳名稱定義的相同財務維度。 接下來，前往 **應收帳款 \> 客戶 \> 所有客戶**，並為客戶 US-001 定義預設財務維度值。 選取客戶以開啟客戶詳細資料。 在 **財務維度** 索引標籤上，保留 **BUSINESSUNIT** 維度的預設值 (**001**)。 新增 **COSTCENTER** 維度，並輸入 **007** 做為值。

建立使用 **GenJrn** 日記帳名稱的新總日記帳。 在 **財務維度** 索引標籤上，將 **BUSINESSUNIT** 值從 **001** 變更為 **002**。

前往 **明細**。 在 **帳戶類型** 欄位中，選取 **客戶**，然後在 **帳戶** 欄位中輸入 **US-001**。 若要檢視非分類帳科目類型的財務維度，請選取 **財務維度 \> 帳戶**。 輸入財務維度值的下列預設分錄：

- **BUSINESSUNIT：** 002 - 預設分錄是取自日記帳標題。 預設不會從客戶 US-001 輸入值 **001**，因為已輸入預設值。
- **COSTCENTER：** 007 - 預設分錄是取自客戶 US-001 的設定。
- **DEPARTMENT：** 024 - 預設分錄是取自日記帳標題。

回到明細，在 **沖銷帳戶類型** 中，選取 **分類帳**，然後在 **沖銷帳戶** 欄位中輸入 **600150**。 在明細上輸入下列預設財務維度值：

- **BUSINESSUNIT：** 002 - 預設分錄是取自帳戶的財務維度。 (原先預設是從日記帳標題輸入)。
- **DEPARTMENT：** 024 - 預設分錄是取自帳戶的財務維度。 (原先預設是從日記帳標題輸入)。
- **COSTCENTER：** 007 - 預設分錄是取自帳戶的財務維度。 (原先預設是從客戶輸入)。

### <a name="scenario-3"></a>案例 3

在您用於案例 2 的相同日記帳中，新增一行明細。 在 **帳戶類型** 欄位中，選取 **分類帳**，然後在 **帳戶** 欄位中輸入 **170150**。 清除預設維度值，只保留主科目 170150。 在 **沖銷帳戶類型** 欄位中，選取 **客戶**，然後在 **沖銷帳戶** 欄位中輸入 **US-001**。 輸入財務維度值的下列預設分錄：

- **BUSINESSUNIT：** 002 - 預設分錄是取自日記帳標題，因為帳戶維度值為空白。 預設不會從客戶 US-001 輸入值 **001**，因為已從日記帳標題取得預設值。 如果刻意將 **BUSINESSUNIT** 值保留空白，您也必須移除沖銷帳戶上的財務維度。
- **COSTCENTER：** 007 - 預設分錄是取自客戶 US-001，因為帳戶維度值和日記帳標題維度值為空白。 如果刻意將 **COSTCENTER** 值保留空白，您也必須移除沖銷帳戶上的財務維度。
- **DEPARTMENT：** 024 - 預設分錄是取自日記帳標題，因為帳戶維度值為空白。 如果刻意將 **DEPARTMENT** 值保留空白，您也必須移除沖銷帳戶上的財務維度。

### <a name="scenario-4"></a>案例 4

使用您在案例 1 和 2 中為日記帳名稱和客戶定義的相同預設財務維度值。 接下來，為主科目 170150 上的 **BUSINESSUNIT** 定義固定維度值。 前往 **總帳 \> 會計科目表 \> 帳戶 \> 主科目**。 在 **主科目** 欄位中選取 **170150**，然後在 **法人實體覆寫** 索引標籤上選取 **新增**。 選取 **USMF** 做為法律實體，然後選取 **新增**。 選取該記錄，然後選取 **預設維度**。 將 **BUSINESSUNIT** 維度變更為 **固定值**，並輸入 **003** 做為值。

建立使用 **GenJrn** 日記帳名稱的新總日記帳。 在 **財務維度** 索引標籤上，移除所有預設維度值。

前往 **明細**。 在 **帳戶類型** 欄位中，選取 **分類帳**，然後在 **帳戶** 欄位中輸入 **170150**。 然後選取 **Tab** 鍵以移出欄位。 預設會從帳戶 170150 的主科目設定輸入維度值。 因此，**帳戶** 值會顯示為 **170150-003-**。

將 **帳戶** 值變更為 **170150-004-**。 **日記帳功能無法防止變更固定維度值。** 輸入借方金額或貸方金額。 在 **沖銷帳戶類型** 欄位中，選取 **分類帳**，然後在 **沖銷帳戶** 欄位中輸入 **170250**。 預設會從帳戶輸入財務維度值 004 做為預設值。 然後過帳文件。 在日記帳中，選取 **憑單**。 請注意，在過帳期間，**BUSINESSUNIT** 值會還原為固定維度值 **003**。

當您返回日記帳上的憑單時，**BUSINESSUNIT** 維度 **不會** 反映固定維度值。 它一律會有過帳之前在畫面上顯示的值。 過帳程序不會變更在憑單上輸入的任何內容。 過帳期間只會變更會計分錄。

## <a name="developer-notes"></a>開發人員注意事項

如果您是開發人員並想查看預設程序的程式碼，請檢閱下列方法：

- **LedgerJournalEngine.accountModified()** - 此方法是主要帳戶維度預設程序的主要進入點，這是所有日記帳的標準 (並由某些日記帳類型覆寫)。
- **LedgerJournalEngine.offsetAccountModified()** - 此方法是沖銷帳戶維度預設程序的主要進入點。
