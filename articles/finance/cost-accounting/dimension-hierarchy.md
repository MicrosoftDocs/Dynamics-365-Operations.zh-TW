---
title: 維度階層
description: 本主題提供有關維度階層的資訊。 您可以使用維度階層來定義成本會計中的報告結構、成本原則和安全設定。
author: AndersGirke
ms.date: 06/16/2017
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: CAMDimensionHierarchy,
audience: Application User
ms.reviewer: roschlom
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: Manufacturing
ms.author: roschlom
ms.search.validFrom: 2016-11-30
ms.dyn365.ops.version: Version 1611
ms.openlocfilehash: 40ae7b61537cdcd1934056b9e289f342e96b57d3eebe5a6e713b2db91310ed9a
ms.sourcegitcommit: 42fe9790ddf0bdad911544deaa82123a396712fb
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/05/2021
ms.locfileid: "8450702"
---
# <a name="dimension-hierarchy"></a>維度階層

[!include [banner](../includes/banner.md)]

本主題提供有關維度階層的資訊。 您可以使用維度階層來定義成本會計中的報告結構、成本原則和安全設定。  

## <a name="overview"></a>概觀

維度階層用於成本會計中的各個地方。 維度階層可讓您定義以下資訊：

-  符合組織要求的報告結構
-  成本原則
-  安全性設定

以下是維度階層範例。

![維度階層的範例。](./media/dimension-hierarchy.png)

可以為以下類型的維度建立維度階層：

-  成本元素維度
-  成本物件維度
-  統計維度

> [!NOTE]
> - 如果需要不同的視角，您可以為同一維度建立多個維度階層。
> - 維度階層只能與一個維度相關聯。
> - 維度階層在其結構中可以有無限的級別。 所有級別都將可在 **成本控制** 工作區使用。 當出於報告目的使用 Microsoft Excel 或 Microsoft Power BI 時，僅匯出維度階層的前 15 個級別。 存在此限制是因為 Excel 和 Power BI 均要求固定的結構描述。
> - 維度階層沒有日期限制。 因此，對維度階層的任何變更都會立即儲存到記錄中，且您無法比較此日期之前的維度階層和此日期之後的維度階層。

## <a name="dimension-hierarchy-type"></a>維度階層類型

建立新維度階層時，必須選取階層類型。 前往 **成本會計** > **維度** > **維度階層**。 點選 **新增**，然後選擇維度階層類型。 您可以選擇 **維度分類階層** 或 **維度分級階層**。

### <a name="dimension-categorization-hierarchy"></a>維度分類階層

**維度分類階層** 類型用於報告目的。 它僅支援成本元素維度。 當您選擇此類型時，適用以下規則：

-  一個維度成員可以在階層中多次關聯。
-  透過將成本行為分配到葉節點，您可以將成本元素維度成員放在不同的節點中。

### <a name="dimension-classification-hierarchy"></a>維度分級階層

**維度分級階層** 類型用於定義規則和用於報告目的。 其支援所有維度，例如成本標的維度、成本元素維度，以及統計維度。 當您選擇此類型，一個維度成員在階層中只能關聯一次。

## <a name="create-and-maintain-a-dimension-hierarchy"></a>建立並維護維度階層

維度階層建立為具有節點和葉節點關係的樹狀結構。

-  一個節點可以有 1:_n_ 個子節點。
-  一個節點不能同時擁有子節點和葉節點。
-  只能在階層中的最低級別分配葉節點。

### <a name="example"></a>範例

一家小公司的組織結構如下，其中財務和人力資源隸屬於管理部門，裝配和包裝隸屬於生產部門。

![組織結構範例。](./media/dimension-hierarchy-org.png)

成本物件維度代表組織中的所有成本中心。

- 成本物件維度
    - 成本中心

代表所有成本中心的成本物件維度可以按此處所示進行設定。

| 成本中心 | 描述 |
|--------------|-------------|
| CC001        | HR          |
| CC002        | Finance     |
| CC003        | 稅金         |
| CC007        | AR/AP       |
| CC005        | 組件    |
| CC006        | 包裝   |

成本元素維度代表組織中的所有成本元素。

- 成本元素維度
    - 成本元素

代表所有成本元素的成本元素維度可以按此處所示進行設定。

| 成本元素 | 描述 |
|---------------|-------------|
| 10001         | 電 |
| 10010         | 清潔    |
| 10011         | 加熱     |
| 40001         | COGS        |

符合組織報告要求的維度階層可以按此處所示進行設定。

**維度階層詳細資料**

| 維度階層名稱 | 維度    | 維度階層類型名稱      | 存取清單階層 |
|--------------------------|--------------|------------------------------------|-----------------------|
| 組織             | 成本中心 | 維度分類階層 | 否                    |

可以按此處所示設定報告的維度階層。

**維度成員範圍**

|   節點           |   來源維度成員   |   目標維度成員   |
|-------------------|---------------------------|-------------------------|
| 組織      |                           |                         |
| &nbsp;&nbsp;系統管理員         |                           |                         |
| &nbsp;&nbsp;&nbsp;&nbsp;Finance   | CC002                     | CC003                   |
|                   | CC007                     | CC007                   |
| &nbsp;&nbsp;&nbsp;&nbsp;HR        | CC001                     | CC001                   |
| &nbsp;&nbsp;生產    |                           |                         |
| &nbsp;&nbsp;&nbsp;&nbsp;包裝 | CC005                     | CC005                   |
| &nbsp;&nbsp;&nbsp;&nbsp;組件  | CC006                     | CC006                   |

符合原則要求的維度階層可以按此處所示進行設定。

**維度階層詳細資料**

| 維度階層名稱 | 維度     | 維度階層類型名稱      |
|--------------------------|---------------|------------------------------------|
| 成本行為            | 成本元素 | 維度分類階層 |

可以按此處所示設定原則的維度階層。

**維度成員範圍**

|   節點           |   來源維度成員   |   目標維度成員   |
|-------------------|---------------------------|-------------------------|
| 成本行為     |                           |                         |
| &nbsp;&nbsp;固定成本    | 10001                     | 10011                   |
| &nbsp;&nbsp;變動成本 | 40001                     | 40010                   |

> [!NOTE]
> 在 **維度成員範圍** 下，一個節點可以包含 1:_n_ 個維度成員範圍。 您可以插入尚未作為維度成員存在的維度成員識別碼。 這種方法可讓階層彈性地適應未來的需求。  

### <a name="copy-a-hierarchy"></a>複製階層

您可以複製目前維度階層作為新維度階層的起點。 如果您想將以前的維度階層與新的維度階層進行比較，這種方法會很有用。

### <a name="rearrange-nodes-in-a-hierarchy"></a>重新排列階層中的節點

您可以將節點在結構的目前級別範圍內上移和下移。 這樣，您可以重新排列報告中節點在 **成本控制** 工作區中的順序。

您可以透過選擇目標節點將節點移動到階層中的新位置。 有兩種方式可移動節點：

- **下移** – 將選定節點從其在階層中的目前位置移動，並將其插入選定目標節點的 **下方**。
- **後移** – 將選定節點從其在階層中的目前位置移動，並將其插入階層的所選目標節點的 **後方**。

> [!NOTE] 
> 將資料匯出到 Excel 或 Power BI 時，不維持節點的順序，因為這些工具預設使用字母數字排序順序。 您應該手動重新排列順序。

## <a name="define-dimension-hierarchies-for-reporting"></a>定義報告的維度階層

維度階層對於報告十分重要。 其可讓您定義適合單個組織的特定結構。 在維度階層的節點級別完成的彙總讓組織中任何級別的利益相關者都可以看到任何級別的資料。

維度階層可用於以下報告工具。 這種方法有助於保證報告結構的一致性。

- **成本控制** 工作區 (用戶端)：

    - 透過設定控制。

- **成本控制** 工作區 (行動裝置應用程式)：

    - 透過設定控制。

- Excel

    - 提供為每個匯出定義選擇特定維度階層的選項：

        - 一個成本元素維度階層 (必要)
        - 一個成本物件維度階層 (選用)
        - 一個統計維度階層 (選用)

- Power BI：

    - 所有維度階層均可用。
    
如果使用 Excel 或 Power BI 建立報表，則僅匯出維度層次結構的前 15 個級別。 存在此限制是因為在 Excel 和 Power BI 中均要求固定結構描述。 如果一個階層的級別超過 15 個，則不會匯出其他級別。 標準化資料表包含階層中每個維度成員的記錄。 因此，發生了自動彙總。 此行為有助於確保階層中 15 個可用級別中的任何級別的餘額仍然正確。

以下範例顯示維度階層在報告結構中看起來會是什麼樣子。

| 成本物件維度階層 - 層級 1 | 成本物件維度階層 - 層級 2 | 成本物件維度階層 - 層級 3 | 成本物件維度階層 - 層級 4 | 成本物件維度階層 - 層級 15 |
|-------------------------------------------|-------------------------------------------|-------------------------------------------|-------------------------------------------|--------------------------------------------|
| 組織                              | 系統管理員                                     | Finance                                   | CC002                                     |                                            |
| 組織                              | 系統管理員                                     | Finance                                   | CC003                                     |                                            |
| 組織                              | 系統管理員                                     | Finance                                   | CC007                                     |                                            |
| 組織                              | 系統管理員                                     | HR                                        | CC001                                     |                                            |
| 組織                              | 生產                                | 包裝                                 | CC005                                     |                                            |
| 組織                              | 生產                                | 組件                                  | CC006                                     |                                            |

### <a name="update-the-dimension-hierarchies-that-are-used-for-reporting"></a>更新用於報告的維度階層 

在一段時間後，必須更新在前面提及的報告工具中使用的維度階層。 您可以透過重新整理用戶端來更新維度階層。

- **成本控制** 工作區 (用戶端)
- **成本控制** 工作區 (行動裝置應用程式)

預先快取作業每 24 小時更新一次維度階層。 更新匯出的資料後，更新後的維度階層可在以下工具中使用：

- Excel
- Power BI

> [!NOTE] 
> 要手動觸發維度階層快取的更新，您可以為必須更新的一個或多個維度階層建立一個到 Excel 的新匯出。

## <a name="define-dimension-hierarchies-for-cost-policies"></a>定義成本原則的維度階層

成本會計包括定義了詳細規則的多個原則。 您必須為以下原則定義一個或多個維度階層：

- 成本行為
- 成本分配
- 成本分攤
- 成本彙總

維度階層使建立規則變得容易。 為避免必須為每個維度成員建立規則，您可以利用維度階層級別提供的維度成員彙總。 如果有重疊的規則，則必須定義系統在計算間接費用時將考慮的特定規則。

### <a name="example-define-a-cost-behavior-policy"></a>範例：定義成本行為原則

將建立新的成本行為原則，並將適當的維度階層指派給該原則，如此處所示。

**成本行為原則**

| 原則名稱   | 成本元素維度階層 | 成本物件維度階層 | 會計貨幣 |
|---------------|----------------------------------|---------------------------------|---------------------|
| 成本行為 | 成本行為                    | 組織                    | 美元                 |

**規則**

| 成本元素維度階層節點 | 成本物件維度階層節點 | 固定百分比 | 固定金額 | 生效日期 | 失效日期 |
|---------------------------------------|--------------------------------------|------------------|--------------|------------|----------|
| 固定成本                            | 組織                         | 100.00           | 0.00         | 1/1/2017   | 永不    |
| 10001                                 | 組織                         | 0.00             | 150.00       | 1/1/2017   | 永不    |
| 10001 (\*)                             | Finance                              |                  | 50.00        | 1/1/2017   | 永不    |
| 成本行為或變動成本 (\*\*)   | 組織                         | 0.00             | 0.00         | 1/1/2017   | 永不    |

\*變動成本節點不是必需的。 如果成本未歸類為固定成本，則它必須是變動成本。

\*\*為成本元素成員 10001 和在財務階層級別下彙總的所有成本物件成員 (CC002、CC003、CC007) 的組合建立詳細規則。

上述規則顯示了維度階層提供的靈活性。 透過定義進階規則，您可以幫助最大限度地減少維護。 然後，您可以定義詳細的規則以適應特定的業務目標。

如果更新了規則中使用的維度階層，系統會自動進行更新。

如果不再需要規則中的細微性級別，則可以使規則過期。

例如，不再需要財務成本物件維度階層節點的特定成本行為規則。 在這種情況下，點選 **過期規則** 使規則失效。

| 成本元素維度階層節點 | 成本物件維度階層節點 | 固定百分比 | 固定金額 | 生效日期 | 失效日期  |
|---------------------------------------|--------------------------------------|------------------|--------------|------------|-----------|
| 固定成本                            | 組織                         | 100,00           | 0,00         | 1/1/2017   | 永不     |
| 10001                                 | 組織                         | 0,00             | 150,00       | 1/1/2017   | 永不     |
| 10001                                 | Finance                              |                  | 50,00        | 1/1/2017   | 20/1/2017 |
| 成本行為或變動成本        | 組織                         | 0,00             | 0,00         | 1/1/2017   | 永不     |

在 2017 年 1 月 20 日之後執行的任何間接費用計算都不再考慮此規則。

> [!NOTE] 
> **生效日期** 和 **失效日期** 欄位具有日期和時間限制。 您可以使規則到期並在同一天執行新的間接費用計算。

## <a name="define-dimension-hierarchies-for-security-setup"></a>定義安全性設定的維度階層

成本會計資料應提供給負責報表單位的所有經理。 在成本會計術語中，報表單位表示為一個成本物件或一組成本物件。

可能所有經理都將能夠存取高度敏感的業務資料，例如收入和利潤。 因此，設定安全性非常重要，這樣經理只能看到與他們相關的資料。 為了幫助控制資料安全，需定義維度階層。

- 僅當在維度階層引用中選擇的維度值是成本物件維度時，才適用維度階層。
- 存取清單階層中的每個成本物件維度只能啟用一個維度階層。

**維度階層詳細資料**

| 維度階層名稱 | 維度    | 維度階層類型名稱      | 存取清單階層 |
|--------------------------|--------------|------------------------------------|-----------------------|
| 組織             | 成本中心 | 維度分類階層 | **是**               |

新的 **使用者** FastTab 在階層設計工具中可用。 在這裡，您可以在階層中的每個節點插入一個或多個使用者識別碼。

**使用者和維度成員範圍**

|   節點         |   使用者 ID        |   起始維度成員   |   目標維度成員   |
|-----------------|------------------|---------------------------|-------------------------|
| 組織    | Benjamin, Claire |                           |                         |
| &nbsp;&nbsp;系統管理員         | 四月            |                           |                         |
| &nbsp;&nbsp;&nbsp;&nbsp;Finance   | Alicia           | CC002                     | CC003                   |
|                 |                  | CC007                     | CC007                   |
| &nbsp;&nbsp;&nbsp;&nbsp;人力資源        | Arnie            | CC001                     | CC001                   |
| &nbsp;&nbsp;生產    | David            |                           |                         |
| &nbsp;&nbsp;&nbsp;&nbsp;裝箱 | Ellen            | CC005                     | CC005                   |
| &nbsp;&nbsp;&nbsp;&nbsp;組件  | Chris            | CC006                     | CC006                   |

> [!NOTE] 
> 成本會計應指派到階層的頂端，以便他們可以查看成本會計中的所有分錄。

要啟用存取清單階層及其安全性設定，請前往 **成本會計** > **設定** > **參數** > **一般**。 選取 **啟用成本物件維度成員的檢視表存取權** 參數。

存取清單階層的設定用於控制以下區域中顯示的資料：

- **成本控制** 工作區 (用戶端)：

    - 用於鑽研方案的表單中的資料

- **成本控制** 工作區 (行動裝置應用程式)：

    - 卡內餘額

- Power BI：

    - Power BI 視覺化中顯示的資料
    - 在Dynamics 365 Finance 用戶端中嵌入的資料 Power BI 視覺化項

> [!NOTE] 
> - 在存取清單階層影響 Power BI 中的資料之前，Power BI 中的存取清單階層和列等級安全性必須配對。 有關詳細資訊，請參閱[設定成本會計內容套件的安全性](../../fin-ops-core/dev-itpro/analytics/setup-security-cost-accounting-content-pack.md)。
> - 存取清單階層無助於將資料安全匯出到 Excel。 因此，該報表工具只能由必須具有查看資料的完全存取權限的成本會計師和經理使用。


[!INCLUDE[footer-include](../../includes/footer-banner.md)]